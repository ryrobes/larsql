cascade_id: feedback_review
description: Professional feedback review app - approve or reject items one by one
  with summary statistics
inputs_schema: {}
model: claude-sonnet-4-20250514
cells:
- name: generate_data
  tool: python_data
  inputs:
    code: "import random\nfrom datetime import datetime, timedelta\n\ncategories =\
      \ ['Product', 'Service', 'Support', 'Billing', 'UX/UI']\nsubmitters = ['Alice\
      \ Chen', 'Bob Martinez', 'Carol White', 'David Kim', 'Eva Johnson', 'Frank Lee',\
      \ 'Grace Park', 'Henry Wilson']\npriorities = ['Critical', 'High', 'Medium',\
      \ 'Low']\n\nfeedback_templates = [\n    'The {} needs significant improvement\
      \ in response time.',\n    'Great experience with {}, but could use better documentation.',\n\
      \    'Having issues with {} - please address urgently.',\n    'The {} exceeded\
      \ my expectations. Very impressed!',\n    'Suggestion: {} could benefit from\
      \ more automation.',\n    'Frustrated with {} - multiple attempts to resolve\
      \ failed.',\n    'The {} is intuitive but lacks advanced features.',\n    'Please\
      \ review the {} pricing structure.',\n]\n\nresult = []\nbase_date = datetime.now()\n\
      \nfor i in range(8):\n    cat = random.choice(categories)\n    result.append({\n\
      \        'id': f'FB-{1001 + i}',\n        'submitter': submitters[i],\n    \
      \    'category': cat,\n        'feedback': random.choice(feedback_templates).format(cat.lower()),\n\
      \        'priority': random.choice(priorities),\n        'date': (base_date\
      \ - timedelta(days=random.randint(1, 30))).strftime('%Y-%m-%d'),\n        'status':\
      \ 'pending'\n    })"
  handoffs:
  - overview_screen
- name: overview_screen
  context:
    from:
    - generate_data
  hitl: "<div style=\"font-family: 'SF Mono', 'Consolas', monospace; background: #000;\
    \ color: #e5e7eb; min-height: 100vh; padding: 16px;\">\n  <div style=\"border-bottom:\
    \ 1px solid #333; padding-bottom: 12px; margin-bottom: 16px;\">\n    <h1 style=\"\
    margin: 0; font-size: 18px; font-weight: 500; color: #fff;\">FEEDBACK REVIEW QUEUE</h1>\n\
    \    <p style=\"margin: 4px 0 0 0; font-size: 11px; color: #64748b;\">{{ outputs.generate_data.result\
    \ | length }} items pending review</p>\n  </div>\n\n  <table style=\"width: 100%;\
    \ border-collapse: collapse; font-size: 12px;\">\n    <thead>\n      <tr style=\"\
    border-bottom: 2px solid #a78bfa;\">\n        <th style=\"text-align: left; padding:\
    \ 8px 6px; color: #a78bfa; font-weight: 500; text-transform: uppercase; font-size:\
    \ 10px; letter-spacing: 0.5px;\">ID</th>\n        <th style=\"text-align: left;\
    \ padding: 8px 6px; color: #a78bfa; font-weight: 500; text-transform: uppercase;\
    \ font-size: 10px; letter-spacing: 0.5px;\">Submitter</th>\n        <th style=\"\
    text-align: left; padding: 8px 6px; color: #a78bfa; font-weight: 500; text-transform:\
    \ uppercase; font-size: 10px; letter-spacing: 0.5px;\">Category</th>\n       \
    \ <th style=\"text-align: left; padding: 8px 6px; color: #a78bfa; font-weight:\
    \ 500; text-transform: uppercase; font-size: 10px; letter-spacing: 0.5px;\">Feedback</th>\n\
    \        <th style=\"text-align: left; padding: 8px 6px; color: #a78bfa; font-weight:\
    \ 500; text-transform: uppercase; font-size: 10px; letter-spacing: 0.5px;\">Priority</th>\n\
    \        <th style=\"text-align: left; padding: 8px 6px; color: #a78bfa; font-weight:\
    \ 500; text-transform: uppercase; font-size: 10px; letter-spacing: 0.5px;\">Date</th>\n\
    \      </tr>\n    </thead>\n    <tbody>\n      {% for item in outputs.generate_data.result\
    \ %}\n      <tr style=\"border-bottom: 1px solid #222; {% if loop.index is odd\
    \ %}background: #0a0a0a;{% endif %}\">\n        <td style=\"padding: 6px; color:\
    \ #00e5ff; font-weight: 500;\">{{ item.id }}</td>\n        <td style=\"padding:\
    \ 6px;\">{{ item.submitter }}</td>\n        <td style=\"padding: 6px;\"><span\
    \ style=\"background: #1a1a1a; border: 1px solid #333; padding: 2px 6px; font-size:\
    \ 10px;\">{{ item.category }}</span></td>\n        <td style=\"padding: 6px; max-width:\
    \ 300px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; color:\
    \ #94a3b8;\">{{ item.feedback }}</td>\n        <td style=\"padding: 6px;\">\n\
    \          {% if item.priority == 'Critical' %}<span style=\"color: #ef4444;\"\
    >●</span>\n          {% elif item.priority == 'High' %}<span style=\"color: #f97316;\"\
    >●</span>\n          {% elif item.priority == 'Medium' %}<span style=\"color:\
    \ #eab308;\">●</span>\n          {% else %}<span style=\"color: #22c55e;\">●</span>{%\
    \ endif %}\n          {{ item.priority }}\n        </td>\n        <td style=\"\
    padding: 6px; color: #64748b; font-size: 11px;\">{{ item.date }}</td>\n      </tr>\n\
    \      {% endfor %}\n    </tbody>\n  </table>\n\n  <form hx-post=\"/api/checkpoints/{{\
    \ checkpoint_id }}/respond\" hx-ext=\"json-enc\" hx-swap=\"outerHTML\" style=\"\
    margin-top: 20px; padding-top: 16px; border-top: 1px solid #333;\">\n    <input\
    \ type=\"hidden\" name=\"response[current_index]\" value=\"0\" />\n    <input\
    \ type=\"hidden\" name=\"response[decisions]\" value=\"[]\" />\n    <button type=\"\
    submit\" name=\"response[action]\" value=\"start_review\" style=\"background:\
    \ #a78bfa; color: #000; border: none; padding: 10px 24px; font-size: 13px; font-weight:\
    \ 600; cursor: pointer; font-family: inherit;\">\n      BEGIN REVIEW →\n    </button>\n\
    \  </form>\n</div>"
  handoffs:
  - review_item
- name: review_item
  context:
    from:
    - generate_data
  hitl: "{% set idx = state.current_index | default(0) | int %}\n{% set items = outputs.generate_data.result\
    \ %}\n{% set current_item = items[idx] %}\n{% set total = items | length %}\n\
    {% set decisions_json = state.decisions | default('[]') %}\n\n<div style=\"font-family:\
    \ 'SF Mono', 'Consolas', monospace; background: #000; color: #e5e7eb; min-height:\
    \ 100vh; padding: 16px;\">\n  \n  <div style=\"display: flex; justify-content:\
    \ space-between; align-items: center; border-bottom: 1px solid #333; padding-bottom:\
    \ 12px; margin-bottom: 20px;\">\n    <div>\n      <h1 style=\"margin: 0; font-size:\
    \ 16px; font-weight: 500; color: #fff;\">ITEM REVIEW</h1>\n      <p style=\"margin:\
    \ 4px 0 0 0; font-size: 11px; color: #64748b;\">{{ idx + 1 }} of {{ total }}</p>\n\
    \    </div>\n    <div style=\"background: #111; border: 1px solid #333; padding:\
    \ 4px 12px;\">\n      <span style=\"color: #a78bfa; font-size: 14px; font-weight:\
    \ 600;\">{{ current_item.id }}</span>\n    </div>\n  </div>\n\n  <div style=\"\
    display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 20px;\"\
    >\n    <div style=\"background: #0a0a0a; border: 1px solid #222; padding: 12px;\"\
    >\n      <div style=\"font-size: 10px; color: #64748b; text-transform: uppercase;\
    \ margin-bottom: 4px;\">Submitter</div>\n      <div style=\"font-size: 14px;\"\
    >{{ current_item.submitter }}</div>\n    </div>\n    <div style=\"background:\
    \ #0a0a0a; border: 1px solid #222; padding: 12px;\">\n      <div style=\"font-size:\
    \ 10px; color: #64748b; text-transform: uppercase; margin-bottom: 4px;\">Category</div>\n\
    \      <div style=\"font-size: 14px;\">{{ current_item.category }}</div>\n   \
    \ </div>\n    <div style=\"background: #0a0a0a; border: 1px solid #222; padding:\
    \ 12px;\">\n      <div style=\"font-size: 10px; color: #64748b; text-transform:\
    \ uppercase; margin-bottom: 4px;\">Priority</div>\n      <div style=\"font-size:\
    \ 14px;\">{% if current_item.priority == 'Critical' %}<span style=\"color: #ef4444;\"\
    >●</span>{% elif current_item.priority == 'High' %}<span style=\"color: #f97316;\"\
    >●</span>{% elif current_item.priority == 'Medium' %}<span style=\"color: #eab308;\"\
    >●</span>{% else %}<span style=\"color: #22c55e;\">●</span>{% endif %} {{ current_item.priority\
    \ }}</div>\n    </div>\n    <div style=\"background: #0a0a0a; border: 1px solid\
    \ #222; padding: 12px;\">\n      <div style=\"font-size: 10px; color: #64748b;\
    \ text-transform: uppercase; margin-bottom: 4px;\">Date</div>\n      <div style=\"\
    font-size: 14px;\">{{ current_item.date }}</div>\n    </div>\n  </div>\n\n  <div\
    \ style=\"background: #0a0a0a; border: 1px solid #333; border-left: 3px solid\
    \ #00e5ff; padding: 16px; margin-bottom: 24px;\">\n    <div style=\"font-size:\
    \ 10px; color: #64748b; text-transform: uppercase; margin-bottom: 8px;\">Feedback\
    \ Content</div>\n    <div style=\"font-size: 14px; line-height: 1.6;\">{{ current_item.feedback\
    \ }}</div>\n  </div>\n\n  <form id=\"review-form\" hx-post=\"/api/checkpoints/{{\
    \ checkpoint_id }}/respond\" hx-ext=\"json-enc\" hx-swap=\"outerHTML\">\n    <input\
    \ type=\"hidden\" id=\"current_index\" name=\"response[current_index]\" value=\"\
    {{ idx + 1 }}\" />\n    <input type=\"hidden\" id=\"decisions\" name=\"response[decisions]\"\
    \ value=\"\" />\n    <input type=\"hidden\" id=\"action\" name=\"response[action]\"\
    \ value=\"next\" />\n    \n    <div style=\"display: flex; gap: 12px;\">\n   \
    \   <button type=\"button\" onclick=\"handleDecision('approve')\" style=\"flex:\
    \ 1; background: transparent; border: 2px solid #22c55e; color: #22c55e; padding:\
    \ 14px 24px; font-size: 14px; font-weight: 600; cursor: pointer; font-family:\
    \ inherit; transition: all 0.2s;\" onmouseover=\"this.style.background='#22c55e';this.style.color='#000'\"\
    \ onmouseout=\"this.style.background='transparent';this.style.color='#22c55e'\"\
    >\n        ✓ APPROVE\n      </button>\n      <button type=\"button\" onclick=\"\
    handleDecision('reject')\" style=\"flex: 1; background: transparent; border: 2px\
    \ solid #ef4444; color: #ef4444; padding: 14px 24px; font-size: 14px; font-weight:\
    \ 600; cursor: pointer; font-family: inherit; transition: all 0.2s;\" onmouseover=\"\
    this.style.background='#ef4444';this.style.color='#000'\" onmouseout=\"this.style.background='transparent';this.style.color='#ef4444'\"\
    >\n        ✗ REJECT\n      </button>\n    </div>\n  </form>\n\n  <script>\n  \
    \  const total = {{ total }};\n    const currentIdx = {{ idx }};\n    let decisions\
    \ = {{ decisions_json }};\n    \n    function handleDecision(decision) {\n   \
    \   decisions.push({ id: '{{ current_item.id }}', decision: decision });\n   \
    \   document.getElementById('decisions').value = JSON.stringify(decisions);\n\
    \      \n      if (currentIdx + 1 >= total) {\n        document.getElementById('action').value\
    \ = 'finish';\n      }\n      \n      document.getElementById('review-form').requestSubmit();\n\
    \    }\n  </script>\n\n  <div style=\"margin-top: 20px; padding-top: 16px; border-top:\
    \ 1px solid #222;\">\n    <div style=\"display: flex; gap: 8px;\">\n      {% for\
    \ i in range(total) %}\n      <div style=\"width: 24px; height: 4px; {% if i <\
    \ idx %}background: #22c55e;{% elif i == idx %}background: #a78bfa;{% else %}background:\
    \ #333;{% endif %}\"></div>\n      {% endfor %}\n    </div>\n  </div>\n</div>"
  handoffs:
  - review_item
  - summary_screen
- name: summary_screen
  context:
    from:
    - generate_data
  hitl: "{% set decisions_json = state.decisions | default('[]') %}\n\n<div style=\"\
    font-family: 'SF Mono', 'Consolas', monospace; background: #000; color: #e5e7eb;\
    \ min-height: 100vh; padding: 16px;\">\n  \n  <div style=\"border-bottom: 1px\
    \ solid #333; padding-bottom: 12px; margin-bottom: 20px;\">\n    <h1 style=\"\
    margin: 0; font-size: 18px; font-weight: 500; color: #fff;\">REVIEW COMPLETE</h1>\n\
    \    <p style=\"margin: 4px 0 0 0; font-size: 11px; color: #64748b;\">Summary\
    \ of your decisions</p>\n  </div>\n\n  <div id=\"chart-container\" style=\"background:\
    \ #0a0a0a; border: 1px solid #333; padding: 16px; margin-bottom: 20px;\">\n  \
    \  <div id=\"distribution-chart\" style=\"height: 280px;\"></div>\n  </div>\n\n\
    \  <div style=\"display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom:\
    \ 20px;\">\n    <div style=\"background: #0a0a0a; border: 1px solid #22c55e; padding:\
    \ 16px; text-align: center;\">\n      <div style=\"font-size: 32px; font-weight:\
    \ 600; color: #22c55e;\" id=\"approved-count\">-</div>\n      <div style=\"font-size:\
    \ 11px; color: #64748b; text-transform: uppercase; margin-top: 4px;\">Approved</div>\n\
    \    </div>\n    <div style=\"background: #0a0a0a; border: 1px solid #ef4444;\
    \ padding: 16px; text-align: center;\">\n      <div style=\"font-size: 32px; font-weight:\
    \ 600; color: #ef4444;\" id=\"rejected-count\">-</div>\n      <div style=\"font-size:\
    \ 11px; color: #64748b; text-transform: uppercase; margin-top: 4px;\">Rejected</div>\n\
    \    </div>\n  </div>\n\n  <div style=\"background: #0a0a0a; border: 1px solid\
    \ #333; margin-bottom: 20px;\">\n    <div style=\"font-size: 10px; color: #64748b;\
    \ text-transform: uppercase; padding: 12px 12px 8px 12px; border-bottom: 1px solid\
    \ #222;\">Decision Log</div>\n    <table style=\"width: 100%; border-collapse:\
    \ collapse; font-size: 12px;\">\n      <thead>\n        <tr style=\"border-bottom:\
    \ 1px solid #333;\">\n          <th style=\"text-align: left; padding: 8px 12px;\
    \ color: #64748b; font-weight: 500;\">ID</th>\n          <th style=\"text-align:\
    \ left; padding: 8px 12px; color: #64748b; font-weight: 500;\">Decision</th>\n\
    \        </tr>\n      </thead>\n      <tbody id=\"decision-log\"></tbody>\n  \
    \  </table>\n  </div>\n\n  <script>\n    const decisions = {{ decisions_json }};\n\
    \    const approved = decisions.filter(d => d.decision === 'approve').length;\n\
    \    const rejected = decisions.filter(d => d.decision === 'reject').length;\n\
    \    \n    document.getElementById('approved-count').textContent = approved;\n\
    \    document.getElementById('rejected-count').textContent = rejected;\n    \n\
    \    // Build decision log\n    const logBody = document.getElementById('decision-log');\n\
    \    decisions.forEach((d, i) => {\n      const row = document.createElement('tr');\n\
    \      row.style.borderBottom = '1px solid #222';\n      if (i % 2 === 0) row.style.background\
    \ = '#050505';\n      row.innerHTML = `\n        <td style=\"padding: 6px 12px;\
    \ color: #00e5ff;\">${d.id}</td>\n        <td style=\"padding: 6px 12px;\">\n\
    \          ${d.decision === 'approve' \n            ? '<span style=\"color: #22c55e;\"\
    >✓ Approved</span>' \n            : '<span style=\"color: #ef4444;\">✗ Rejected</span>'}\n\
    \        </td>\n      `;\n      logBody.appendChild(row);\n    });\n    \n   \
    \ // Plotly chart\n    Plotly.newPlot('distribution-chart', [{\n      values:\
    \ [approved, rejected],\n      labels: ['Approved', 'Rejected'],\n      type:\
    \ 'pie',\n      hole: 0.5,\n      marker: {\n        colors: ['#22c55e', '#ef4444'],\n\
    \        line: { color: '#000', width: 2 }\n      },\n      textinfo: 'label+percent',\n\
    \      textfont: { color: '#fff', size: 12, family: 'SF Mono, Consolas, monospace'\
    \ }\n    }], {\n      paper_bgcolor: 'transparent',\n      plot_bgcolor: 'transparent',\n\
    \      font: { color: '#e5e7eb', family: 'SF Mono, Consolas, monospace' },\n \
    \     margin: { t: 20, b: 20, l: 20, r: 20 },\n      showlegend: false,\n    \
    \  annotations: [{\n        text: `<b>${decisions.length}</b><br>Total`,\n   \
    \     showarrow: false,\n        font: { size: 16, color: '#fff', family: 'SF\
    \ Mono, Consolas, monospace' }\n      }]\n    }, { responsive: true, displayModeBar:\
    \ false });\n  </script>\n\n  <form hx-post=\"/api/checkpoints/{{ checkpoint_id\
    \ }}/respond\" hx-ext=\"json-enc\" hx-swap=\"outerHTML\" style=\"padding-top:\
    \ 16px; border-top: 1px solid #333;\">\n    <button type=\"submit\" name=\"response[action]\"\
    \ value=\"done\" style=\"background: #a78bfa; color: #000; border: none; padding:\
    \ 10px 24px; font-size: 13px; font-weight: 600; cursor: pointer; font-family:\
    \ inherit;\">\n      FINISH\n    </button>\n  </form>\n</div>"
  handoffs: []
_calliope_metadata:
  created_at: '2025-12-29T23:44:19.970471'
  version: 1
