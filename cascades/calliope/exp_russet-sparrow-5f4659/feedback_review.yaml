cascade_id: feedback_review
description: Professional feedback review application with grid overview, one-by-one
  review, and summary dashboard
inputs_schema: {}
model: claude-sonnet-4-20250514
cells:
- name: generate_data
  tool: python_data
  inputs:
    code: "import random\nfrom datetime import datetime, timedelta\n\n# Generate realistic\
      \ feedback data\ndepartments = ['Engineering', 'Sales', 'Marketing', 'Support',\
      \ 'HR', 'Finance']\ncategories = ['Process Improvement', 'Tool Request', 'Policy\
      \ Change', 'Training Need', 'Resource Request']\npriorities = ['Critical', 'High',\
      \ 'Medium', 'Low']\n\nfeedback_items = []\nfor i in range(12):\n    days_ago\
      \ = random.randint(1, 30)\n    feedback_items.append({\n        'id': f'FB-{1001\
      \ + i}',\n        'submitted': (datetime.now() - timedelta(days=days_ago)).strftime('%Y-%m-%d'),\n\
      \        'department': random.choice(departments),\n        'category': random.choice(categories),\n\
      \        'priority': random.choice(priorities),\n        'title': [\n      \
      \      'Streamline approval workflow',\n            'Add dark mode to dashboard',\n\
      \            'Update remote work policy',\n            'Request additional monitors',\n\
      \            'Implement code review tools',\n            'Expand training budget',\n\
      \            'Improve onboarding process',\n            'Upgrade security protocols',\n\
      \            'Add team collaboration space',\n            'Review compensation\
      \ bands',\n            'Automate expense reports',\n            'Enhance customer\
      \ portal'\n        ][i],\n        'submitter': ['J. Smith', 'A. Johnson', 'M.\
      \ Williams', 'S. Brown', 'K. Davis', 'R. Miller', 'L. Wilson', 'T. Moore', 'C.\
      \ Taylor', 'P. Anderson', 'D. Thomas', 'E. Jackson'][i],\n        'status':\
      \ 'pending'\n    })\n\nresult = feedback_items"
  handoffs:
  - overview_grid
- name: overview_grid
  context:
    from:
    - generate_data
  hitl: "<div style=\"background: #000; min-height: 100vh; padding: 12px; font-family:\
    \ 'SF Mono', 'Consolas', monospace;\">\n  <div style=\"display: flex; justify-content:\
    \ space-between; align-items: center; margin-bottom: 12px; padding-bottom: 8px;\
    \ border-bottom: 1px solid rgba(0,229,255,0.2);\">\n    <div>\n      <h1 style=\"\
    margin: 0; font-size: 14px; font-weight: 600; color: #fff; letter-spacing: 0.5px;\"\
    >FEEDBACK REVIEW QUEUE</h1>\n      <p style=\"margin: 4px 0 0 0; font-size: 11px;\
    \ color: #6b7280;\">{{ outputs.generate_data.result | length }} items pending\
    \ review</p>\n    </div>\n    <div style=\"display: flex; gap: 16px; font-size:\
    \ 10px; text-transform: uppercase; letter-spacing: 1px;\">\n      <span style=\"\
    color: #ef4444;\">● Critical: {{ outputs.generate_data.result | selectattr('priority',\
    \ 'equalto', 'Critical') | list | length }}</span>\n      <span style=\"color:\
    \ #f59e0b;\">● High: {{ outputs.generate_data.result | selectattr('priority',\
    \ 'equalto', 'High') | list | length }}</span>\n      <span style=\"color: #00e5ff;\"\
    >● Medium: {{ outputs.generate_data.result | selectattr('priority', 'equalto',\
    \ 'Medium') | list | length }}</span>\n      <span style=\"color: #6b7280;\">●\
    \ Low: {{ outputs.generate_data.result | selectattr('priority', 'equalto', 'Low')\
    \ | list | length }}</span>\n    </div>\n  </div>\n\n  <div style=\"overflow-x:\
    \ auto;\">\n    <table style=\"width: 100%; border-collapse: collapse; font-size:\
    \ 11px;\">\n      <thead>\n        <tr style=\"background: rgba(0,229,255,0.05);\
    \ border-bottom: 1px solid rgba(0,229,255,0.3);\">\n          <th style=\"padding:\
    \ 8px 10px; text-align: left; color: #00e5ff; font-weight: 500; text-transform:\
    \ uppercase; letter-spacing: 0.5px; font-size: 10px;\">ID</th>\n          <th\
    \ style=\"padding: 8px 10px; text-align: left; color: #00e5ff; font-weight: 500;\
    \ text-transform: uppercase; letter-spacing: 0.5px; font-size: 10px;\">Date</th>\n\
    \          <th style=\"padding: 8px 10px; text-align: left; color: #00e5ff; font-weight:\
    \ 500; text-transform: uppercase; letter-spacing: 0.5px; font-size: 10px;\">Priority</th>\n\
    \          <th style=\"padding: 8px 10px; text-align: left; color: #00e5ff; font-weight:\
    \ 500; text-transform: uppercase; letter-spacing: 0.5px; font-size: 10px;\">Department</th>\n\
    \          <th style=\"padding: 8px 10px; text-align: left; color: #00e5ff; font-weight:\
    \ 500; text-transform: uppercase; letter-spacing: 0.5px; font-size: 10px;\">Category</th>\n\
    \          <th style=\"padding: 8px 10px; text-align: left; color: #00e5ff; font-weight:\
    \ 500; text-transform: uppercase; letter-spacing: 0.5px; font-size: 10px;\">Title</th>\n\
    \          <th style=\"padding: 8px 10px; text-align: left; color: #00e5ff; font-weight:\
    \ 500; text-transform: uppercase; letter-spacing: 0.5px; font-size: 10px;\">Submitter</th>\n\
    \        </tr>\n      </thead>\n      <tbody>\n        {% for item in outputs.generate_data.result\
    \ %}\n        <tr style=\"border-bottom: 1px solid rgba(255,255,255,0.05); {%\
    \ if loop.index is odd %}background: rgba(255,255,255,0.02);{% endif %}\">\n \
    \         <td style=\"padding: 6px 10px; color: #9ca3af; font-family: monospace;\"\
    >{{ item.id }}</td>\n          <td style=\"padding: 6px 10px; color: #6b7280;\"\
    >{{ item.submitted }}</td>\n          <td style=\"padding: 6px 10px;\">\n    \
    \        <span style=\"padding: 2px 6px; border-radius: 2px; font-size: 10px;\
    \ font-weight: 500;\n              {% if item.priority == 'Critical' %}background:\
    \ rgba(239,68,68,0.2); color: #ef4444; border: 1px solid rgba(239,68,68,0.3);\n\
    \              {% elif item.priority == 'High' %}background: rgba(245,158,11,0.2);\
    \ color: #f59e0b; border: 1px solid rgba(245,158,11,0.3);\n              {% elif\
    \ item.priority == 'Medium' %}background: rgba(0,229,255,0.15); color: #00e5ff;\
    \ border: 1px solid rgba(0,229,255,0.3);\n              {% else %}background:\
    \ rgba(107,114,128,0.2); color: #6b7280; border: 1px solid rgba(107,114,128,0.3);{%\
    \ endif %}\">{{ item.priority }}</span>\n          </td>\n          <td style=\"\
    padding: 6px 10px; color: #d1d5db;\">{{ item.department }}</td>\n          <td\
    \ style=\"padding: 6px 10px; color: #9ca3af; font-size: 10px;\">{{ item.category\
    \ }}</td>\n          <td style=\"padding: 6px 10px; color: #fff; max-width: 200px;\
    \ overflow: hidden; text-overflow: ellipsis; white-space: nowrap;\">{{ item.title\
    \ }}</td>\n          <td style=\"padding: 6px 10px; color: #6b7280;\">{{ item.submitter\
    \ }}</td>\n        </tr>\n        {% endfor %}\n      </tbody>\n    </table>\n\
    \  </div>\n\n  <div style=\"margin-top: 16px; padding-top: 12px; border-top: 1px\
    \ solid rgba(255,255,255,0.1); display: flex; justify-content: flex-end;\">\n\
    \    {{ submit_button(\"Begin Review →\", action=\"start_review\", variant=\"\
    default\") }}\n  </div>\n</div>"
  handoffs:
  - init_review
- name: init_review
  tool: python_data
  inputs:
    code: "# Initialize review state\nresult = {\n    'current_index': 0,\n    'approved':\
      \ [],\n    'rejected': [],\n    'total': len(state.get('generate_data', {}).get('result',\
      \ []) if isinstance(state.get('generate_data'), dict) else 12)\n}"
  handoffs:
  - review_item
- name: review_item
  context:
    from:
    - generate_data
  hitl: "<div style=\"background: #000; min-height: 100vh; padding: 12px; font-family:\
    \ 'SF Mono', 'Consolas', monospace;\">\n  {% set idx = state.review_index|default(0)|int\
    \ %}\n  {% set items = outputs.generate_data.result %}\n  {% set item = items[idx]\
    \ %}\n  {% set approved_count = state.approved|default([])|length %}\n  {% set\
    \ rejected_count = state.rejected|default([])|length %}\n  \n  <!-- Header with\
    \ progress -->\n  <div style=\"display: flex; justify-content: space-between;\
    \ align-items: center; margin-bottom: 16px; padding-bottom: 8px; border-bottom:\
    \ 1px solid rgba(0,229,255,0.2);\">\n    <div>\n      <h1 style=\"margin: 0; font-size:\
    \ 14px; font-weight: 600; color: #fff; letter-spacing: 0.5px;\">REVIEW FEEDBACK</h1>\n\
    \      <p style=\"margin: 4px 0 0 0; font-size: 11px; color: #6b7280;\">Item {{\
    \ idx + 1 }} of {{ items|length }}</p>\n    </div>\n    <div style=\"display:\
    \ flex; gap: 12px; font-size: 10px;\">\n      <span style=\"color: #22d399;\"\
    >✓ {{ approved_count }} approved</span>\n      <span style=\"color: #ef4444;\"\
    >✗ {{ rejected_count }} rejected</span>\n      <span style=\"color: #6b7280;\"\
    >○ {{ items|length - approved_count - rejected_count - 1 }} remaining</span>\n\
    \    </div>\n  </div>\n\n  <!-- Progress bar -->\n  <div style=\"height: 3px;\
    \ background: rgba(255,255,255,0.1); margin-bottom: 20px; border-radius: 2px;\"\
    >\n    <div style=\"height: 100%; width: {{ ((idx + 1) / items|length * 100)|int\
    \ }}%; background: linear-gradient(90deg, #00e5ff, #a78bfa); border-radius: 2px;\
    \ transition: width 0.3s;\"></div>\n  </div>\n\n  <!-- Item card -->\n  <div style=\"\
    background: rgba(255,255,255,0.02); border: 1px solid rgba(0,229,255,0.2); border-radius:\
    \ 4px; padding: 16px;\">\n    <div style=\"display: flex; justify-content: space-between;\
    \ align-items: flex-start; margin-bottom: 12px;\">\n      <div>\n        <span\
    \ style=\"font-size: 10px; color: #6b7280; font-family: monospace;\">{{ item.id\
    \ }}</span>\n        <h2 style=\"margin: 4px 0 0 0; font-size: 16px; color: #fff;\
    \ font-weight: 500;\">{{ item.title }}</h2>\n      </div>\n      <span style=\"\
    padding: 3px 8px; border-radius: 2px; font-size: 10px; font-weight: 500;\n   \
    \     {% if item.priority == 'Critical' %}background: rgba(239,68,68,0.2); color:\
    \ #ef4444; border: 1px solid rgba(239,68,68,0.3);\n        {% elif item.priority\
    \ == 'High' %}background: rgba(245,158,11,0.2); color: #f59e0b; border: 1px solid\
    \ rgba(245,158,11,0.3);\n        {% elif item.priority == 'Medium' %}background:\
    \ rgba(0,229,255,0.15); color: #00e5ff; border: 1px solid rgba(0,229,255,0.3);\n\
    \        {% else %}background: rgba(107,114,128,0.2); color: #6b7280; border:\
    \ 1px solid rgba(107,114,128,0.3);{% endif %}\">{{ item.priority }}</span>\n \
    \   </div>\n\n    <div style=\"display: grid; grid-template-columns: repeat(4,\
    \ 1fr); gap: 16px; padding: 12px 0; border-top: 1px solid rgba(255,255,255,0.05);\
    \ border-bottom: 1px solid rgba(255,255,255,0.05);\">\n      <div>\n        <p\
    \ style=\"margin: 0; font-size: 9px; color: #6b7280; text-transform: uppercase;\
    \ letter-spacing: 0.5px;\">Department</p>\n        <p style=\"margin: 4px 0 0\
    \ 0; font-size: 12px; color: #d1d5db;\">{{ item.department }}</p>\n      </div>\n\
    \      <div>\n        <p style=\"margin: 0; font-size: 9px; color: #6b7280; text-transform:\
    \ uppercase; letter-spacing: 0.5px;\">Category</p>\n        <p style=\"margin:\
    \ 4px 0 0 0; font-size: 12px; color: #d1d5db;\">{{ item.category }}</p>\n    \
    \  </div>\n      <div>\n        <p style=\"margin: 0; font-size: 9px; color: #6b7280;\
    \ text-transform: uppercase; letter-spacing: 0.5px;\">Submitted</p>\n        <p\
    \ style=\"margin: 4px 0 0 0; font-size: 12px; color: #d1d5db;\">{{ item.submitted\
    \ }}</p>\n      </div>\n      <div>\n        <p style=\"margin: 0; font-size:\
    \ 9px; color: #6b7280; text-transform: uppercase; letter-spacing: 0.5px;\">Submitter</p>\n\
    \        <p style=\"margin: 4px 0 0 0; font-size: 12px; color: #d1d5db;\">{{ item.submitter\
    \ }}</p>\n      </div>\n    </div>\n\n    <!-- Notes field -->\n    <div style=\"\
    margin-top: 12px;\">\n      <label style=\"font-size: 9px; color: #6b7280; text-transform:\
    \ uppercase; letter-spacing: 0.5px;\">Review Notes (optional)</label>\n      <textarea\
    \ name=\"notes\" rows=\"2\" style=\"width: 100%; margin-top: 4px; padding: 8px;\
    \ background: rgba(0,0,0,0.4); border: 1px solid rgba(255,255,255,0.1); border-radius:\
    \ 3px; color: #fff; font-size: 11px; font-family: inherit; resize: none;\" placeholder=\"\
    Add any notes about your decision...\"></textarea>\n    </div>\n  </div>\n\n \
    \ <!-- Hidden fields to pass item data -->\n  <input type=\"hidden\" name=\"item_id\"\
    \ value=\"{{ item.id }}\">\n  <input type=\"hidden\" name=\"item_title\" value=\"\
    {{ item.title }}\">\n  <input type=\"hidden\" name=\"current_index\" value=\"\
    {{ idx }}\">\n  <input type=\"hidden\" name=\"total_items\" value=\"{{ items|length\
    \ }}\">\n\n  <!-- Action buttons -->\n  <div style=\"display: flex; gap: 12px;\
    \ margin-top: 16px;\">\n    {{ submit_button(\"✗ Reject\", action=\"reject\",\
    \ variant=\"destructive\") }}\n    {{ submit_button(\"✓ Approve\", action=\"approve\"\
    , variant=\"default\") }}\n  </div>\n</div>"
  handoffs:
  - handle_approve
  - handle_reject
- name: handle_approve
  tool: append_state
  inputs:
    key: approved
    value: '{{ {''id'': state.review_item.item_id, ''title'': state.review_item.item_title,
      ''notes'': state.review_item.notes} }}'
  handoffs:
  - increment_index
- name: handle_reject
  tool: append_state
  inputs:
    key: rejected
    value: '{{ {''id'': state.review_item.item_id, ''title'': state.review_item.item_title,
      ''notes'': state.review_item.notes} }}'
  handoffs:
  - increment_index
- name: increment_index
  tool: python_data
  inputs:
    code: '# Increment the review index

      current_idx = state.get(''review_index'', 0)

      result = {''new_index'': current_idx + 1}'
  handoffs:
  - check_complete
- name: check_complete
  tool: set_state
  inputs:
    key: review_index
    value: '{{ state.increment_index.result.new_index if state.increment_index else
      (state.review_index|default(0)|int + 1) }}'
  handoffs:
  - route_decision
- name: route_decision
  context:
    from:
    - generate_data
  hitl: "{% set idx = state.review_index|default(0)|int %}\n{% set total = outputs.generate_data.result|length\
    \ %}\n{% if idx >= total %}\n<div style=\"display: none;\">\n  {{ submit_button(\"\
    Continue\", action=\"complete\", variant=\"default\") }}\n</div>\n<script>document.querySelector('form').requestSubmit();</script>\n\
    {% else %}\n<div style=\"display: none;\">\n  {{ submit_button(\"Continue\", action=\"\
    continue\", variant=\"default\") }}\n</div>\n<script>document.querySelector('form').requestSubmit();</script>\n\
    {% endif %}"
  handoffs:
  - review_item
  - summary
- name: summary
  context:
    from:
    - generate_data
  hitl: "<div style=\"background: #000; min-height: 100vh; padding: 12px; font-family:\
    \ 'SF Mono', 'Consolas', monospace;\">\n  {% set approved = state.approved|default([])\
    \ %}\n  {% set rejected = state.rejected|default([]) %}\n  {% set total = outputs.generate_data.result|length\
    \ %}\n  {% set approval_rate = (approved|length / total * 100)|round(1) if total\
    \ > 0 else 0 %}\n  \n  <!-- Header -->\n  <div style=\"display: flex; justify-content:\
    \ space-between; align-items: center; margin-bottom: 16px; padding-bottom: 8px;\
    \ border-bottom: 1px solid rgba(34,211,153,0.3);\">\n    <div>\n      <h1 style=\"\
    margin: 0; font-size: 14px; font-weight: 600; color: #22d399; letter-spacing:\
    \ 0.5px;\">✓ REVIEW COMPLETE</h1>\n      <p style=\"margin: 4px 0 0 0; font-size:\
    \ 11px; color: #6b7280;\">All {{ total }} items have been reviewed</p>\n    </div>\n\
    \    <div style=\"text-align: right;\">\n      <p style=\"margin: 0; font-size:\
    \ 24px; font-weight: 600; color: #fff;\">{{ approval_rate }}%</p>\n      <p style=\"\
    margin: 0; font-size: 10px; color: #6b7280; text-transform: uppercase;\">Approval\
    \ Rate</p>\n    </div>\n  </div>\n\n  <!-- Stats cards -->\n  <div style=\"display:\
    \ grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-bottom: 20px;\"\
    >\n    <div style=\"background: rgba(34,211,153,0.1); border: 1px solid rgba(34,211,153,0.3);\
    \ border-radius: 4px; padding: 12px;\">\n      <p style=\"margin: 0; font-size:\
    \ 28px; font-weight: 600; color: #22d399;\">{{ approved|length }}</p>\n      <p\
    \ style=\"margin: 4px 0 0 0; font-size: 10px; color: #6b7280; text-transform:\
    \ uppercase; letter-spacing: 0.5px;\">Approved</p>\n    </div>\n    <div style=\"\
    background: rgba(239,68,68,0.1); border: 1px solid rgba(239,68,68,0.3); border-radius:\
    \ 4px; padding: 12px;\">\n      <p style=\"margin: 0; font-size: 28px; font-weight:\
    \ 600; color: #ef4444;\">{{ rejected|length }}</p>\n      <p style=\"margin: 4px\
    \ 0 0 0; font-size: 10px; color: #6b7280; text-transform: uppercase; letter-spacing:\
    \ 0.5px;\">Rejected</p>\n    </div>\n    <div style=\"background: rgba(0,229,255,0.1);\
    \ border: 1px solid rgba(0,229,255,0.3); border-radius: 4px; padding: 12px;\"\
    >\n      <p style=\"margin: 0; font-size: 28px; font-weight: 600; color: #00e5ff;\"\
    >{{ total }}</p>\n      <p style=\"margin: 4px 0 0 0; font-size: 10px; color:\
    \ #6b7280; text-transform: uppercase; letter-spacing: 0.5px;\">Total Reviewed</p>\n\
    \    </div>\n  </div>\n\n  <!-- Chart -->\n  <div style=\"background: rgba(255,255,255,0.02);\
    \ border: 1px solid rgba(255,255,255,0.1); border-radius: 4px; padding: 16px;\
    \ margin-bottom: 20px;\">\n    <h3 style=\"margin: 0 0 12px 0; font-size: 11px;\
    \ color: #6b7280; text-transform: uppercase; letter-spacing: 0.5px;\">Distribution</h3>\n\
    \    <div id=\"summary-chart\" style=\"height: 200px;\"></div>\n  </div>\n\n \
    \ <!-- Results tables side by side -->\n  <div style=\"display: grid; grid-template-columns:\
    \ 1fr 1fr; gap: 12px;\">\n    <!-- Approved -->\n    <div style=\"background:\
    \ rgba(34,211,153,0.05); border: 1px solid rgba(34,211,153,0.2); border-radius:\
    \ 4px; padding: 12px;\">\n      <h3 style=\"margin: 0 0 8px 0; font-size: 11px;\
    \ color: #22d399; text-transform: uppercase; letter-spacing: 0.5px;\">✓ Approved\
    \ ({{ approved|length }})</h3>\n      <div style=\"max-height: 150px; overflow-y:\
    \ auto;\">\n        {% for item in approved %}\n        <div style=\"padding:\
    \ 6px 0; border-bottom: 1px solid rgba(255,255,255,0.05); font-size: 11px;\">\n\
    \          <span style=\"color: #6b7280; font-family: monospace;\">{{ item.id\
    \ }}</span>\n          <span style=\"color: #d1d5db; margin-left: 8px;\">{{ item.title\
    \ }}</span>\n        </div>\n        {% endfor %}\n        {% if approved|length\
    \ == 0 %}\n        <p style=\"color: #6b7280; font-size: 11px; margin: 8px 0;\"\
    >No items approved</p>\n        {% endif %}\n      </div>\n    </div>\n    <!--\
    \ Rejected -->\n    <div style=\"background: rgba(239,68,68,0.05); border: 1px\
    \ solid rgba(239,68,68,0.2); border-radius: 4px; padding: 12px;\">\n      <h3\
    \ style=\"margin: 0 0 8px 0; font-size: 11px; color: #ef4444; text-transform:\
    \ uppercase; letter-spacing: 0.5px;\">✗ Rejected ({{ rejected|length }})</h3>\n\
    \      <div style=\"max-height: 150px; overflow-y: auto;\">\n        {% for item\
    \ in rejected %}\n        <div style=\"padding: 6px 0; border-bottom: 1px solid\
    \ rgba(255,255,255,0.05); font-size: 11px;\">\n          <span style=\"color:\
    \ #6b7280; font-family: monospace;\">{{ item.id }}</span>\n          <span style=\"\
    color: #d1d5db; margin-left: 8px;\">{{ item.title }}</span>\n        </div>\n\
    \        {% endfor %}\n        {% if rejected|length == 0 %}\n        <p style=\"\
    color: #6b7280; font-size: 11px; margin: 8px 0;\">No items rejected</p>\n    \
    \    {% endif %}\n      </div>\n    </div>\n  </div>\n\n  <script>\n    Plotly.newPlot('summary-chart',\
    \ [{\n      values: [{{ approved|length }}, {{ rejected|length }}],\n      labels:\
    \ ['Approved', 'Rejected'],\n      type: 'pie',\n      hole: 0.6,\n      marker:\
    \ {\n        colors: ['#22d399', '#ef4444'],\n        line: { color: '#000', width:\
    \ 2 }\n      },\n      textinfo: 'label+percent',\n      textfont: { color: '#fff',\
    \ size: 11, family: 'SF Mono, Consolas, monospace' }\n    }], {\n      paper_bgcolor:\
    \ 'transparent',\n      plot_bgcolor: 'transparent',\n      font: { color: '#9ca3af',\
    \ family: 'SF Mono, Consolas, monospace', size: 10 },\n      margin: { t: 10,\
    \ r: 10, b: 10, l: 10 },\n      showlegend: false,\n      annotations: [{\n  \
    \      text: '{{ approval_rate }}%',\n        font: { size: 20, color: '#fff',\
    \ family: 'SF Mono, Consolas, monospace' },\n        showarrow: false\n      }]\n\
    \    }, { responsive: true, displayModeBar: false });\n  </script>\n\n  <div style=\"\
    margin-top: 16px; padding-top: 12px; border-top: 1px solid rgba(255,255,255,0.1);\"\
    >\n    {{ submit_button(\"Start New Review\", action=\"restart\", variant=\"default\"\
    ) }}\n  </div>\n</div>"
  handoffs: []
_calliope_metadata:
  created_at: '2025-12-31T02:25:53.785679'
  version: 1
