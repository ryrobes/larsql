{
  "cascade_id": "signal_roundtrip_demo",
  "description": "Self-contained signal demo - spawns an async producer cascade that fires a signal, while this cascade waits for it. Run this single cascade to test the full signal roundtrip flow.",
  "cells": [
    {
      "name": "start_producer",
      "instructions": "Say 'Starting signal roundtrip demo. An async producer will fire a signal that we will wait for.'",
      "async_cascades": [
        {
          "ref": "signal_producer_delayed.json",
          "trigger": "on_start"
        }
      ],
      "handoffs": [
        "wait_for_signal"
      ]
    },
    {
      "name": "wait_for_signal",
      "instructions": "Use the await_signal tool to wait for a signal named 'roundtrip_demo' with a timeout of '30s'. Set description to 'Waiting for async producer signal'.",
      "traits": [
        "await_signal"
      ],
      "handoffs": [
        "report_result"
      ]
    },
    {
      "name": "report_result",
      "instructions": "Report the result from the signal wait:\n\n{{ state.output_wait_for_signal }}\n\nIf the signal was received (status: fired), describe the payload that was received from the producer.\nIf it timed out, note that something may have gone wrong with the async producer."
    }
  ]
}