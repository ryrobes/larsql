{
  "cascade_id": "context_management_combo",
  "description": "Demonstrates selective context management across phases",
  "inputs_schema": {
    "topic": "What to search for"
  },
  "cells": [
    {
      "name": "research_with_ttl",
      "instructions": "Research {{ input.topic }} using sql_search.\n\nYou have 3 turns:\n- Turn 1: Search for tables\n- Turn 2: Analyze results (RAG explodes after this)\n- Turn 3: Make final decision with clean context\n\nState your final table choice clearly.",
      "traits": [
        "sql_search"
      ],
      "rules": {
        "max_turns": 3
      },
      "handoffs": [
        "build_query"
      ]
    },
    {
      "name": "build_query",
      "instructions": "Based on what the previous phase found (you should only see the final decision, not the RAG dump), write a SQL query.\n\nWhat exactly do you see from the previous phase? Be specific about the context you have access to.",
      "traits": [
        "sql_query"
      ],
      "context": {
        "from": [
          "previous"
        ]
      },
      "handoffs": [
        "analyze"
      ]
    },
    {
      "name": "analyze",
      "instructions": "Analyze the query results and provide insights. Confirm you have access to:\n1. Phase 1's final decision (NOT the RAG dump)\n2. Phase 2's query and results\n\nDescribe your full context visibility.",
      "traits": [],
      "context": {
        "from": [
          "all"
        ]
      }
    }
  ]
}