<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Context Management - RVBBIT Documentation</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/docs.css">
</head>
<body>
  <div class="page">
    <header>
      <div class="container">
        <nav class="nav">
          <a href="index.html" class="brand"><span>RVBBIT</span></a>
          <div class="nav-links">
            <a href="index.html">Docs</a>
            <a href="https://github.com/rvbbit/rvbbit">GitHub</a>
          </div>
        </nav>
      </div>
    </header>

    <div class="container">
      <div class="docs-layout">
        <aside class="sidebar">
          <nav>
            <div class="sidebar-section">
              <h4 class="sidebar-title">Getting Started</h4>
              <ul class="sidebar-links">
                <li><a href="index.html">Overview</a></li>
                <li><a href="core-concepts.html">Core Concepts</a></li>
              </ul>
            </div>
            <div class="sidebar-section">
              <h4 class="sidebar-title">Cascade DSL</h4>
              <ul class="sidebar-links">
                <li><a href="cascade-dsl.html">DSL Reference</a></li>
                <li><a href="cell-types.html">Cell Types</a></li>
                <li><a href="validation.html">Validation (Wards)</a></li>
                <li><a href="context.html" class="active">Context Management</a></li>
              </ul>
            </div>
            <div class="sidebar-section">
              <h4 class="sidebar-title">Features</h4>
              <ul class="sidebar-links">
                <li><a href="semantic-sql.html">Semantic SQL</a></li>
                <li><a href="embedding.html">Vector Search & Embedding</a></li>
                <li><a href="candidates.html">Candidates & Evaluation</a></li>
                <li><a href="tools.html">Tools (Traits)</a></li>
                <li><a href="mcp.html">MCP Integration</a></li>
              </ul>
            </div>
          </nav>
        </aside>

        <main class="docs-content">
          <h1>Context Management</h1>
          <p class="lead">
            RVBBIT implements a sophisticated two-level context system to balance
            information availability with token efficiency. Save 40-70% on context
            costs while maintaining quality.
          </p>

          <div class="toc">
            <div class="toc-title">On This Page</div>
            <ul>
              <li><a href="#overview">Two-Level System</a></li>
              <li><a href="#explicit">Explicit Context (Inter-Cell)</a></li>
              <li><a href="#auto">Auto Context (Inter-Cell)</a></li>
              <li><a href="#intra">Intra-Cell Context</a></li>
              <li><a href="#strategies">Selection Strategies</a></li>
              <li><a href="#variables">Jinja2 Variables</a></li>
              <li><a href="#examples">Real-World Examples</a></li>
            </ul>
          </div>

          <h2 id="overview">The Two-Level Context System</h2>
          <p>
            RVBBIT manages context at two levels to prevent token explosion in
            long-running cascades:
          </p>

          <table>
            <thead>
              <tr>
                <th>Level</th>
                <th>Scope</th>
                <th>Controls</th>
                <th>Savings</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Intra-Cell</strong></td>
                <td>Within a single cell's turn loop</td>
                <td>Sliding window, observation masking</td>
                <td>40-60%</td>
              </tr>
              <tr>
                <td><strong>Inter-Cell</strong></td>
                <td>Between different cells</td>
                <td>Explicit selection or auto-selection</td>
                <td>50-70%</td>
              </tr>
            </tbody>
          </table>

          <div class="info-box">
            <div class="info-box-title">Philosophy: Selective by Default</div>
            <p>
              Unlike traditional agentic frameworks where context automatically snowballs,
              RVBBIT cells start with a <strong>clean slate</strong>. You explicitly declare
              what context each cell needs via <code>context.from</code> or enable auto-selection
              with <code>context.mode: auto</code>.
            </p>
          </div>

          <h2 id="explicit">Explicit Context (Inter-Cell)</h2>
          <p>
            The default mode where you manually specify which prior cells to include.
          </p>

          <h3>Basic Explicit Context</h3>
          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">Explicit Context Example</span></div>
            <div class="code-block-content">
              <pre>- <span class="key">name</span>: analyze
  <span class="key">instructions</span>: <span class="str">"Analyze the research findings"</span>
  <span class="key">context</span>:
    <span class="key">from</span>: [research, data_load]  <span class="cmt"># Include these specific cells</span>
    <span class="key">include_input</span>: <span class="kw">true</span>           <span class="cmt"># Include original cascade input</span></pre>
            </div>
          </div>

          <h3>Context Keywords</h3>
          <p>Special keywords for common patterns:</p>

          <table>
            <thead>
              <tr><th>Keyword</th><th>Meaning</th></tr>
            </thead>
            <tbody>
              <tr><td><code>"all"</code></td><td>All prior cells (explicit snowball)</td></tr>
              <tr><td><code>"first"</code></td><td>First executed cell</td></tr>
              <tr><td><code>"previous"</code> / <code>"prev"</code></td><td>Most recently completed cell</td></tr>
            </tbody>
          </table>

          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">Keyword Examples</span></div>
            <div class="code-block-content">
              <pre><span class="cmt"># Snowball all context</span>
<span class="key">context</span>:
  <span class="key">from</span>: [<span class="str">"all"</span>]

<span class="cmt"># Only first and previous</span>
<span class="key">context</span>:
  <span class="key">from</span>: [<span class="str">"first"</span>, <span class="str">"previous"</span>]

<span class="cmt"># All except verbose cells</span>
<span class="key">context</span>:
  <span class="key">from</span>: [<span class="str">"all"</span>]
  <span class="key">exclude</span>: [verbose_debug, intermediate_step]</pre>
            </div>
          </div>

          <h3>Advanced: Context Source Config</h3>
          <p>Fine-grained control over what to include from each cell:</p>

          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">ContextSourceConfig</span></div>
            <div class="code-block-content">
              <pre><span class="key">context</span>:
  <span class="key">from</span>:
    - <span class="key">cell</span>: generate_chart
      <span class="key">include</span>: [images, output]  <span class="cmt"># Only images and output, not full history</span>
      <span class="key">images_filter</span>: last         <span class="cmt"># Only the last image</span>
      <span class="key">as_role</span>: user                <span class="cmt"># Inject as user message</span>

    - <span class="key">cell</span>: research
      <span class="key">include</span>: [messages, state]
      <span class="key">messages_filter</span>: callouts   <span class="cmt"># Only tagged messages</span></pre>
            </div>
          </div>

          <h2 id="auto">Auto Context (Inter-Cell)</h2>
          <p>
            Intelligent context selection using heuristics, embeddings, or LLM evaluation.
            Let RVBBIT choose what's relevant instead of manual specification.
          </p>

          <h3>Enable Auto Context</h3>
          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">Auto Context Mode</span></div>
            <div class="code-block-content">
              <pre>- <span class="key">name</span>: final_report
  <span class="key">instructions</span>: <span class="str">"Create comprehensive report"</span>
  <span class="key">context</span>:
    <span class="key">mode</span>: auto  <span class="cmt"># Enable intelligent selection</span>
    <span class="key">selection</span>:
      <span class="key">strategy</span>: hybrid       <span class="cmt"># Best quality</span>
      <span class="key">max_tokens</span>: <span class="num">30000</span>     <span class="cmt"># Token budget</span>
    <span class="key">anchors</span>:
      <span class="key">window</span>: <span class="num">3</span>              <span class="cmt"># Always include last 3 turns</span>
      <span class="key">from_cells</span>: [previous] <span class="cmt"># Always include previous cell</span></pre>
            </div>
          </div>

          <h3>Auto Context Components</h3>

          <h4>1. Anchors (Always-Included Context)</h4>
          <p>
            Anchors are messages that are <strong>always</strong> included, regardless
            of selection strategy. Ensures critical context is never lost.
          </p>

          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">Anchor Configuration</span></div>
            <div class="code-block-content">
              <pre><span class="key">anchors</span>:
  <span class="key">window</span>: <span class="num">3</span>                        <span class="cmt"># Last N turns from current cell</span>
  <span class="key">from_cells</span>: [research, analysis] <span class="cmt"># Always include these cells</span>
  <span class="key">include</span>:                        <span class="cmt"># What to include:</span>
    - output                        <span class="cmt"># Cell outputs</span>
    - callouts                      <span class="cmt"># Tagged messages</span>
    - input                         <span class="cmt"># Original cascade input</span>
    - errors                        <span class="cmt"># Error messages</span></pre>
            </div>
          </div>

          <h4>2. Selection (Smart Context Picking)</h4>
          <p>
            After anchors are included, the selection strategy picks additional
            relevant messages within the token budget.
          </p>

          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">Selection Configuration</span></div>
            <div class="code-block-content">
              <pre><span class="key">selection</span>:
  <span class="key">strategy</span>: hybrid              <span class="cmt"># heuristic|semantic|llm|hybrid</span>
  <span class="key">max_tokens</span>: <span class="num">30000</span>            <span class="cmt"># Token budget</span>
  <span class="key">max_messages</span>: <span class="num">50</span>             <span class="cmt"># Max messages to select</span>

  <span class="cmt"># Heuristic weights (must sum to ~1.0)</span>
  <span class="key">recency_weight</span>: <span class="num">0.3</span>          <span class="cmt"># How much to prefer recent messages</span>
  <span class="key">keyword_weight</span>: <span class="num">0.4</span>          <span class="cmt"># Keyword overlap with current instructions</span>
  <span class="key">callout_weight</span>: <span class="num">0.3</span>          <span class="cmt"># Prefer tagged/important messages</span>

  <span class="key">similarity_threshold</span>: <span class="num">0.5</span>    <span class="cmt"># For semantic/hybrid strategies</span></pre>
            </div>
          </div>

          <h2 id="strategies">Selection Strategies</h2>

          <h3>1. Heuristic (Fast, No LLM)</h3>
          <p>
            Scores messages based on recency, keyword overlap, and callouts.
            No LLM or embeddings needed - pure algorithmic selection.
          </p>

          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">Heuristic Strategy</span></div>
            <div class="code-block-content">
              <pre><span class="key">strategy</span>: heuristic
<span class="key">recency_weight</span>: <span class="num">0.3</span>  <span class="cmt"># Recent messages score higher</span>
<span class="key">keyword_weight</span>: <span class="num">0.4</span>  <span class="cmt"># Messages matching instruction keywords</span>
<span class="key">callout_weight</span>: <span class="num">0.3</span>  <span class="cmt"># Tagged messages score higher</span></pre>
            </div>
          </div>

          <p><strong>Score Formula:</strong></p>
          <pre style="background: rgba(28, 246, 255, 0.1); padding: 12px; border-radius: 6px; font-family: 'JetBrains Mono', monospace; font-size: 0.85rem;">score = (recency_weight × recency_score) +
        (keyword_weight × keyword_score) +
        (callout_weight × callout_score)</pre>

          <h3>2. Semantic (Embedding Similarity)</h3>
          <p>
            Uses vector embeddings to find semantically similar messages.
            No LLM needed, just vector operations.
          </p>

          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">Semantic Strategy</span></div>
            <div class="code-block-content">
              <pre><span class="key">strategy</span>: semantic
<span class="key">similarity_threshold</span>: <span class="num">0.5</span>  <span class="cmt"># Min cosine similarity to include</span>
<span class="key">max_tokens</span>: <span class="num">30000</span></pre>
            </div>
          </div>

          <p>
            Embeds current cell instructions and prior messages, then selects
            messages with cosine similarity above threshold.
          </p>

          <h3>3. LLM (Model-Assisted Selection)</h3>
          <p>
            Uses a cheap model to evaluate relevance. Slower but highest quality.
          </p>

          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">LLM Strategy</span></div>
            <div class="code-block-content">
              <pre><span class="key">strategy</span>: llm
<span class="key">max_messages</span>: <span class="num">50</span>  <span class="cmt"># Prefilter to top 50 by heuristic</span>
<span class="key">max_tokens</span>: <span class="num">30000</span></pre>
            </div>
          </div>

          <p>
            The LLM receives message summaries and current instructions, then
            selects the most relevant messages.
          </p>

          <h3>4. Hybrid (Best of Both)</h3>
          <p>
            <strong>Recommended</strong>: Heuristic prefilter + LLM final selection.
            Balances speed and quality.
          </p>

          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">Hybrid Strategy</span></div>
            <div class="code-block-content">
              <pre><span class="key">strategy</span>: hybrid
<span class="key">recency_weight</span>: <span class="num">0.3</span>
<span class="key">keyword_weight</span>: <span class="num">0.4</span>
<span class="key">callout_weight</span>: <span class="num">0.3</span>
<span class="key">similarity_threshold</span>: <span class="num">0.5</span>
<span class="key">max_tokens</span>: <span class="num">30000</span></pre>
            </div>
          </div>

          <p><strong>Process:</strong></p>
          <ol>
            <li>Heuristic scores all messages</li>
            <li>Semantic embedding filters (if above threshold)</li>
            <li>LLM picks final set within token budget</li>
          </ol>

          <h2 id="intra">Intra-Cell Context (Per-Turn)</h2>
          <p>
            Manages context accumulation <em>within</em> a single cell's multi-turn loop.
            Prevents context explosion in long conversations.
          </p>

          <h3>Configuration</h3>
          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">Intra-Cell Context</span></div>
            <div class="code-block-content">
              <pre>- <span class="key">name</span>: research
  <span class="key">instructions</span>: <span class="str">"Thoroughly research the topic"</span>
  <span class="key">rules</span>:
    <span class="key">max_turns</span>: <span class="num">20</span>
  <span class="key">intra_context</span>:
    <span class="key">enabled</span>: <span class="kw">true</span>
    <span class="key">window</span>: <span class="num">5</span>                      <span class="cmt"># Last 5 turns full fidelity</span>
    <span class="key">mask_observations_after</span>: <span class="num">3</span>    <span class="cmt"># Mask tool results after 3 turns</span>
    <span class="key">compress_loops</span>: <span class="kw">true</span>           <span class="cmt"># Special handling for retries</span>
    <span class="key">loop_history_limit</span>: <span class="num">3</span>        <span class="cmt"># Max prior retry attempts</span>
    <span class="key">preserve_reasoning</span>: <span class="kw">true</span>       <span class="cmt"># Keep thinking without tool calls</span>
    <span class="key">preserve_errors</span>: <span class="kw">true</span>          <span class="cmt"># Always keep error messages</span>
    <span class="key">min_masked_size</span>: <span class="num">200</span>           <span class="cmt"># Don't mask tiny results</span></pre>
            </div>
          </div>

          <h3>How It Works: Tiered Approach</h3>

          <table>
            <thead>
              <tr><th>Tier</th><th>Turns</th><th>Treatment</th></tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Tier 0</strong></td>
                <td>Last N (window)</td>
                <td>Full fidelity - everything included</td>
              </tr>
              <tr>
                <td><strong>Tier 1</strong></td>
                <td>Older turns</td>
                <td>Observation masking - tool results → placeholders</td>
              </tr>
              <tr>
                <td><strong>Tier 2</strong></td>
                <td>Loop retries</td>
                <td>Compressed - minimal context from failed attempts</td>
              </tr>
            </tbody>
          </table>

          <h3>Observation Masking</h3>
          <p>
            After N turns, replace tool results with short placeholders to save tokens
            while preserving conversation flow.
          </p>

          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">Masking Example</span></div>
            <div class="code-block-content">
              <pre><span class="cmt"># Original (Turn 1):</span>
<span class="key">tool_result</span>: <span class="str">"[2000 characters of detailed data...]"</span>

<span class="cmt"># Masked (Turn 8):</span>
<span class="key">tool_result</span>: <span class="str">"[Tool result from turn 1 - 2000 chars masked]"</span></pre>
            </div>
          </div>

          <h3>What Gets Preserved</h3>
          <ul>
            <li>✓ <strong>Recent turns</strong> (within window) - full fidelity</li>
            <li>✓ <strong>Reasoning</strong> - Assistant messages without tool calls</li>
            <li>✓ <strong>Errors</strong> - Any message mentioning errors/failures</li>
            <li>✓ <strong>Small results</strong> - Tool results under min_masked_size</li>
            <li>✗ <strong>Old tool results</strong> - Masked after N turns</li>
          </ul>

          <h3>Performance Impact</h3>
          <div class="info-box tip">
            <div class="info-box-title">Typical Savings</div>
            <p>
              Intra-cell context saves <strong>40-60% tokens</strong> in long cells (10+ turns)
              while maintaining quality. The LLM retains the conversation flow and reasoning
              chain without needing full tool output history.
            </p>
          </div>

          <h2 id="variables">Jinja2 Context Variables</h2>
          <p>
            All cell fields that support Jinja2 templating (<code>instructions</code>,
            <code>tool_inputs</code>, etc.) have access to these variables:
          </p>

          <table>
            <thead>
              <tr><th>Variable</th><th>Type</th><th>Description</th></tr>
            </thead>
            <tbody>
              <tr><td><code>{{ input.* }}</code></td><td>object</td><td>Original cascade input parameters</td></tr>
              <tr><td><code>{{ state.* }}</code></td><td>object</td><td>Persistent session state</td></tr>
              <tr><td><code>{{ outputs.cell_name }}</code></td><td>any</td><td>Output from named cell</td></tr>
              <tr><td><code>{{ lineage }}</code></td><td>array</td><td>Full execution history tree</td></tr>
              <tr><td><code>{{ history }}</code></td><td>array</td><td>Message history</td></tr>
              <tr><td><code>{{ sounding_index }}</code></td><td>int</td><td>Current candidate index (0, 1, 2...)</td></tr>
              <tr><td><code>{{ sounding_factor }}</code></td><td>int</td><td>Total number of candidates</td></tr>
              <tr><td><code>{{ is_sounding }}</code></td><td>bool</td><td>True when running as candidate</td></tr>
              <tr><td><code>{{ checkpoint_id }}</code></td><td>string</td><td>Current HITL checkpoint ID</td></tr>
            </tbody>
          </table>

          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">Variable Usage Examples</span></div>
            <div class="code-block-content">
              <pre><span class="cmt"># Access cascade input</span>
<span class="str">"Research {{ input.topic }} from {{ input.start_date }}"</span>

<span class="cmt"># Access previous cell output</span>
<span class="str">"Analyze these findings: {{ outputs.research.summary }}"</span>

<span class="cmt"># Access state</span>
<span class="str">"User preference: {{ state.user_preference }}"</span>

<span class="cmt"># Conditional based on candidate index</span>
{% if sounding_index == 0 %}
  <span class="str">"Baseline approach"</span>
{% else %}
  <span class="str">"Alternative approach {{ sounding_index }}"</span>
{% endif %}</pre>
            </div>
          </div>

          <h2 id="examples">Real-World Examples</h2>

          <h3>Example 1: Research Pipeline (Explicit Context)</h3>
          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">Research Cascade</span></div>
            <div class="code-block-content">
              <pre><span class="key">cells</span>:
  - <span class="key">name</span>: gather_sources
    <span class="key">instructions</span>: <span class="str">"Find sources on {{ input.topic }}"</span>
    <span class="key">traits</span>: [brave_web_search]
    <span class="cmt"># No context - clean slate</span>

  - <span class="key">name</span>: deep_dive
    <span class="key">instructions</span>: <span class="str">"Deep research using these sources"</span>
    <span class="key">context</span>:
      <span class="key">from</span>: [gather_sources]  <span class="cmt"># Only need source list</span>
    <span class="key">traits</span>: [brave_web_search]

  - <span class="key">name</span>: synthesize
    <span class="key">instructions</span>: <span class="str">"Create comprehensive report"</span>
    <span class="key">context</span>:
      <span class="key">from</span>: [<span class="str">"all"</span>]  <span class="cmt"># Need everything for synthesis</span></pre>
            </div>
          </div>

          <h3>Example 2: Long Research Cell (Intra-Cell Context)</h3>
          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">Long Cell with Context Management</span></div>
            <div class="code-block-content">
              <pre>- <span class="key">name</span>: thorough_research
  <span class="key">instructions</span>: <span class="str">|
    Research {{ input.topic }} exhaustively.
    Use web search, read articles, take screenshots.
    Continue until you have comprehensive understanding.
  </span>
  <span class="key">traits</span>: [brave_web_search, take_screenshot]
  <span class="key">rules</span>:
    <span class="key">max_turns</span>: <span class="num">25</span>  <span class="cmt"># Allow many turns</span>

  <span class="key">intra_context</span>:
    <span class="key">enabled</span>: <span class="kw">true</span>
    <span class="key">window</span>: <span class="num">7</span>                      <span class="cmt"># Last 7 turns full detail</span>
    <span class="key">mask_observations_after</span>: <span class="num">5</span>    <span class="cmt"># Mask older tool results</span>
    <span class="key">preserve_reasoning</span>: <span class="kw">true</span>       <span class="cmt"># Keep all thinking</span>
    <span class="key">preserve_errors</span>: <span class="kw">true</span>          <span class="cmt"># Keep all errors</span></pre>
            </div>
          </div>

          <h3>Example 3: Auto Context (Multi-Cell Analysis)</h3>
          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">Auto Context Cascade</span></div>
            <div class="code-block-content">
              <pre><span class="key">cells</span>:
  - <span class="key">name</span>: research_tech
    <span class="key">instructions</span>: <span class="str">"Research technical aspects"</span>

  - <span class="key">name</span>: research_market
    <span class="key">instructions</span>: <span class="str">"Research market aspects"</span>

  - <span class="key">name</span>: research_legal
    <span class="key">instructions</span>: <span class="str">"Research legal aspects"</span>

  - <span class="key">name</span>: strategic_recommendation
    <span class="key">instructions</span>: <span class="str">|
      Provide strategic recommendation for {{ input.decision }}.
      Consider all relevant research.
    </span>
    <span class="key">context</span>:
      <span class="key">mode</span>: auto  <span class="cmt"># Let LLM pick relevant research</span>
      <span class="key">selection</span>:
        <span class="key">strategy</span>: hybrid
        <span class="key">max_tokens</span>: <span class="num">40000</span>  <span class="cmt"># Large budget for final cell</span>
        <span class="key">keyword_weight</span>: <span class="num">0.5</span>  <span class="cmt"># Prefer research matching decision keywords</span>
      <span class="key">anchors</span>:
        <span class="key">from_cells</span>: [<span class="str">"previous"</span>]  <span class="cmt"># Always include immediate predecessor</span>
        <span class="key">include</span>: [output, callouts]</pre>
            </div>
          </div>

          <h3>Example 4: Cascade-Level Auto Context</h3>
          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">Cascade-Wide Configuration</span></div>
            <div class="code-block-content">
              <pre><span class="key">cascade_id</span>: research_workflow

<span class="cmt"># Apply to ALL cells by default</span>
<span class="key">auto_context</span>:
  <span class="key">intra_cell</span>:
    <span class="key">enabled</span>: <span class="kw">true</span>
    <span class="key">window</span>: <span class="num">5</span>
  <span class="key">inter_cell</span>:
    <span class="key">enabled</span>: <span class="kw">true</span>
    <span class="key">selection</span>:
      <span class="key">strategy</span>: hybrid
      <span class="key">max_tokens</span>: <span class="num">30000</span>

<span class="key">cells</span>:
  - <span class="key">name</span>: research
    <span class="cmt"># Inherits cascade-level auto_context</span>

  - <span class="key">name</span>: analyze
    <span class="cmt"># Can override at cell level</span>
    <span class="key">context</span>:
      <span class="key">mode</span>: explicit
      <span class="key">from</span>: [research]</pre>
            </div>
          </div>

          <div class="info-box warning">
            <div class="info-box-title">Performance Trade-offs</div>
            <p>
              <strong>Heuristic</strong>: Fastest, cheapest, ~80% quality<br>
              <strong>Semantic</strong>: Fast, moderate cost (embeddings), ~85% quality<br>
              <strong>LLM</strong>: Slower, more expensive, ~95% quality<br>
              <strong>Hybrid</strong>: Balanced speed/cost/quality - recommended default
            </p>
          </div>

          <hr style="margin: 48px 0; border: none; border-top: 1px solid rgba(28, 246, 255, 0.2);">

          <h2>Next Steps</h2>
          <ul>
            <li><a href="cascade-dsl.html">DSL Reference</a> - Complete context configuration fields</li>
            <li><a href="cell-types.html">Cell Types</a> - How context works with different cell types</li>
            <li><a href="validation.html">Validation</a> - Combine context with wards</li>
          </ul>

        </main>
      </div>
    </div>

    <footer>
      <div class="container">
        <p>RVBBIT &copy; 2026 | <a href="https://github.com/rvbbit/rvbbit">GitHub</a></p>
      </div>
    </footer>
  </div>
</body>
</html>
