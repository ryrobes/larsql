<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Tools (Traits) - RVBBIT Documentation</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cascadia+Code:ital,wght@0,200..700;1,200..700&family=Google+Sans+Code:ital,wght@0,300..800;1,300..800&family=Quicksand:wght@300..700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/docs.css">
</head>
<body>
  <div class="page">
    <header>
      <div class="container">
        <nav class="nav">
          <a href="index.html" class="brand"><span>RVBBIT</span></a>
          <div class="nav-links">
            <a href="index.html">Docs</a>
            <a href="https://github.com/rvbbit/rvbbit">GitHub</a>
          </div>
        </nav>
      </div>
    </header>

    <div class="container">
      <div class="docs-layout">
        <aside class="sidebar">
          <nav>
            <div class="sidebar-section">
              <h4 class="sidebar-title">Getting Started</h4>
              <ul class="sidebar-links">
                <li><a href="index.html">Overview</a></li>
                <li><a href="core-concepts.html">Core Concepts</a></li>
              </ul>
            </div>
            <div class="sidebar-section">
              <h4 class="sidebar-title">Cascade DSL</h4>
              <ul class="sidebar-links">
                <li><a href="cascade-dsl.html">DSL Reference</a></li>
                <li><a href="cell-types.html">Cell Types</a></li>
                <li><a href="validation.html">Validation (Wards)</a></li>
                <li><a href="context.html">Context Management</a></li>
              </ul>
            </div>
            <div class="sidebar-section">
              <h4 class="sidebar-title">Features</h4>
              <ul class="sidebar-links">
                <li><a href="semantic-sql.html">Semantic SQL</a></li>
                <li><a href="embedding.html">Vector Search & Embedding</a></li>
                <li><a href="candidates.html">Candidates & Evaluation</a></li>
                <li><a href="tools.html" class="active">Tools (Traits)</a></li>
                <li><a href="mcp.html">MCP Integration</a></li>
              </ul>
            </div>
          </nav>
        </aside>

        <main class="docs-content">
          <h1>Tools (Traits)</h1>
          <p class="lead">
            RVBBIT's unified tool system supports six types of tools, all registered in
            a single trait registry. From Python functions to remote API calls to LLM models -
            everything is a first-class tool.
          </p>

          <div class="toc">
            <div class="toc-title">On This Page</div>
            <ul>
              <li><a href="#overview">Tool System Overview</a></li>
              <li><a href="#six-types">Six Tool Types</a></li>
              <li><a href="#python">Python Functions</a></li>
              <li><a href="#cascade">Cascade Tools</a></li>
              <li><a href="#declarative">Declarative Tools</a></li>
              <li><a href="#local-models">Local Model Tools</a></li>
              <li><a href="#harbor">Harbor (HuggingFace Spaces)</a></li>
              <li><a href="#manifest">Tool Manifest</a></li>
              <li><a href="#built-in">Built-in Tools</a></li>
            </ul>
          </div>

          <h2 id="overview">Tool System Overview</h2>
          <p>
            The trait registry is the foundation - a simple global dictionary that
            treats all tools identically:
          </p>

          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">Trait Registry Pattern</span></div>
            <div class="code-block-content">
              <pre><span class="kw">class</span> <span class="fn">TraitRegistry</span>:
    <span class="key">_traits</span>: <span class="fn">Dict</span>[<span class="fn">str</span>, <span class="fn">Callable</span>] = {}

    <span class="kw">def</span> <span class="fn">register_trait</span>(name: <span class="fn">str</span>, func: <span class="fn">Callable</span>):
        <span class="key">_traits</span>[name] = func

    <span class="kw">def</span> <span class="fn">get_trait</span>(name: <span class="fn">str</span>) → <span class="fn">Callable</span>:
        <span class="kw">return</span> <span class="key">_traits</span>.get(name)</pre>
            </div>
          </div>

          <div class="info-box">
            <div class="info-box-title">Unified System</div>
            <p>
              Whether a tool is a Python function, a cascade, a declarative definition,
              a local model, a HuggingFace Space, or an MCP server - they all become
              callable entries in the same registry. This enables consistent tool use
              across all cell types.
            </p>
          </div>

          <h2 id="six-types">Six Tool Types</h2>

          <table>
            <thead>
              <tr>
                <th>Type</th>
                <th>Definition</th>
                <th>Use Case</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Python Functions</strong></td>
                <td>Direct registration</td>
                <td>Custom Python logic</td>
              </tr>
              <tr>
                <td><strong>Cascade Tools</strong></td>
                <td>YAML/JSON with <code>inputs_schema</code></td>
                <td>Workflows as tools</td>
              </tr>
              <tr>
                <td><strong>Declarative Tools</strong></td>
                <td>.tool.json / .tool.yaml files</td>
                <td>Shell, HTTP, composite operations</td>
              </tr>
              <tr>
                <td><strong>Local Model Tools</strong></td>
                <td>HuggingFace transformers</td>
                <td>Run ML models locally</td>
              </tr>
              <tr>
                <td><strong>Harbor Tools</strong></td>
                <td>HuggingFace Spaces</td>
                <td>Remote Gradio apps as tools</td>
              </tr>
              <tr>
                <td><strong>MCP Tools</strong></td>
                <td>Model Context Protocol servers</td>
                <td>Standard tool integrations</td>
              </tr>
            </tbody>
          </table>

          <h2 id="python">Type 1: Python Functions</h2>
          <p>
            Register any Python function as a tool. RVBBIT extracts the schema
            from type hints and docstrings.
          </p>

          <h3>Basic Registration</h3>
          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">Python Function Tool</span></div>
            <div class="code-block-content">
              <pre><span class="kw">from</span> rvbbit <span class="kw">import</span> register_trait

<span class="kw">def</span> <span class="fn">my_custom_tool</span>(param: <span class="fn">str</span>, count: <span class="fn">int</span> = <span class="num">5</span>) → <span class="fn">str</span>:
    <span class="str">"""
    My custom tool that does something useful.

    Args:
        param: The main parameter
        count: How many times to process (default: 5)
    """</span>
    result = <span class="fn">process_something</span>(param, count)
    <span class="kw">return</span> <span class="fn">str</span>(result)

<span class="cmt"># Register the tool</span>
<span class="fn">register_trait</span>(<span class="str">"my_custom_tool"</span>, my_custom_tool)</pre>
            </div>
          </div>

          <h3>Schema Auto-Extraction</h3>
          <p>RVBBIT automatically generates the tool schema:</p>

          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">Generated Schema</span></div>
            <div class="code-block-content">
              <pre>{
  <span class="str">"type"</span>: <span class="str">"function"</span>,
  <span class="str">"function"</span>: {
    <span class="str">"name"</span>: <span class="str">"my_custom_tool"</span>,
    <span class="str">"description"</span>: <span class="str">"My custom tool that does something useful."</span>,
    <span class="str">"parameters"</span>: {
      <span class="str">"type"</span>: <span class="str">"object"</span>,
      <span class="str">"properties"</span>: {
        <span class="str">"param"</span>: {<span class="str">"type"</span>: <span class="str">"string"</span>, <span class="str">"description"</span>: <span class="str">"The main parameter"</span>},
        <span class="str">"count"</span>: {<span class="str">"type"</span>: <span class="str">"integer"</span>, <span class="str">"description"</span>: <span class="str">"How many times..."</span>}
      },
      <span class="str">"required"</span>: [<span class="str">"param"</span>]  <span class="cmt">// count has default, so optional</span>
    }
  }
}</pre>
            </div>
          </div>

          <h3>Multi-Modal Returns</h3>
          <p>Tools can return images, audio, and other media:</p>

          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">Multi-Modal Tool</span></div>
            <div class="code-block-content">
              <pre><span class="kw">def</span> <span class="fn">create_visualization</span>(data: <span class="fn">str</span>) → <span class="fn">Dict</span>[<span class="fn">str</span>, <span class="fn">Any</span>]:
    <span class="str">"""Generate visualization from data."""</span>
    chart_path = <span class="fn">generate_chart</span>(data)

    <span class="kw">return</span> {
        <span class="str">"content"</span>: <span class="str">"Chart generated successfully"</span>,
        <span class="str">"images"</span>: [chart_path]  <span class="cmt"># LLM receives image in context</span>
    }</pre>
            </div>
          </div>

          <h2 id="cascade">Type 2: Cascade Tools</h2>
          <p>
            Any cascade with an <code>inputs_schema</code> automatically becomes a reusable tool.
            Other cascades can invoke it via <code>spawn_cascade</code> or as a direct tool.
          </p>

          <h3>Cascade as Tool</h3>
          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">traits/data_processor.yaml</span></div>
            <div class="code-block-content">
              <pre><span class="key">cascade_id</span>: data_processor
<span class="key">description</span>: Process and transform data files

<span class="key">inputs_schema</span>:  <span class="cmt"># Makes this cascade callable as a tool!</span>
  input_path: <span class="str">"Path to input data file"</span>
  output_format: <span class="str">"json or csv"</span>

<span class="key">cells</span>:
  - <span class="key">name</span>: load
    <span class="key">tool</span>: python:data.load_file
    <span class="key">tool_inputs</span>:
      <span class="key">path</span>: <span class="str">"{{ input.input_path }}"</span>

  - <span class="key">name</span>: transform
    <span class="key">instructions</span>: <span class="str">"Transform data to {{ input.output_format }}"</span>
    <span class="key">traits</span>: [python_data]</pre>
            </div>
          </div>

          <h3>Using Cascade Tools</h3>
          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">Using in Another Cascade</span></div>
            <div class="code-block-content">
              <pre>- <span class="key">name</span>: process_files
  <span class="key">instructions</span>: <span class="str">"Process the data files"</span>
  <span class="key">traits</span>:
    - data_processor  <span class="cmt"># Cascade tool available like any other tool!</span>
    - file_reader</pre>
            </div>
          </div>

          <p>
            The LLM can call <code>data_processor(input_path="...", output_format="json")</code>
            just like a regular function. Behind the scenes, it spawns a sub-cascade.
          </p>

          <h2 id="declarative">Type 3: Declarative Tools</h2>
          <p>
            Define tools using JSON or YAML files - no Python code required.
            Supports shell, HTTP, Python imports, and composite operations.
          </p>

          <h3>Shell Tools</h3>
          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">traits/search_files.tool.json</span></div>
            <div class="code-block-content">
              <pre>{
  <span class="str">"tool_id"</span>: <span class="str">"search_files"</span>,
  <span class="str">"description"</span>: <span class="str">"Search for text patterns in files using grep"</span>,
  <span class="str">"inputs_schema"</span>: {
    <span class="str">"pattern"</span>: <span class="str">"Text or regex pattern to search for"</span>,
    <span class="str">"path"</span>: <span class="str">"Directory to search (default: current)"</span>,
    <span class="str">"file_type"</span>: <span class="str">"Optional file extension filter (e.g., 'py')"</span>
  },
  <span class="str">"type"</span>: <span class="str">"shell"</span>,
  <span class="str">"command"</span>: <span class="str">"grep -rn {{ '--include=*.' + file_type if file_type else '' }} '{{ pattern }}' {{ path | default('.') }} | head -50"</span>,
  <span class="str">"timeout"</span>: <span class="num">30</span>,
  <span class="str">"sandbox"</span>: <span class="kw">false</span>
}</pre>
            </div>
          </div>

          <h3>HTTP Tools</h3>
          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">traits/weather_api.tool.json</span></div>
            <div class="code-block-content">
              <pre>{
  <span class="str">"tool_id"</span>: <span class="str">"get_weather"</span>,
  <span class="str">"description"</span>: <span class="str">"Get current weather for a city"</span>,
  <span class="str">"inputs_schema"</span>: {
    <span class="str">"city"</span>: <span class="str">"City name"</span>
  },
  <span class="str">"type"</span>: <span class="str">"http"</span>,
  <span class="str">"method"</span>: <span class="str">"GET"</span>,
  <span class="str">"url"</span>: <span class="str">"https://api.weather.com/v1/current?city={{ city }}"</span>,
  <span class="str">"headers"</span>: {
    <span class="str">"Authorization"</span>: <span class="str">"Bearer ${WEATHER_API_KEY}"</span>
  },
  <span class="str">"response_jq"</span>: <span class="str">".data"</span>,
  <span class="str">"timeout"</span>: <span class="num">10</span>
}</pre>
            </div>
          </div>

          <h3>Composite Tools (Multi-Step)</h3>
          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">Composite Tool</span></div>
            <div class="code-block-content">
              <pre>{
  <span class="str">"tool_id"</span>: <span class="str">"analyze_codebase"</span>,
  <span class="str">"type"</span>: <span class="str">"composite"</span>,
  <span class="str">"inputs_schema"</span>: {
    <span class="str">"pattern"</span>: <span class="str">"Code pattern to search for"</span>
  },
  <span class="str">"steps"</span>: [
    {
      <span class="str">"tool"</span>: <span class="str">"search_files"</span>,
      <span class="str">"args"</span>: {
        <span class="str">"pattern"</span>: <span class="str">"{{ input.pattern }}"</span>,
        <span class="str">"file_type"</span>: <span class="str">"py"</span>
      }
    },
    {
      <span class="str">"tool"</span>: <span class="str">"analyze_code"</span>,
      <span class="str">"args"</span>: {
        <span class="str">"code"</span>: <span class="str">"{{ steps[0].result }}"</span>
      },
      <span class="str">"condition"</span>: <span class="str">"{{ steps[0].success }}"</span>
    }
  ]
}</pre>
            </div>
          </div>

          <h2 id="local-models">Type 4: Local Model Tools</h2>
          <p>
            Run HuggingFace transformer models locally without API calls. Perfect for
            sentiment analysis, NER, summarization, and more.
          </p>

          <h3>Declarative Definition</h3>
          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">traits/sentiment.tool.yaml</span></div>
            <div class="code-block-content">
              <pre><span class="key">tool_id</span>: local_sentiment
<span class="key">description</span>: <span class="str">|
  Analyze text sentiment using local DistilBERT model.
  Returns POSITIVE or NEGATIVE with confidence score.
  Runs locally - no API calls.
</span>

<span class="key">inputs_schema</span>:
  text: <span class="str">"The text to analyze"</span>

<span class="key">type</span>: local_model
<span class="key">model_id</span>: distilbert/distilbert-base-uncased-finetuned-sst-2-english
<span class="key">task</span>: text-classification
<span class="key">device</span>: auto  <span class="cmt"># auto, cuda, mps, cpu</span></pre>
            </div>
          </div>

          <h3>Programmatic Definition</h3>
          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">Python Decorator</span></div>
            <div class="code-block-content">
              <pre><span class="kw">from</span> rvbbit <span class="kw">import</span> local_model_tool

<span class="cmt"># Decorator creates tool with custom logic</span>
<span class="fn">@local_model_tool</span>(
    <span class="str">"distilbert/distilbert-base-uncased-finetuned-sst-2-english"</span>,
    <span class="str">"text-classification"</span>,
    name=<span class="str">"sentiment_with_threshold"</span>
)
<span class="kw">def</span> <span class="fn">sentiment_with_threshold</span>(pipeline, text: <span class="fn">str</span>, threshold: <span class="fn">float</span> = <span class="num">0.8</span>) → <span class="fn">str</span>:
    <span class="str">"""Sentiment analysis with confidence threshold."""</span>
    result = pipeline(text)
    <span class="kw">if</span> result[<span class="num">0</span>][<span class="str">"score"</span>] < threshold:
        <span class="kw">return</span> <span class="str">"uncertain"</span>
    <span class="kw">return</span> result[<span class="num">0</span>][<span class="str">"label"</span>]</pre>
            </div>
          </div>

          <h3>Supported Tasks</h3>
          <table>
            <thead>
              <tr><th>Task</th><th>Example Models</th></tr>
            </thead>
            <tbody>
              <tr><td><code>text-classification</code></td><td>DistilBERT, RoBERTa</td></tr>
              <tr><td><code>token-classification</code> (NER)</td><td>BERT NER, SpaCy</td></tr>
              <tr><td><code>summarization</code></td><td>BART, T5</td></tr>
              <tr><td><code>question-answering</code></td><td>BERT QA, RoBERTa</td></tr>
              <tr><td><code>text-generation</code></td><td>GPT-2, BLOOM</td></tr>
              <tr><td><code>zero-shot-classification</code></td><td>BART MNLI</td></tr>
              <tr><td><code>image-classification</code></td><td>ViT, ResNet</td></tr>
            </tbody>
          </table>

          <h3>Device Management</h3>
          <p>Environment variables control local model behavior:</p>

          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">Environment</span></div>
            <div class="code-block-content">
              <pre><span class="key">RVBBIT_LOCAL_MODEL_DEVICE</span>=auto      <span class="cmt"># auto, cuda, mps, cpu</span>
<span class="key">RVBBIT_LOCAL_MODEL_CACHE_SIZE_GB</span>=<span class="num">8</span>  <span class="cmt"># Max memory for model cache</span></pre>
            </div>
          </div>

          <h2 id="harbor">Type 5: Harbor (HuggingFace Spaces)</h2>
          <p>
            Automatically discover and use HuggingFace Spaces as tools. Harbor introspects
            Gradio apps and generates tool definitions.
          </p>

          <h3>Discovery Process</h3>
          <ol>
            <li>Query HuggingFace API for user's spaces</li>
            <li>Filter for running Gradio spaces</li>
            <li>Introspect each space's <code>/info</code> endpoint</li>
            <li>Extract API endpoints and schemas</li>
            <li>Register as callable tools</li>
          </ol>

          <h3>CLI Commands</h3>
          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">Harbor CLI</span></div>
            <div class="code-block-content">
              <pre><span class="cmt"># List your HuggingFace Spaces</span>
rvbbit harbor list --author myusername

<span class="cmt"># Introspect a space</span>
rvbbit harbor introspect user/space-name

<span class="cmt"># Export as tool definition</span>
rvbbit harbor export user/space-name -o traits/my_tool.tool.json

<span class="cmt"># Show all Harbor tools in manifest</span>
rvbbit harbor manifest

<span class="cmt"># Wake sleeping space</span>
rvbbit harbor wake user/space-name</pre>
            </div>
          </div>

          <h3>Automatic Tool Registration</h3>
          <p>
            Set <code>HF_TOKEN</code> environment variable and Harbor automatically discovers
            your spaces:
          </p>

          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">Auto-Discovery</span></div>
            <div class="code-block-content">
              <pre><span class="cmt"># In your environment:</span>
<span class="key">export HF_TOKEN</span>=hf_...

<span class="cmt"># Run cascade with "manifest" traits:</span>
rvbbit run my_cascade.yaml --input <span class="str">'{"task": "..."}'</span>

<span class="cmt"># Quartermaster sees all your HF Spaces as available tools!</span></pre>
            </div>
          </div>

          <div class="info-box tip">
            <div class="info-box-title">Cost Awareness</div>
            <p>
              Harbor tracks hourly costs for each space. Use <code>rvbbit harbor manifest</code>
              to see cost estimates for all your running spaces.
            </p>
          </div>

          <h2 id="manifest">Tool Manifest System</h2>
          <p>
            The manifest provides unified discovery of all available tools across all six types.
          </p>

          <h3>Accessing the Manifest</h3>
          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">Python API</span></div>
            <div class="code-block-content">
              <pre><span class="kw">from</span> rvbbit.traits_manifest <span class="kw">import</span> get_trait_manifest

<span class="cmt"># Get manifest (cached)</span>
manifest = <span class="fn">get_trait_manifest</span>()

<span class="cmt"># Refresh to pick up new tools</span>
manifest = <span class="fn">get_trait_manifest</span>(refresh=<span class="kw">True</span>)

<span class="cmt"># Structure:</span>
{
    <span class="str">"tool_name"</span>: {
        <span class="str">"type"</span>: <span class="str">"function"</span>,  <span class="cmt"># or cascade, declarative:shell, mcp_tool, etc.</span>
        <span class="str">"description"</span>: <span class="str">"..."</span>,
        <span class="str">"schema"</span>: {...},  <span class="cmt"># OpenAI function schema</span>
        <span class="str">"path"</span>: <span class="str">"/path/to/tool"</span>  <span class="cmt"># Optional</span>
    }
}</pre>
            </div>
          </div>

          <h3>CLI Commands</h3>
          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">Tools CLI</span></div>
            <div class="code-block-content">
              <pre><span class="cmt"># List all tools</span>
rvbbit tools list

<span class="cmt"># Filter by type</span>
rvbbit tools list --type function
rvbbit tools list --type cascade

<span class="cmt"># Search for tools</span>
rvbbit tools search <span class="str">"sql query"</span>

<span class="cmt"># Semantic search</span>
rvbbit tools find <span class="str">"parse PDF documents"</span>

<span class="cmt"># Show tool usage stats</span>
rvbbit tools usage --days <span class="num">7</span>

<span class="cmt"># Sync manifest (refresh discovery)</span>
rvbbit tools sync --force</pre>
            </div>
          </div>

          <h3>Quartermaster (Dynamic Tool Selection)</h3>
          <p>
            When you set <code>traits: "manifest"</code>, the Quartermaster agent analyzes
            the cell instructions and selects appropriate tools from the full manifest.
          </p>

          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">Manifest Cell</span></div>
            <div class="code-block-content">
              <pre>- <span class="key">name</span>: dynamic_task
  <span class="key">instructions</span>: <span class="str">|
    Complete this task: {{ input.task_description }}
    Use whatever tools you need from the available toolkit.
  </span>
  <span class="key">traits</span>: manifest  <span class="cmt"># Quartermaster picks tools dynamically!</span>
  <span class="key">manifest_limit</span>: <span class="num">30</span>  <span class="cmt"># Max tools to send to Quartermaster</span></pre>
            </div>
          </div>

          <p>
            The Quartermaster receives a formatted list of all tools and selects
            the most relevant ones based on the instructions.
          </p>

          <h2 id="built-in">Built-in Tools</h2>
          <p>
            RVBBIT ships with 50+ built-in tools across multiple categories:
          </p>

          <h3>Core Tools</h3>
          <table>
            <thead>
              <tr><th>Tool</th><th>Description</th></tr>
            </thead>
            <tbody>
              <tr><td><code>linux_shell</code></td><td>Execute shell in Docker sandbox</td></tr>
              <tr><td><code>run_code</code></td><td>Execute Python code</td></tr>
              <tr><td><code>set_state</code></td><td>Store session state</td></tr>
              <tr><td><code>get_state</code></td><td>Retrieve session state</td></tr>
              <tr><td><code>spawn_cascade</code></td><td>Launch sub-cascade</td></tr>
              <tr><td><code>map_cascade</code></td><td>Map cascade over items</td></tr>
            </tbody>
          </table>

          <h3>Data Tools</h3>
          <table>
            <thead>
              <tr><th>Tool</th><th>Description</th></tr>
            </thead>
            <tbody>
              <tr><td><code>sql_data</code></td><td>Execute SQL, store in temp table</td></tr>
              <tr><td><code>python_data</code></td><td>Execute Python, store result</td></tr>
              <tr><td><code>js_data</code></td><td>Execute JavaScript</td></tr>
              <tr><td><code>clojure_data</code></td><td>Execute Clojure</td></tr>
              <tr><td><code>bash_data</code></td><td>Execute bash commands</td></tr>
            </tbody>
          </table>

          <h3>Human Interaction</h3>
          <table>
            <thead>
              <tr><th>Tool</th><th>Description</th></tr>
            </thead>
            <tbody>
              <tr><td><code>ask_human</code></td><td>Generative UI for human input</td></tr>
              <tr><td><code>ask_human_custom</code></td><td>Custom UI templates</td></tr>
              <tr><td><code>request_decision</code></td><td>Decision checkpoint</td></tr>
            </tbody>
          </table>

          <h3>Visualization</h3>
          <table>
            <thead>
              <tr><th>Tool</th><th>Description</th></tr>
            </thead>
            <tbody>
              <tr><td><code>create_chart</code></td><td>Generate Plotly/Vega-Lite charts</td></tr>
              <tr><td><code>take_screenshot</code></td><td>Capture screenshots</td></tr>
              <tr><td><code>show_ui</code></td><td>Display custom HTML/React UI</td></tr>
            </tbody>
          </table>

          <h3>Signal Tools</h3>
          <table>
            <thead>
              <tr><th>Tool</th><th>Description</th></tr>
            </thead>
            <tbody>
              <tr><td><code>await_signal</code></td><td>Wait for external signal</td></tr>
              <tr><td><code>fire_signal</code></td><td>Fire signal to wake cascades</td></tr>
              <tr><td><code>list_signals</code></td><td>List active signals</td></tr>
            </tbody>
          </table>

          <h3>Voice Tools</h3>
          <table>
            <thead>
              <tr><th>Tool</th><th>Description</th></tr>
            </thead>
            <tbody>
              <tr><td><code>say</code></td><td>Text-to-speech (ElevenLabs)</td></tr>
              <tr><td><code>listen</code></td><td>Speech-to-text</td></tr>
              <tr><td><code>transcribe_audio</code></td><td>Transcribe audio files</td></tr>
            </tbody>
          </table>

          <h3>Research Tools</h3>
          <table>
            <thead>
              <tr><th>Tool</th><th>Description</th></tr>
            </thead>
            <tbody>
              <tr><td><code>research_query</code></td><td>Query persistent DuckDB</td></tr>
              <tr><td><code>research_execute</code></td><td>Execute in research DB</td></tr>
              <tr><td><code>brave_web_search</code></td><td>Web search via Brave API</td></tr>
            </tbody>
          </table>

          <h2>Creating Custom Tools</h2>

          <h3>Option 1: Python Function</h3>
          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">Custom Python Tool</span></div>
            <div class="code-block-content">
              <pre><span class="cmt"># In your code or plugin:</span>
<span class="kw">from</span> rvbbit <span class="kw">import</span> register_trait

<span class="kw">def</span> <span class="fn">my_tool</span>(param: <span class="fn">str</span>) → <span class="fn">str</span>:
    <span class="str">"""My tool description for LLM."""</span>
    <span class="kw">return</span> <span class="fn">f</span><span class="str">"Result: {param}"</span>

<span class="fn">register_trait</span>(<span class="str">"my_tool"</span>, my_tool)</pre>
            </div>
          </div>

          <h3>Option 2: Declarative File</h3>
          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">traits/my_tool.tool.yaml</span></div>
            <div class="code-block-content">
              <pre><span class="key">tool_id</span>: my_shell_tool
<span class="key">description</span>: <span class="str">Custom shell operation</span>
<span class="key">type</span>: shell
<span class="key">command</span>: <span class="str">"echo {{ input }} | wc -w"</span>
<span class="key">inputs_schema</span>:
  input: <span class="str">"Text to process"</span></pre>
            </div>
          </div>

          <h3>Option 3: Cascade Tool</h3>
          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">traits/my_workflow.yaml</span></div>
            <div class="code-block-content">
              <pre><span class="key">cascade_id</span>: my_workflow

<span class="key">inputs_schema</span>:  <span class="cmt"># Makes it a tool!</span>
  data: <span class="str">"Input data to process"</span>

<span class="key">cells</span>:
  - <span class="key">name</span>: process
    <span class="key">instructions</span>: <span class="str">"Process {{ input.data }}"</span></pre>
            </div>
          </div>

          <div class="info-box warning">
            <div class="info-box-title">Tool Discovery</div>
            <p>
              Place declarative tools in the <code>traits/</code> directory for automatic
              discovery. RVBBIT scans for <code>*.tool.json</code> and <code>*.tool.yaml</code>
              files on startup.
            </p>
          </div>

          <h2>Tool Execution Context</h2>
          <p>
            Tools have access to execution context via context variables:
          </p>

          <div class="code-block">
            <div class="code-block-header"><span class="code-block-lang">Context Variables</span></div>
            <div class="code-block-content">
              <pre><span class="kw">from</span> rvbbit.traits.state_tools <span class="kw">import</span> (
    get_current_session_id,
    get_current_cell_name,
    get_current_cascade_id,
    get_current_candidate_index,
    get_current_model
)

<span class="kw">def</span> <span class="fn">context_aware_tool</span>(param: <span class="fn">str</span>) → <span class="fn">str</span>:
    session = <span class="fn">get_current_session_id</span>()
    cell = <span class="fn">get_current_cell_name</span>()
    cascade = <span class="fn">get_current_cascade_id</span>()

    <span class="cmt"># Tool knows where it's running!</span>
    <span class="kw">return</span> <span class="fn">f</span><span class="str">"Processing in {cascade}/{cell} (session: {session})"</span></pre>
            </div>
          </div>

          <hr style="margin: 48px 0; border: none; border-top: 1px solid rgba(28, 246, 255, 0.2);">

          <h2>Next Steps</h2>
          <ul>
            <li><a href="mcp.html">MCP Integration</a> - Deep dive into MCP tools (Type 6)</li>
            <li><a href="cell-types.html">Cell Types</a> - Use tools in different cell types</li>
            <li><a href="cascade-dsl.html">DSL Reference</a> - Complete traits configuration</li>
          </ul>

        </main>
      </div>
    </div>

    <footer>
      <div class="container">
        <p>RVBBIT &copy; 2026 | <a href="https://github.com/rvbbit/rvbbit">GitHub</a></p>
      </div>
    </footer>
  </div>
</body>
</html>
