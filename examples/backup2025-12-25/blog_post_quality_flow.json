{
  "cascade_id": "blog_post_quality_flow",
  "description": "Write a blog post with automatic quality validation and retry",
  "inputs_schema": {
    "topic": "The blog post topic",
    "target_audience": "Who is the target audience"
  },
  "cells": [
    {
      "name": "draft_post",
      "instructions": "Write a professional blog post about: {{ input.topic }}\n\nTarget audience: {{ input.target_audience }}\n\nThe post should:\n- Have a clear introduction\n- Provide valuable insights\n- Be at least 200 characters\n- Use proper grammar and spelling",
      "rules": {
        "max_turns": 1,
        "max_attempts": 3,
        "loop_until": "grammar_check",
        "retry_instructions": "Editor's Feedback:\n\n{{ validation_error }}\n\nPlease revise your blog post to address these issues. Focus on grammar, spelling, and clarity.\n\nAttempt {{ attempt }}/{{ max_attempts }}"
      },
      "handoffs": [
        "add_conclusion"
      ]
    },
    {
      "name": "add_conclusion",
      "instructions": "Your blog post was approved! Now add a compelling conclusion paragraph that:\n- Summarizes the main points\n- Includes a call-to-action\n- Mentions the word 'important' (this is an editorial requirement)\n\nProvide ONLY the conclusion paragraph.",
      "context": {
        "from": [
          "previous"
        ]
      },
      "rules": {
        "max_turns": 1,
        "max_attempts": 2,
        "loop_until": "keyword_validator",
        "retry_instructions": "Editorial requirement not met: {{ validation_error }}\n\nRevise the conclusion to include the required keyword. Attempt {{ attempt }}/{{ max_attempts }}"
      },
      "handoffs": [
        "finalize"
      ]
    },
    {
      "name": "finalize",
      "instructions": "Excellent! Both the main content and conclusion have been validated.\n\nProvide a brief summary of the final blog post structure.",
      "context": {
        "from": [
          "all"
        ]
      },
      "handoffs": [
        "end"
      ]
    }
  ]
}