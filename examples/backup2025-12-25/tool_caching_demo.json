{
  "cascade_id": "tool_caching_demo",
  "description": "Demonstrates tool caching to avoid redundant SQL searches",
  "inputs_schema": {
    "dataset": "Dataset name to query multiple times"
  },
  "tool_caching": {
    "enabled": true,
    "global_ttl": 3600,
    "max_cache_size": 100,
    "tools": {
      "sql_search": {
        "enabled": true,
        "ttl": 7200,
        "key": "query",
        "hit_message": "✓ Using cached RAG results (no redundant search)"
      },
      "sql_query": {
        "enabled": true,
        "ttl": 600,
        "key": "sql_hash",
        "hit_message": "✓ Using cached SQL results"
      }
    }
  },
  "phases": [
    {
      "name": "explore",
      "instructions": "Search for {{ input.dataset }} tables. Try multiple searches with the same query to see caching in action.",
      "tackle": ["sql_search"],
      "rules": {
        "max_turns": 3
      },
      "handoffs": ["query"]
    },
    {
      "name": "query",
      "instructions": "Based on the schema found, write a SQL query to analyze {{ input.dataset }}. Run it twice to see caching.",
      "tackle": ["sql_query"],
      "rules": {
        "max_turns": 2
      },
      "handoffs": ["analyze"]
    },
    {
      "name": "analyze",
      "instructions": "Analyze the query results and provide insights.",
      "tackle": []
    }
  ]
}
