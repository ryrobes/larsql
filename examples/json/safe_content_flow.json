{
  "cascade_id": "safe_content_flow",
  "description": "Multi-stage content creation with safety and quality validation",
  "inputs_schema": {
    "topic": "Topic for the content",
    "tone": "Desired tone (professional, casual, educational)"
  },
  "cells": [
    {
      "name": "draft_content",
      "instructions": "Create engaging content about: {{ input.topic }}\n\nTone: {{ input.tone }}\n\nWrite 2-3 paragraphs that are informative and appropriate for all audiences.",
      "rules": {
        "max_turns": 1,
        "max_attempts": 2,
        "loop_until": "content_safety",
        "retry_instructions": "\ud83d\udee1\ufe0f Content Safety Alert:\n\n{{ validation_error }}\n\nPlease revise to ensure content is appropriate and professional. Attempt {{ attempt }}/{{ max_attempts }}"
      },
      "handoffs": [
        "polish_grammar"
      ]
    },
    {
      "name": "polish_grammar",
      "instructions": "Content safety check passed! Now let's polish the writing.\n\nReview your content and ensure:\n- Perfect grammar and spelling\n- Clear sentence structure\n- Professional presentation\n\nProvide the polished version.",
      "rules": {
        "max_turns": 1,
        "max_attempts": 3,
        "loop_until": "grammar_check",
        "retry_instructions": "\u270f\ufe0f Grammar & Style Issues:\n\n{{ validation_error }}\n\nPlease fix these issues for a more polished final product. Attempt {{ attempt }}/{{ max_attempts }}"
      },
      "handoffs": [
        "finalize"
      ]
    },
    {
      "name": "finalize",
      "instructions": "Excellent! Your content has passed both safety and quality checks.\n\nProvide a meta-summary: How many validation attempts did each phase require, and what was learned from the feedback?",
      "traits": [
        "set_state"
      ]
    }
  ]
}