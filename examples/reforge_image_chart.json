{
  "cascade_id": "chart_refinement_reforge",
  "description": "Create a chart, then refine it through reforge with image context",
  "inputs_schema": {
    "data": "Comma-separated data values (e.g., '10,20,30,25,35')",
    "title": "Chart title"
  },
  "phases": [{
    "name": "create_and_refine_chart",
    "instructions": "Create a chart with title '{{ input.title }}' and data: {{ input.data }}\n\nUse the create_chart tool to generate an initial visualization.\n\nAfter seeing the chart, describe what you observe and any improvements you'd suggest. Please be creative and style them for a dark mode system.",
    "tackle": ["create_vega_lite", "create_plotly"],
    "soundings": {
      "factor": 3,
      "evaluator_instructions": "Evaluate the chart descriptions and suggested improvements based on:\n1. Clarity of observations about the chart\n2. Quality of improvement suggestions\n3. Relevance to data visualization best practices\n\nSelect the BEST analysis.",
      "reforge": {
        "steps": 2,
        "honing_prompt": "Looking at the chart image from the previous output, provide specific, actionable improvements:\n- Suggest color palette changes for better accessibility\n- Recommend axis label enhancements\n- Propose legend positioning improvements\n- Add annotations for key data points\n- Suggest chart type alternatives if appropriate",
        "factor_per_step": 2,
        "mutate": true,
        "evaluator_override": "Evaluate refined analyses on:\n1. Specificity of recommendations\n2. Feasibility of implementation\n3. Impact on chart effectiveness\n4. Consideration of accessibility\n\nPick the most actionable, production-ready recommendations."
      }
    },
    "rules": {"max_turns": 2},
    "handoffs": ["finalize"]
  }, {
    "name": "finalize",
    "instructions": "Summarize the chart refinement process:\n- Original chart observations\n- Key improvements identified through reforge\n- Final recommendations\n\nThe images from the refinement process have been saved to the images directory and can be reviewed later.",
    "tackle": [],
    "context": {"from": ["previous"]},
    "rules": {"max_turns": 1}
  }]
}
