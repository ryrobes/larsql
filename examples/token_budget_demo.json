{
  "cascade_id": "token_budget_demo",
  "description": "Demonstrates token budget enforcement with context_ttl + sliding_window strategy",
  "inputs_schema": {
    "topic": "Topic to research and analyze"
  },
  "token_budget": {
    "max_total": 10000,
    "reserve_for_output": 2000,
    "strategy": "sliding_window",
    "warning_threshold": 0.75
  },
  "phases": [
    {
      "name": "research",
      "instructions": "Research {{ input.topic }} extensively. Use multiple searches to gather comprehensive information.",
      "tackle": ["sql_search"],
      "context_ttl": {
        "tool_results": 1
      },
      "rules": {
        "max_turns": 5
      },
      "handoffs": ["analyze"]
    },
    {
      "name": "analyze",
      "instructions": "Based on the research gathered, provide a detailed analysis of {{ input.topic }}. The context has been automatically pruned by token budget enforcement to stay within limits.",
      "tackle": [],
      "handoffs": ["summarize"]
    },
    {
      "name": "summarize",
      "instructions": "Summarize the key findings from the analysis in a concise format.",
      "tackle": []
    }
  ]
}
