cascade_id: token_budget_summarize_demo
description: Demonstrates token budget with SUMMARIZE strategy - compresses old context using cheap LLM
inputs_schema:
  topic: Topic to research deeply
phases:
  - handoffs:
      - synthesize
    instructions: Conduct deep research on {{ input.topic }}. Use as many searches as needed - the token
      budget will automatically compress old RAG results into summaries when context gets too large.
    name: deep_research
    rules:
      max_turns: 8
    tackle:
      - sql_search
  - context:
      from:
        - previous
    instructions: Synthesize all research findings into a comprehensive report. Note that old tool results
      have been compressed into concise summaries to fit within token budget.
    name: synthesize
    tackle: []
token_budget:
  max_total: 12000
  reserve_for_output: 3000
  strategy: summarize
  summarizer:
    model: google/gemini-2.5-flash-lite
    target_size: 2000
  warning_threshold: 0.75
