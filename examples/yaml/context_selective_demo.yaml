cascade_id: context_selective_demo

description: Demonstrates selective context injection - phases can declare which prior phases they need
  context from, instead of accumulating all prior context (snowball).

inputs_schema:
  topic: A topic to analyze

phases:
  - handoffs:
      - add_context
    instructions: |-
      Generate 3 creative ideas about: {{ input.topic }}

      List them as numbered items (1, 2, 3). Then route to add_context.
    name: generate_ideas
  - handoffs:
      - selective_analysis
    instructions: "You are phase B. Add some additional context about why these ideas matter.\n\nIMPORTANT:\
      \ You should see the ideas from the previous phase in your context. Then route to selective_analysis."
    name: add_context
  - context:
      from:
        - generate_ideas
      include_input: yes
    handoffs:
      - final_summary
    instructions: "Analyze ONLY the original ideas. You should NOT see the additional context from phase\
      \ B.\n\nPick the best idea and explain why it's the best.\n\nIMPORTANT: If you can see content about\
      \ 'why these ideas matter' from phase B, something is wrong - you should only see the original ideas\
      \ from generate_ideas.\n\nThen route to final_summary."
    name: selective_analysis
  - context:
      from:
        - include:
            - output
          phase: generate_ideas
        - include:
            - output
          phase: selective_analysis
      include_input: no
    handoffs: []
    instructions: |-
      Create a final summary that combines:
      1. The original ideas
      2. The analysis of the best idea

      You should NOT see the 'add_context' phase output - only generate_ideas and selective_analysis.
    name: final_summary
