cascade_id: rabbitize_form_fill_demo

description: Fill out a web form with visual validation - demonstrates form interaction with loop_until
  for completion checking

inputs_schema:
  form_data: 'JSON object with form field data (e.g., {"name": "John", "email": "john@example.com"})'
  form_url: URL of the form to fill

phases:
  - handoffs:
      - fill_form
    instructions: Start browser and navigate to {{ input.form_url }}. Examine the form and describe what
      fields you see.
    name: load_form
    rules:
      max_turns: 2
    tackle:
      - rabbitize_start
      - rabbitize_extract
  - handoffs:
      - verify_submission
    instructions: |-
      Fill out the form with this data: {{ input.form_data }}

      Steps:
      1. Click on each form field (use rabbitize_extract to find field coordinates)
      2. Type the corresponding value
      3. Verify in the screenshot that the data was entered correctly
      4. Submit the form when all fields are filled

      Take one action at a time and check the result screenshot after each action.
    name: fill_form
    rules:
      loop_until: satisfied
      loop_until_prompt: Continue until the form is completely filled and submitted. Then route to verify_submission.
      max_attempts: 3
      max_turns: 20
      retry_instructions: The form is not complete yet. Continue filling fields or submit if ready.
    tackle:
      - rabbitize_execute
      - rabbitize_extract
      - route_to
  - instructions: Check the current page to verify the form was submitted successfully. Look for confirmation
      messages or redirect. Then close the session.
    name: verify_submission
    rules:
      max_turns: 2
    tackle:
      - rabbitize_extract
      - rabbitize_close
