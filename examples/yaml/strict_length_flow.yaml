cascade_id: strict_length_flow
description: Demonstrates validation with strict length constraints and multiple retries
inputs_schema:
  max_length: Maximum characters allowed
  min_length: Minimum characters required
  topic: What to write about
phases:
  - instructions: |-
      Write about: {{ input.topic }}

      ‚ö†Ô∏è STRICT REQUIREMENTS:
      - Minimum {{ input.min_length }} characters
      - Maximum {{ input.max_length }} characters
      - Make it engaging and complete

      Count your characters carefully!
    name: constrained_writing
    rules:
      loop_until: length_check
      max_attempts: 4
      max_turns: 1
      retry_instructions: |-
        üìè Length Constraint Violation:

        {{ validation_error }}

        Required: {{ input.min_length }}-{{ input.max_length }} characters

        Please adjust your response length. This is attempt {{ attempt }}/{{ max_attempts }}.
    tackle:
      - set_state
  - instructions: "Success! You met the length constraints.\n\nReflect on the challenge: Was it difficult\
      \ to write within the constraints? What strategies did you use?"
    name: reflect
    rules:
      max_turns: 1
