cascade_id: token_budget_demo
description: Demonstrates token budget enforcement with sliding_window strategy
inputs_schema:
  topic: Topic to research and analyze
phases:
  - handoffs:
      - analyze
    instructions: Research {{ input.topic }} extensively. Use multiple searches to gather comprehensive
      information.
    name: research
    rules:
      max_turns: 5
    tackle:
      - sql_search
  - context:
      from:
        - previous
    handoffs:
      - summarize
    instructions: Based on the research gathered, provide a detailed analysis of {{ input.topic }}. The
      context has been automatically pruned by token budget enforcement to stay within limits.
    name: analyze
    tackle: []
  - context:
      from:
        - all
    instructions: Summarize the key findings from the analysis in a concise format.
    name: summarize
    tackle: []
token_budget:
  max_total: 10000
  reserve_for_output: 2000
  strategy: sliding_window
  warning_threshold: 0.75
