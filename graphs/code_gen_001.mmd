graph TD
    %% Styles
    classDef default fill:#f9f9f9,stroke:#333,stroke-width:1px;
    classDef system fill:#e1f5fe,stroke:#333;
    classDef user fill:#fff9c4,stroke:#333;
    classDef agent fill:#dcedc8,stroke:#333;
    classDef tool fill:#ffccbc,stroke:#333;
    classDef error fill:#ffcdd2,stroke:#f44336;
    classDef structure fill:#eeeeee,stroke:#666,stroke-dasharray: 5 5;
    classDef cascade fill:#ffffff,stroke:#333,stroke-width:2px;
    classDef soundings fill:#e3f2fd,stroke:#1976d2,stroke-width:3px;
    classDef sounding_attempt fill:#bbdefb,stroke:#1976d2,stroke-dasharray: 3 3;
    classDef winner fill:#c8e6c9,stroke:#388e3c,stroke-width:3px;
    subgraph node_3b44eb59 [STRUCTURE: Cascade: code_generation_flow]
    direction TB
    class node_3b44eb59 cascade
        subgraph node_0ffef41a [STRUCTURE: Phase: generate_code]
        direction TB
        class node_0ffef41a structure
                node_93bffdc5["SYSTEM<br/>Create a Python function:\n- Function name: calculate_fibonacci\n- Purpose: Calculate the nth Fibonacci number\n\nProvide clean, working Python code."]
            class node_93bffdc5 system
                node_39cb7fb3["USER<br/> Input Data:\n{\'function_name\': \'calculate_fibonacci\', \'description\': \'Calculate the nth Fibonacci number\'}"]
            class node_39cb7fb3 user
        end
        subgraph node_987beec7 [STRUCTURE: Phase: add_docstring]
        direction TB
        class node_987beec7 structure
                node_6a66058f["SYSTEM<br/>Your code structure looks good. Now add comprehensive documentation:\n\nAdd a detailed docstring to the function that:\n1. Explains what it does\n2. Documents parameters\n3. Documents return value\n4. Must include the word 'important' in the docstring (coding standard requirement)\n\nProvide the complete documented function."]
            class node_6a66058f system
                node_dd456df1["USER<br/> Input Data:\n{\'function_name\': \'calculate_fibonacci\', \'description\': \'Calculate the nth Fibonacci number\'}"]
            class node_dd456df1 user
        end
        subgraph node_3bd341bb [STRUCTURE: Phase: summary]
        direction TB
        class node_3bd341bb structure
                node_33605ead["SYSTEM<br/>Perfect! The code is complete and properly documented.\n\nProvide a brief summary of the function you created."]
            class node_33605ead system
                node_5527c15b["USER<br/> Input Data:\n{\'function_name\': \'calculate_fibonacci\', \'description\': \'Calculate the nth Fibonacci number\'}"]
            class node_5527c15b user
        end
    end
        node_34ab985d["ASSISTANT<br/>Here's a clean implementation of the `calculate_fibonacci` function in Python, which calculates the nth Fibonacci number using an iterative approach for efficiency:\n\n```python\ndef calculate_fibonacci(n):\n    \'\'\'\n    Calculate the nth Fibonacci number.\n\n    :param n: Index of the Fibonacci number to calculate (0-based index).\n    :return: The nth Fibonacci number.\n    \'\'\'\n    if n < 0:\n        raise ValueError(\'Input should be a non-negative integer.\')\n    elif n == 0:\n      ..."]
    class node_34ab985d agent
        node_423dddd3["ASSISTANT<br/>Here is the `calculate_fibonacci` function with comprehensive documentation in the form of a detailed docstring:\n\n```python\ndef calculate_fibonacci(n):\n    \'\'\'\n    Calculate the nth Fibonacci number.\n\n    The Fibonacci sequence is a series of numbers where each number \n    is the sum of the two preceding ones, usually starting with 0 and 1. \n    This function calculates the nth Fibonacci number using an iterative \n    approach, which is important for efficient computation, especiall..."]
    class node_423dddd3 agent
        node_fd7eb18f["ASSISTANT<br/>The `calculate_fibonacci` function is designed to compute the nth number in the Fibonacci sequence, which begins with 0 and 1. It utilizes an efficient iterative approach to calculate Fibonacci numbers, making it suitable for large values of n. \n\n Key Features:\n- **Input**: Accepts a single non-negative integer `n`, representing the index of the desired Fibonacci number.\n- **Output**: Returns the nth Fibonacci number, where F(0) = 0, F(1) = 1, and for n > 1, it returns the sum of the two pre..."]
    class node_fd7eb18f agent
    node_3b44eb59 -.-> node_34ab985d
    node_34ab985d -.-> node_423dddd3
    node_423dddd3 -.-> node_fd7eb18f