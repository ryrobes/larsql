graph TD
    %% Styles
    classDef default fill:#f9f9f9,stroke:#333,stroke-width:1px,color:#000;
    classDef system fill:#e1f5fe,stroke:#333,color:#000;
    classDef user fill:#fff9c4,stroke:#333,color:#000;
    classDef agent fill:#dcedc8,stroke:#333,color:#000;
    classDef tool fill:#ffccbc,stroke:#333,color:#000;
    classDef error fill:#ffcdd2,stroke:#f44336,stroke-width:2px,color:#000;
    classDef structure fill:#eeeeee,stroke:#666,stroke-dasharray: 5 5,color:#000;
    classDef cascade fill:#ffffff,stroke:#333,stroke-width:2px,color:#000;
    classDef soundings_group fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#000;
    classDef sounding_attempt fill:#bbdefb,stroke:#1976d2,stroke-dasharray: 3 3,color:#000;
    classDef winner fill:#c8e6c9,stroke:#388e3c,stroke-width:4px,color:#000;
    classDef loser fill:#f5f5f5,stroke:#999,stroke-dasharray: 5 5,color:#666;
    classDef reforge_group fill:#fff3e0,stroke:#f57c00,stroke-width:2px,color:#000;
    classDef reforge_step fill:#ffe0b2,stroke:#f57c00,color:#000;
    classDef reforge_winner fill:#dcedc8,stroke:#689f38,stroke-width:4px,color:#000;
    subgraph node_1307422a [STR: Cascade: iterative_joke]
    direction TB
    class node_1307422a cascade
        subgraph node_ab2f4add [STR: Phase: draft_joke]
        direction TB
        class node_ab2f4add structure
            node_aca1dc40["SYS"]
            class node_aca1dc40 system
            node_c735ab31["USE"]
            class node_c735ab31 user
        end
        subgraph node_df30dac6 [STR: Phase: refine_joke]
        direction TB
        class node_df30dac6 structure
            node_94557d79["SYS"]
            class node_94557d79 system
            node_eede260d["USE"]
            class node_eede260d user
        end
    end
    node_d9aff656["Agent:  Brainstorm Concepts for Pirat"]
    class node_d9aff656 agent
    node_dc6f6463["Agent:  Best Possible Joke Why did th"]
    class node_dc6f6463 agent
    node_ac05df62["USE"]
    class node_ac05df62 user
    node_6239c55b["Agent:  Further Refined Version Why d"]
    class node_6239c55b agent
    node_21c9dafd["USE"]
    class node_21c9dafd user
    node_d2a50fc2["Agent:  Further Refined Version Why d"]
    class node_d2a50fc2 agent