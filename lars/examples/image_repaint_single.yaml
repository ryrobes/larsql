# Single Image Outpaint to 16:9
#
# Input: { "image_path": "/path/to/image.jpg", "output_dir": "/path/to/output" }

cascade_id: image_repaint_single
description: Outpaint image to 16:9

inputs_schema:
  image_path: Path to the image file
  output_dir: Directory to save result (optional)

cells:
  - name: setup
    tool: python_data
    inputs:
      code: |
        import os
        from datetime import datetime
        path = "{{ input.image_path }}"
        out_dir = "{{ input.output_dir | default('') }}" or os.path.dirname(path)
        name = os.path.splitext(os.path.basename(path))[0]
        result = {
            "image_path": path,
            "output_path": os.path.join(out_dir, f"{name}_16x9_{datetime.now().strftime('%H%M%S')}.png")
        }
    handoffs: [outpaint]

  - name: outpaint
    tool: outpaint_16x9
    inputs:
      image_path: "{{ outputs['setup']['result']['image_path'] }}"
      output_path: "{{ outputs['setup']['result']['output_path'] }}"
