cascade_id: semantic_implies
internal: true
description: 'Logical implication check - returns TRUE if text A logically implies
  text B.

  Used for finding consistent or contradictory reports.

  '
inputs_schema:
  premise: The text that might imply something
  conclusion: The text or criterion that should follow
sql_function:
  name: semantic_implies
  description: Returns TRUE if premise logically implies conclusion
  args:
  - name: premise
    type: VARCHAR
  - name: conclusion
    type: VARCHAR
  returns: BOOLEAN
  shape: SCALAR
  operators:
  - '{{ premise }} IMPLIES {{ conclusion }}'
  cache: true
  test_cases:
  # Function syntax
  - sql: SELECT semantic_implies('John is a bachelor', 'John is unmarried')
    expect: true
    description: "Function: Implication detected"
  - sql: SELECT semantic_implies('It is raining', 'The ground is wet')
    expect: true
    description: "Function: Causal implication"
  - sql: SELECT semantic_implies('The sky is blue', 'Today is Monday')
    expect: false
    description: "Function: No logical implication"
  # Infix IMPLIES syntax - need WITH for proper parsing
  - sql: "WITH t AS (SELECT 'All birds can fly' AS premise) SELECT premise FROM t WHERE premise IMPLIES 'Eagles can fly'"
    expect:
      type: contains
      value: birds
    description: "Infix IMPLIES: logical deduction"
  - sql: "WITH t AS (SELECT 'Some dogs are friendly' AS premise) SELECT CASE WHEN premise IMPLIES 'All dogs are friendly' THEN 'yes' ELSE 'no' END FROM t"
    expect: "no"
    description: "Infix IMPLIES: invalid overgeneralization"
cells:
- name: check_implication
  model: google/gemini-2.5-flash-lite
  instructions: 'Does the PREMISE logically imply the CONCLUSION?


    PREMISE: {{ input.premise }}


    CONCLUSION: {{ input.conclusion }}


    Logical implication means: If the premise is true, the conclusion must also be
    true.


    Consider:

    - Does the premise contain information that leads to the conclusion?

    - Is the conclusion a reasonable inference from the premise?

    - Would the premise being true make the conclusion likely true?


    IMPORTANT!

    Respond with ONLY "true" or "false" - no explanation, no code fences, no wrappers.

    '
  rules:
    max_turns: 1
