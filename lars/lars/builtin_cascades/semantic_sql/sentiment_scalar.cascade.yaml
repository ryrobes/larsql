cascade_id: semantic_sentiment_scalar
internal: true
description: 'Scalar sentiment analysis - calculates sentiment for a single text.

  Returns a score from -1.0 to 1.0.

  '
inputs_schema:
  text: The text to analyze
sql_function:
  name: semantic_sentiment_scalar
  description: Calculates sentiment (-1.0 to 1.0) for a single text
  args:
  - name: text
    type: VARCHAR
  returns: DOUBLE
  shape: SCALAR
  operators:
  - SENTIMENT({{ text }})
  - SENTIMENT_SCALAR({{ text }})
  cache: true
  test_cases:
  - sql: SELECT semantic_sentiment_scalar('I absolutely love this!')
    expect:
      type: range
      min: 0.3
      max: 1.0
    description: Positive sentiment returns positive score
  - sql: SELECT semantic_sentiment_scalar('This is terrible and I hate it')
    expect:
      type: range
      min: -1.0
      max: -0.3
    description: Negative sentiment returns negative score
cells:
- name: analyze_sentiment
  model: google/gemini-2.5-flash-lite
  instructions: 'Analyze the sentiment of this text.


    TEXT:

    {{ input.text }}


    Return a single number from -1.0 to 1.0:

    - -1.0 = Extremely negative

    - -0.5 = Moderately negative

    -  0.0 = Neutral/mixed

    - +0.5 = Moderately positive

    - +1.0 = Extremely positive


    Return ONLY the number (e.g., 0.3 or -0.7), nothing else.

    '
  rules:
    max_turns: 1
