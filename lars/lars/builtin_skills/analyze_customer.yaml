# Single customer analysis cascade
# Called by SQL mapping for each row

cascade_id: analyze_customer
description: Analyze a single customer and return risk metrics

inputs_schema:
  customer_id: "Customer ID"
  customer_name: "Company name"
  email: "Email address"

cells:
  - name: analyze
    instructions: |
      Analyze this customer:
      - ID: {{ input.customer_id }}
      - Name: {{ input.customer_name }}
      - Email: {{ input.email }}

      Provide a risk assessment and recommendation.

      Return a JSON object with:
      {
        "customer_id": {{ input.customer_id }},
        "risk_score": 0.0-1.0,
        "recommendation": "brief action item",
        "insights": "key observations"
      }

      Return ONLY valid JSON, no markdown fences.

    skills: []
