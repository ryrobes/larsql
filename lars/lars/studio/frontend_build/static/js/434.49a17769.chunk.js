"use strict";(self.webpackChunklars_ui=self.webpackChunklars_ui||[]).push([[434],{41942:(e,t,a)=>{a.r(t),a.d(t,{default:()=>T});var s=a(89379),o=a(65043),c=a(45685),n=a(94424),i=a(87955),l=a(5748),r=a(64065),d=a(50717),u=a(55785),h=a(63313),f=a(90628),p=a(26232),m=a(60263),x=a(24227),v=a(70579);i.syG.registerModules([i.JKr]);const g=()=>(0,v.jsx)("div",{className:"ag-overlay-loading-center",style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,v.jsx)(r.lp,{size:"small",message:"Loading..."})}),_=e=>{const t=e.value||0,a=t>=95?"#34d399":t>=80?"#fbbf24":"#f87171";return(0,v.jsx)("div",{style:{color:a,fontWeight:"500"},children:(0,v.jsxs)("div",{children:[t.toFixed(0),"%"]})})},b=e=>{var t,a;const s=e.value||0,o=(null===(t=e.data.analytics)||void 0===t?void 0:t.cost_7d_avg)||0,c=(null===(a=e.data.analytics)||void 0===a?void 0:a.cost_30d_avg)||0;if(0===o&&0===c)return(0,v.jsx)("span",{style:{color:"#475569"},children:"-"});const n=s>20?"#f87171":s>5?"#fbbf24":s<-5?"#34d399":"#94a3b8",i=s>5?"\u2191":s<-5?"\u2193":"";return(0,v.jsxs)("div",{style:{color:n,fontWeight:"500"},children:[(0,v.jsxs)("div",{children:[i,Math.abs(s).toFixed(0),"%"]}),o>0&&(0,v.jsxs)("div",{style:{fontSize:"10px",marginTop:"2px",color:"#64748b"},children:["7d: $",o.toFixed(4)]})]})},C=e=>{const t=e.value||0,a=t>20?"#f87171":t>10?"#fbbf24":"#34d399";return 0===t?(0,v.jsx)("span",{style:{color:"#34d399",fontWeight:"500"},children:"0%"}):(0,v.jsx)("div",{style:{color:a,fontWeight:"500"},children:(0,v.jsxs)("div",{children:[t.toFixed(0),"%"]})})},w=e=>{const t=e.value||0,a=t>60?"#fbbf24":t<30?"#34d399":"#94a3b8";return 0===t?(0,v.jsx)("span",{style:{color:"#475569"},children:"-"}):(0,v.jsx)("div",{style:{color:a,fontWeight:"500"},children:(0,v.jsxs)("div",{children:[t.toFixed(0),"%"]})})},j=e=>{const t=e.value;if(!t)return(0,v.jsx)("span",{style:{color:"#475569",fontSize:"11px"},children:"-"});const a={tiny:{label:"T",color:"#34d399"},small:{label:"S",color:"#60a5fa"},medium:{label:"M",color:"#94a3b8"},large:{label:"L",color:"#fbbf24"},huge:{label:"H",color:"#f87171"}}[t]||{label:"?",color:"#94a3b8"};return(0,v.jsx)("span",{style:{background:a.color,color:"#0f172a",padding:"2px 6px",borderRadius:"3px",fontSize:"11px",fontWeight:"600"},children:a.label})},y=e=>{const t=e.value||0,a=e.data.cost_z_score||0,s=e.data.is_cost_outlier?"#f87171":Math.abs(a)>1?"#fbbf24":"#34d399",o=Math.abs(a)>1?"(".concat(a>0?"+":"").concat(a.toFixed(1),"\u03c3)"):"";return(0,v.jsxs)("div",{style:{color:s,fontWeight:"500"},children:[(0,v.jsxs)("div",{children:["$",t.toFixed(4)]}),o&&(0,v.jsx)("div",{style:{fontSize:"10px",marginTop:"2px"},children:o})]})},S=e=>{const t=e.value||0,a=e.data.total_context_cost_estimated||0,s=t>60?"#fbbf24":t<30?"#34d399":"#94a3b8";return(0,v.jsxs)("div",{style:{color:s,fontWeight:"500"},children:[(0,v.jsxs)("div",{children:[t.toFixed(0),"%"]}),t>0&&(0,v.jsxs)("div",{style:{fontSize:"10px",marginTop:"2px",color:"#64748b"},children:["ctx: $",a.toFixed(3)]})]})},N=e=>{const t=e.value||0,a=(t/1e3).toFixed(1),s=e.data.cluster_avg_duration||0,o=e.data.is_duration_outlier,c=o?"#f87171":"#94a3b8",n=s>0?(t/s).toFixed(1):null;return(0,v.jsxs)("div",{style:{color:c,fontWeight:"500"},children:[(0,v.jsxs)("div",{children:[a,"s"]}),o&&n&&(0,v.jsxs)("div",{style:{fontSize:"10px",marginTop:"2px",color:"#64748b"},children:[n,"x slower"]})]})},F=i.zl0.withParams({backgroundColor:"#000000",foregroundColor:"#cbd5e1",headerBackgroundColor:"#0a0510",headerTextColor:"#f0f4f8",oddRowBackgroundColor:"#050410",borderColor:"#1a1628",rowBorder:!0,wrapperBorder:!1,headerFontSize:12,headerFontWeight:600,fontFamily:"'Google Sans Code', monospace",fontSize:13,accentColor:"#00e5ff",chromeBackgroundColor:"#000000"}),T=()=>{const{cascadeId:e}=(0,c.g)(),t=(0,c.Zp)(),a=e?decodeURIComponent(e):null,[i,T]=(0,o.useState)(a),[R,k]=(0,o.useState)([]),[$,z]=(0,o.useState)([]),[I,A]=(0,o.useState)(!0),[W,M]=(0,o.useState)(null),[D,H]=(0,o.useState)(600),[L,B]=(0,o.useState)(null),O=(0,o.useRef)(null),V=(0,o.useRef)(null),E=(0,p.I)({pollInterval:6e4}),[G,J]=(0,o.useState)({search:"",runCount:new Set,costRange:new Set,status:new Set,hasTakes:null,hasSubCascades:null}),P=async()=>{if(i)try{const e=R.find(e=>e.cascade_id===i);if(e&&e.cascade_file){console.log("[CascadesView] Loading cascade into Studio:",e.cascade_id,"from",e.cascade_file);const{loadCascade:a,setMode:s}=d.A.getState();await a(e.cascade_file),s("timeline"),t(m.bw.STUDIO)}else console.warn("[CascadesView] Could not find cascade file for:",i),t(m.bw.studioWithCascade(i))}catch(e){console.error("[CascadesView] Error loading cascade:",e)}};(0,o.useEffect)(()=>{const t=e?decodeURIComponent(e):null;t!==i&&(T(t),t||z([]))},[e]),(0,o.useEffect)(()=>{(async()=>{try{A(!0);const e=await fetch("".concat(x.J,"/api/cascade-definitions")),t=await e.json();if(t.error)return void M(t.error);k(t),M(null)}catch(e){M(e.message)}finally{A(!1)}})(),(async()=>{try{const e=await fetch("".concat(x.J,"/api/console/kpis")),t=await e.json();if(t.error)return void console.error("[CascadesView] KPI fetch error:",t.error);B(t)}catch(e){console.error("[CascadesView] KPI fetch failed:",e.message)}})()},[]),(0,o.useEffect)(()=>{i&&(async e=>{try{A(!0);const t=await fetch("".concat(x.J,"/api/sessions?cascade_id=").concat(e,"&limit=100")),a=await t.json();if(a.error)return void M(a.error);const s=(a.sessions||[]).map(e=>({session_id:e.session_id,cascade_id:e.cascade_id,status:e.status,total_cost:e.total_cost||0,total_duration_ms:e.total_duration_ms||0,duration_seconds:e.started_at&&e.completed_at?(new Date(e.completed_at)-new Date(e.started_at))/1e3:0,input_data:e.input_data,start_time:e.started_at,end_time:e.completed_at,message_count:e.message_count||0,cost_diff_pct:e.cost_diff_pct,messages_diff_pct:e.messages_diff_pct,duration_diff_pct:e.duration_diff_pct,input_category:e.input_category,input_char_count:e.input_char_count||0,cost_z_score:e.cost_z_score||0,duration_z_score:e.duration_z_score||0,is_cost_outlier:e.is_cost_outlier||!1,is_duration_outlier:e.is_duration_outlier||!1,cluster_avg_cost:e.cluster_avg_cost||0,cluster_avg_duration:e.cluster_avg_duration||0,cluster_run_count:e.cluster_run_count||0,context_cost_pct:e.context_cost_pct||0,total_context_cost_estimated:e.total_context_cost_estimated||0}));z(s),M(null)}catch(t){M(t.message)}finally{A(!1)}})(i)},[i]),(0,o.useEffect)(()=>{const e=()=>{if(!V.current)return;const e=window.innerHeight,t=e-V.current.getBoundingClientRect().top-20,a=Math.max(400,Math.min(t,.7*e));H(a)};e(),window.addEventListener("resize",e);const t=setTimeout(e,100);return()=>{window.removeEventListener("resize",e),clearTimeout(t)}},[i]);const K=(0,o.useMemo)(()=>[{field:"cascade_id",headerName:"Cascade ID",flex:2,minWidth:180,cellClass:"cascades-id"},{field:"description",headerName:"Description",flex:3,minWidth:200},{field:"metrics.run_count",headerName:"Runs",width:90,valueFormatter:e=>e.value||0,cellStyle:{fontFamily:"var(--font-mono)"}},{field:"metrics.total_cost",headerName:"Total Cost",width:120,valueFormatter:e=>{const t=e.value||0;return t>0?"$".concat(t.toFixed(6)):"-"},cellStyle:{color:"#34d399",fontFamily:"var(--font-mono)"}},{field:"metrics.avg_duration_seconds",headerName:"Avg Duration",width:120,valueFormatter:e=>{const t=e.value||0;if(0===t)return"-";if(t<60)return"".concat(Math.round(t),"s");const a=Math.floor(t/60),s=Math.round(t%60);return"".concat(a,"m ").concat(s,"s")},cellStyle:{fontFamily:"var(--font-mono)"}},{field:"analytics.success_rate",headerName:"Success",headerTooltip:"Percentage of runs that completed successfully",width:95,wrapText:!0,autoHeight:!0,cellRenderer:_,tooltipValueGetter:e=>{const t=e.value||0;return"Success rate: ".concat(t.toFixed(1),"% of runs completed successfully")},cellStyle:{lineHeight:"1.4",whiteSpace:"normal",paddingTop:"4px",paddingBottom:"4px"}},{field:"analytics.cost_trend_pct",headerName:"Cost Trend",headerTooltip:"7-day vs 30-day average cost trend",width:110,wrapText:!0,autoHeight:!0,cellRenderer:b,tooltipValueGetter:e=>{var t,a;const s=e.value||0,o=(null===(t=e.data.analytics)||void 0===t?void 0:t.cost_7d_avg)||0,c=(null===(a=e.data.analytics)||void 0===a?void 0:a.cost_30d_avg)||0;return 0===o&&0===c?"Insufficient data for trend":"7d avg: $".concat(o.toFixed(4)," | 30d avg: $").concat(c.toFixed(4)," | Trend: ").concat(s>0?"+":"").concat(s.toFixed(1),"%")},cellStyle:{lineHeight:"1.4",whiteSpace:"normal",paddingTop:"4px",paddingBottom:"4px"}},{field:"analytics.outlier_rate",headerName:"Outliers",headerTooltip:"Percentage of runs that are cost outliers",width:95,wrapText:!0,autoHeight:!0,cellRenderer:C,tooltipValueGetter:e=>{const t=e.value||0;return"Outlier rate: ".concat(t.toFixed(1),"% of runs are statistical outliers (>2\u03c3)")},cellStyle:{lineHeight:"1.4",whiteSpace:"normal",paddingTop:"4px",paddingBottom:"4px"}},{field:"analytics.avg_context_pct",headerName:"Avg Ctx%",headerTooltip:"Average percentage of cost from context injection",width:95,wrapText:!0,autoHeight:!0,cellRenderer:w,tooltipValueGetter:e=>{const t=e.value||0;return"Average context cost: ".concat(t.toFixed(1),"% of total cost typically from context injection")},cellStyle:{lineHeight:"1.4",whiteSpace:"normal",paddingTop:"4px",paddingBottom:"4px"}},{field:"latest_run",headerName:"Latest Run",flex:1.5,minWidth:160,valueFormatter:e=>e.value?new Date(e.value).toLocaleString():"-"}],[]),U=(0,o.useMemo)(()=>[{field:"session_id",headerName:"Session ID",flex:2,minWidth:180,cellClass:"cascades-session-id"},{field:"status",headerName:"Status",width:100,cellRenderer:e=>{var t;const a={running:"#00e5ff",completed:"#34d399",error:"#ff006e",cancelled:"#64748b"}[null===(t=e.value)||void 0===t?void 0:t.toLowerCase()]||"#64748b";return(0,v.jsx)("span",{style:{color:a,fontWeight:600,textTransform:"uppercase",fontSize:"11px"},children:e.value})}},{field:"input_category",headerName:"Input",headerTooltip:"Input size category for apples-to-apples comparison",width:80,cellRenderer:j,tooltipValueGetter:e=>{const t=e.value,a=e.data.input_char_count||0;return t?"Input size: ".concat(t," (").concat(a," chars)"):a>0?"Input size: ".concat(a," chars (no category)"):"No input data"}},{field:"total_cost",headerName:"Cost",headerTooltip:"Statistical anomaly score vs similar input size runs",width:130,wrapText:!0,autoHeight:!0,cellRenderer:y,tooltipValueGetter:e=>{const t=e.value||0,a=e.data.cluster_avg_cost||0,s=e.data.cluster_run_count||0,o=e.data.cost_z_score||0;return"Cost: $".concat(t.toFixed(4)," | Cluster avg: $").concat(a.toFixed(4)," (n=").concat(s," similar runs) | Z-score: ").concat(o.toFixed(1),"\u03c3")},cellStyle:{fontFamily:"var(--font-mono)",lineHeight:"1.4",whiteSpace:"normal",paddingTop:"4px",paddingBottom:"4px"}},{field:"context_cost_pct",headerName:"Context%",headerTooltip:"Percentage of cost from context injection vs new tokens",width:100,wrapText:!0,autoHeight:!0,cellRenderer:S,tooltipValueGetter:e=>{const t=e.value||0,a=e.data.total_context_cost_estimated||0,s=(e.data.total_cost||0)-a;return"Context cost: $".concat(a.toFixed(4)," (").concat(t.toFixed(0),"%) | New tokens: $").concat(s.toFixed(4))},cellStyle:{fontFamily:"var(--font-mono)",lineHeight:"1.4",whiteSpace:"normal",paddingTop:"4px",paddingBottom:"4px"}},{field:"total_duration_ms",headerName:"Duration",headerTooltip:"Execution time compared to similar input size runs",width:120,wrapText:!0,autoHeight:!0,cellRenderer:N,tooltipValueGetter:e=>{const t=e.value||0,a=e.data.cluster_avg_duration||0,s=e.data.cluster_run_count||0,o=a>0?(t/a).toFixed(1):0;return"Duration: ".concat((t/1e3).toFixed(1),"s | Cluster avg: ").concat((a/1e3).toFixed(1),"s (n=").concat(s," similar runs) | ").concat(o,"x ").concat(t>a?"slower":"faster")},cellStyle:{fontFamily:"var(--font-mono)",lineHeight:"1.4",whiteSpace:"normal",paddingTop:"4px",paddingBottom:"4px"}},{field:"cost_diff_pct",hide:!0},{field:"messages_diff_pct",hide:!0},{field:"duration_diff_pct",hide:!0},{field:"message_count",hide:!0},{field:"duration_seconds",hide:!0},{field:"input_data",headerName:"Inputs",flex:2,minWidth:150,wrapText:!0,autoHeight:!0,valueFormatter:e=>{if(!e.value)return"-";try{const t="string"===typeof e.value?JSON.parse(e.value):e.value;if("object"===typeof t&&null!==t){const e=JSON.stringify(t,null,2);return e.length>150?e.slice(0,150)+"...":e}const a=JSON.stringify(t);return a.length>150?a.slice(0,150)+"...":a}catch(t){const a=String(e.value);return a.length>150?a.slice(0,150)+"...":a}},tooltipValueGetter:e=>{if(!e.value)return null;try{const t="string"===typeof e.value?JSON.parse(e.value):e.value;return JSON.stringify(t,null,2)}catch(t){return String(e.value)}},cellStyle:{fontFamily:"var(--font-mono)",fontSize:"12px",lineHeight:"1.4",whiteSpace:"normal",paddingTop:"8px",paddingBottom:"8px"}},{field:"start_time",headerName:"Started",flex:1.5,minWidth:160,valueFormatter:e=>e.value?new Date(e.value).toLocaleString():"-"}],[]),Z=(0,o.useMemo)(()=>({sortable:!0,filter:!0,resizable:!0}),[]),q=(0,o.useMemo)(()=>R.filter(e=>{if(G.search){var t,a;const s=G.search.toLowerCase(),o=null===(t=e.cascade_id)||void 0===t?void 0:t.toLowerCase().includes(s),c=null===(a=e.description)||void 0===a?void 0:a.toLowerCase().includes(s);if(!o&&!c)return!1}if(G.runCount.size>0){var s;const t=(null===(s=e.metrics)||void 0===s?void 0:s.run_count)||0;let a=!1;if(G.runCount.has("0")&&0===t&&(a=!0),G.runCount.has("1-10")&&t>=1&&t<=10&&(a=!0),G.runCount.has("11-50")&&t>=11&&t<=50&&(a=!0),G.runCount.has("50+")&&t>50&&(a=!0),!a)return!1}if(G.costRange.size>0){var o;const t=(null===(o=e.metrics)||void 0===o?void 0:o.total_cost)||0;let a=!1;if(G.costRange.has("$0")&&0===t&&(a=!0),G.costRange.has("$0-$1")&&t>0&&t<=1&&(a=!0),G.costRange.has("$1-$10")&&t>1&&t<=10&&(a=!0),G.costRange.has("$10+")&&t>10&&(a=!0),!a)return!1}if(null!==G.hasTakes){var c;if(((null===(c=e.graph_complexity)||void 0===c?void 0:c.has_takes)||!1)!==G.hasTakes)return!1}if(null!==G.hasSubCascades){var n;if(((null===(n=e.graph_complexity)||void 0===n?void 0:n.has_sub_cascades)||!1)!==G.hasSubCascades)return!1}return!0}),[R,G]),Q=(0,o.useMemo)(()=>$.filter(e=>{if(G.search){var t;const a=G.search.toLowerCase(),s=null===(t=e.session_id)||void 0===t?void 0:t.toLowerCase().includes(a),o=JSON.stringify(e.input_data||{}).toLowerCase().includes(a);if(!s&&!o)return!1}if(G.status.size>0){var a;const t=null===(a=e.status)||void 0===a?void 0:a.toLowerCase();if(!G.status.has(t))return!1}if(G.costRange.size>0){const t=e.total_cost||0;let a=!1;if(G.costRange.has("$0")&&0===t&&(a=!0),G.costRange.has("$0-$0.10")&&t>0&&t<=.1&&(a=!0),G.costRange.has("$0.10-$1")&&t>.1&&t<=1&&(a=!0),G.costRange.has("$1+")&&t>1&&(a=!0),!a)return!1}return!0}),[$,G]),X=(0,o.useMemo)(()=>""!==G.search||G.runCount.size>0||G.costRange.size>0||G.status.size>0||null!==G.hasTakes||null!==G.hasSubCascades,[G]),Y=(0,o.useMemo)(()=>{if(!i||0===$.length)return null;const e=$.length,t=$.reduce((e,t)=>e+(t.total_cost||0),0),a=$.filter(e=>e.is_cost_outlier).length,s=$.filter(e=>e.context_cost_pct>0),o=s.length>0?s.reduce((e,t)=>e+t.context_cost_pct,0)/s.length:0,c=$.filter(e=>"completed"===e.status).length,n=$.filter(e=>"error"===e.status).length;return{totalRuns:e,totalCost:t,outlierCount:a,avgContextPct:o,successRate:e>0?c/(c+n)*100:100,errorCount:n}},[i,$]),ee=(e,t)=>{J(a=>{const o=new Set(a[e]);return o.has(t)?o.delete(t):o.add(t),(0,s.A)((0,s.A)({},a),{},{[e]:o})})},te=e=>{J(t=>(0,s.A)((0,s.A)({},t),{},{[e]:null===t[e]||!0!==t[e]&&null}))},ae=i?Q:q,se=i?$:R,oe=i?U:K,ce=i?e=>{const{session_id:a}=e.data;a&&i&&t(m.bw.studioWithSession(i,a))}:e=>{const{cascade_id:a}=e.data;a&&(T(a),t(m.bw.cascadesWithCascade(a)))},ne=(0,o.useMemo)(()=>i?[i]:X&&q.length>0?q.map(e=>e.cascade_id):[],[i,q,X]),ie=(0,o.useMemo)(()=>{if(!i)return null;const e=R.find(e=>e.cascade_id===i);return e?{cells:e.cells||[],inputsSchema:e.inputs_schema||{}}:null},[i,R]);return(0,v.jsxs)("div",{className:"cascades-view",children:[(0,v.jsxs)("div",{className:"cascades-header",children:[(0,v.jsxs)("div",{className:"cascades-title",children:[i&&(0,v.jsx)(r.$n,{variant:"ghost",size:"sm",icon:"mdi:arrow-left",onClick:()=>{T(null),z([]),t(m.bw.CASCADES)},className:"cascades-back-btn",children:"Back"}),(0,v.jsx)(l.In,{icon:"mdi:file-tree",width:"32"}),(0,v.jsx)("h1",{children:i||"Cascades"})]}),(0,v.jsx)("div",{className:"cascades-subtitle",children:i?"Execution history for ".concat(i):"All cascade definitions with aggregate metrics"})]}),!i&&(L||null!==E.balance)&&(0,v.jsx)("div",{className:"cascades-kpi-section",children:(0,v.jsxs)("div",{className:"cascades-kpi-grid",children:[L&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(f.A,{icon:"mdi:cash",title:"24h Cost",value:"$".concat(L.total_cost_24h.toFixed(2)),subtitle:L.cost_trend,color:"#34d399"}),(0,v.jsx)(f.A,{icon:"mdi:alert-circle",title:"Active Outliers",value:L.outlier_count,subtitle:"in last 24h",color:L.outlier_count>0?"#f87171":"#94a3b8"}),(0,v.jsx)(f.A,{icon:"mdi:percent",title:"Avg Context%",value:"".concat(L.avg_context_pct.toFixed(0),"%"),subtitle:L.context_trend,color:"#60a5fa"})]}),(0,v.jsx)(f.A,{icon:"mdi:wallet",title:"OR Balance",value:null!==E.balance?"$".concat(E.balance.toFixed(2)):"\u2014",subtitle:null!==E.runwayDays?"~".concat(E.runwayDays,"d runway"):null!==E.burnRate24h?"$".concat(E.burnRate24h.toFixed(2),"/hr"):null,color:null===E.balance?"#64748b":E.balance>20?"#34d399":E.balance>5?"#fbbf24":"#f87171"})]})}),i&&Y&&(0,v.jsx)("div",{className:"cascades-kpi-section",children:(0,v.jsxs)("div",{className:"cascades-kpi-grid",children:[(0,v.jsx)(f.A,{title:"Total Runs",value:Y.totalRuns,subtitle:Y.errorCount>0?"".concat(Y.errorCount," errors"):"no errors",icon:"mdi:play-circle",color:Y.successRate>=95?"#34d399":Y.successRate>=80?"#fbbf24":"#f87171"}),(0,v.jsx)(f.A,{title:"Total Cost",value:"$".concat(Y.totalCost.toFixed(4)),subtitle:"$".concat((Y.totalCost/Y.totalRuns).toFixed(4)," avg/run"),icon:"mdi:cash",color:"#34d399"}),(0,v.jsx)(f.A,{title:"Outliers",value:Y.outlierCount,subtitle:Y.outlierCount>0?"".concat((Y.outlierCount/Y.totalRuns*100).toFixed(0),"% of runs"):"none detected",icon:"mdi:alert-circle",color:Y.outlierCount>0?"#f87171":"#64748b"}),(0,v.jsx)(f.A,{title:"Avg Context%",value:"".concat(Y.avgContextPct.toFixed(0),"%"),subtitle:"of cost is context",icon:"mdi:database-import",color:Y.avgContextPct>60?"#fbbf24":Y.avgContextPct>30?"#60a5fa":"#34d399"})]})}),(0,v.jsxs)("div",{className:"cascades-section",children:[(0,v.jsxs)("div",{className:"cascades-section-header",children:[(0,v.jsx)(l.In,{icon:"mdi:chart-line",width:"14"}),(0,v.jsx)("h2",{children:"Cost Timeline"}),(0,v.jsx)("span",{className:"cascades-filter-label ".concat(0===ne.length?"invisible":""),children:1===ne.length?"Filtered to: ".concat(ne[0]):ne.length>1?"Filtered to ".concat(ne.length," cascades"):"\xa0"})]}),(0,v.jsx)("div",{className:"cascades-chart-wrapper",children:(0,v.jsx)(u.A,{cascadeIds:ne})})]}),i&&ie&&ie.cells.length>0&&(0,v.jsx)("div",{className:"cascades-section",children:(0,v.jsx)(h.A,{cells:ie.cells,inputsSchema:ie.inputsSchema,cascadeId:i})}),(0,v.jsxs)("div",{className:"cascades-section",children:[(0,v.jsxs)("div",{className:"cascades-section-header",children:[(0,v.jsx)(l.In,{icon:"mdi:table",width:"14"}),(0,v.jsx)("h2",{children:i?"Execution History":"All Cascades"}),(0,v.jsxs)("span",{className:"cascades-count",children:[X?"".concat(ae.length," of ").concat(se.length):ae.length," ",i?"sessions":"cascades"]}),i&&(0,v.jsxs)("button",{className:"cascades-open-studio-btn",onClick:P,title:"Open cascade spec in Studio (no session)",children:[(0,v.jsx)(l.In,{icon:"mdi:pencil-ruler",width:"14"}),"Open in Studio"]})]}),(0,v.jsxs)("div",{className:"cascades-filter-bar",children:[(0,v.jsxs)("div",{className:"filter-search",children:[(0,v.jsx)(l.In,{icon:"mdi:magnify",width:"14"}),(0,v.jsx)("input",{type:"text",placeholder:i?"Search sessions...":"Search cascades...",value:G.search,onChange:e=>J(t=>(0,s.A)((0,s.A)({},t),{},{search:e.target.value}))}),G.search&&(0,v.jsx)(l.In,{icon:"mdi:close-circle",width:"14",className:"filter-search-clear",onClick:()=>J(e=>(0,s.A)((0,s.A)({},e),{},{search:""}))})]}),!i&&(0,v.jsxs)("div",{className:"filter-group",children:[(0,v.jsx)("span",{className:"filter-label",children:"Runs"}),(0,v.jsx)("div",{className:"filter-chips",children:["0","1-10","11-50","50+"].map(e=>(0,v.jsx)("button",{className:"filter-chip ".concat(G.runCount.has(e)?"active":""),onClick:()=>ee("runCount",e),children:e},e))})]}),i&&(0,v.jsxs)("div",{className:"filter-group",children:[(0,v.jsx)("span",{className:"filter-label",children:"Status"}),(0,v.jsx)("div",{className:"filter-chips",children:["completed","error","running","blocked"].map(e=>(0,v.jsx)("button",{className:"filter-chip status-".concat(e," ").concat(G.status.has(e)?"active":""),onClick:()=>ee("status",e),children:e},e))})]}),(0,v.jsxs)("div",{className:"filter-group",children:[(0,v.jsx)("span",{className:"filter-label",children:"Cost"}),(0,v.jsx)("div",{className:"filter-chips",children:i?["$0","$0-$0.10","$0.10-$1","$1+"].map(e=>(0,v.jsx)("button",{className:"filter-chip ".concat(G.costRange.has(e)?"active":""),onClick:()=>ee("costRange",e),children:e},e)):["$0","$0-$1","$1-$10","$10+"].map(e=>(0,v.jsx)("button",{className:"filter-chip ".concat(G.costRange.has(e)?"active":""),onClick:()=>ee("costRange",e),children:e},e))})]}),!i&&(0,v.jsxs)("div",{className:"filter-group",children:[(0,v.jsx)("span",{className:"filter-label",children:"Features"}),(0,v.jsxs)("div",{className:"filter-chips",children:[(0,v.jsxs)("button",{className:"filter-toggle ".concat(!0===G.hasTakes?"active":""," ").concat(!1===G.hasTakes?"inactive":""),onClick:()=>te("hasTakes"),title:null===G.hasTakes?"Show all":G.hasTakes?"With takes":"Without takes",children:[(0,v.jsx)(l.In,{icon:"mdi:routes",width:"12"}),"Takes"]}),(0,v.jsxs)("button",{className:"filter-toggle ".concat(!0===G.hasSubCascades?"active":""," ").concat(!1===G.hasSubCascades?"inactive":""),onClick:()=>te("hasSubCascades"),title:null===G.hasSubCascades?"Show all":G.hasSubCascades?"With sub-cascades":"Without sub-cascades",children:[(0,v.jsx)(l.In,{icon:"mdi:file-tree",width:"12"}),"Sub-Cascades"]})]})]}),X&&(0,v.jsxs)("button",{className:"filter-clear",onClick:()=>{J({search:"",runCount:new Set,costRange:new Set,status:new Set,hasTakes:null,hasSubCascades:null})},children:[(0,v.jsx)(l.In,{icon:"mdi:close-circle",width:"14"}),"Clear"]})]}),W&&(0,v.jsxs)("div",{className:"cascades-error",children:[(0,v.jsx)(l.In,{icon:"mdi:alert-circle",width:"20"}),(0,v.jsx)("span",{children:W})]}),!W&&(0,v.jsx)(v.Fragment,{children:0===ae.length&&!I&&i?(0,v.jsxs)("div",{className:"cascades-empty-state",children:[(0,v.jsx)(l.In,{icon:"mdi:play-circle-outline",width:"64"}),(0,v.jsx)("h3",{children:"No runs yet"}),(0,v.jsx)("p",{children:"This cascade hasn't been executed yet."}),(0,v.jsx)(r.$n,{variant:"primary",icon:"mdi:rocket-launch",onClick:P,children:"Load in Studio to Run"})]}):(0,v.jsx)("div",{ref:V,className:"cascades-grid-container",style:{height:"".concat(D,"px")},children:(0,v.jsx)(n.W6,{ref:O,theme:F,rowData:ae,columnDefs:oe,defaultColDef:Z,getRowId:e=>e.data.session_id||e.data.cascade_id,domLayout:"normal",suppressCellFocus:!0,suppressMovableColumns:!1,enableCellTextSelection:!0,ensureDomOrder:!0,animateRows:!0,loading:I,loadingOverlayComponent:g,onRowClicked:ce,onFirstDataRendered:e=>{e.api.sizeColumnsToFit()},rowClass:"cascades-grid-row-clickable",tooltipShowDelay:500})})})]})]})}}}]);
//# sourceMappingURL=434.49a17769.chunk.js.map