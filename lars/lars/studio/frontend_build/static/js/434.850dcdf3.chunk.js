"use strict";(self.webpackChunklars_ui=self.webpackChunklars_ui||[]).push([[434],{41942:(e,t,a)=>{a.r(t),a.d(t,{default:()=>F});var s=a(89379),o=a(65043),c=a(45685),i=a(94424),n=a(87955),l=a(5748),r=a(64065),d=a(50717),u=a(55785),h=a(63313),f=a(90628),p=a(26232),m=a(60263),x=a(70579);n.syG.registerModules([n.JKr]);const v=()=>(0,x.jsx)("div",{className:"ag-overlay-loading-center",style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,x.jsx)(r.lp,{size:"small",message:"Loading..."})}),g=e=>{const t=e.value||0,a=t>=95?"#34d399":t>=80?"#fbbf24":"#f87171";return(0,x.jsx)("div",{style:{color:a,fontWeight:"500"},children:(0,x.jsxs)("div",{children:[t.toFixed(0),"%"]})})},_=e=>{var t,a;const s=e.value||0,o=(null===(t=e.data.analytics)||void 0===t?void 0:t.cost_7d_avg)||0,c=(null===(a=e.data.analytics)||void 0===a?void 0:a.cost_30d_avg)||0;if(0===o&&0===c)return(0,x.jsx)("span",{style:{color:"#475569"},children:"-"});const i=s>20?"#f87171":s>5?"#fbbf24":s<-5?"#34d399":"#94a3b8",n=s>5?"\u2191":s<-5?"\u2193":"";return(0,x.jsxs)("div",{style:{color:i,fontWeight:"500"},children:[(0,x.jsxs)("div",{children:[n,Math.abs(s).toFixed(0),"%"]}),o>0&&(0,x.jsxs)("div",{style:{fontSize:"10px",marginTop:"2px",color:"#64748b"},children:["7d: $",o.toFixed(4)]})]})},b=e=>{const t=e.value||0,a=t>20?"#f87171":t>10?"#fbbf24":"#34d399";return 0===t?(0,x.jsx)("span",{style:{color:"#34d399",fontWeight:"500"},children:"0%"}):(0,x.jsx)("div",{style:{color:a,fontWeight:"500"},children:(0,x.jsxs)("div",{children:[t.toFixed(0),"%"]})})},C=e=>{const t=e.value||0,a=t>60?"#fbbf24":t<30?"#34d399":"#94a3b8";return 0===t?(0,x.jsx)("span",{style:{color:"#475569"},children:"-"}):(0,x.jsx)("div",{style:{color:a,fontWeight:"500"},children:(0,x.jsxs)("div",{children:[t.toFixed(0),"%"]})})},w=e=>{const t=e.value;if(!t)return(0,x.jsx)("span",{style:{color:"#475569",fontSize:"11px"},children:"-"});const a={tiny:{label:"T",color:"#34d399"},small:{label:"S",color:"#60a5fa"},medium:{label:"M",color:"#94a3b8"},large:{label:"L",color:"#fbbf24"},huge:{label:"H",color:"#f87171"}}[t]||{label:"?",color:"#94a3b8"};return(0,x.jsx)("span",{style:{background:a.color,color:"#0f172a",padding:"2px 6px",borderRadius:"3px",fontSize:"11px",fontWeight:"600"},children:a.label})},j=e=>{const t=e.value||0,a=e.data.cost_z_score||0,s=e.data.is_cost_outlier?"#f87171":Math.abs(a)>1?"#fbbf24":"#34d399",o=Math.abs(a)>1?"(".concat(a>0?"+":"").concat(a.toFixed(1),"\u03c3)"):"";return(0,x.jsxs)("div",{style:{color:s,fontWeight:"500"},children:[(0,x.jsxs)("div",{children:["$",t.toFixed(4)]}),o&&(0,x.jsx)("div",{style:{fontSize:"10px",marginTop:"2px"},children:o})]})},y=e=>{const t=e.value||0,a=e.data.total_context_cost_estimated||0,s=t>60?"#fbbf24":t<30?"#34d399":"#94a3b8";return(0,x.jsxs)("div",{style:{color:s,fontWeight:"500"},children:[(0,x.jsxs)("div",{children:[t.toFixed(0),"%"]}),t>0&&(0,x.jsxs)("div",{style:{fontSize:"10px",marginTop:"2px",color:"#64748b"},children:["ctx: $",a.toFixed(3)]})]})},S=e=>{const t=e.value||0,a=(t/1e3).toFixed(1),s=e.data.cluster_avg_duration||0,o=e.data.is_duration_outlier,c=o?"#f87171":"#94a3b8",i=s>0?(t/s).toFixed(1):null;return(0,x.jsxs)("div",{style:{color:c,fontWeight:"500"},children:[(0,x.jsxs)("div",{children:[a,"s"]}),o&&i&&(0,x.jsxs)("div",{style:{fontSize:"10px",marginTop:"2px",color:"#64748b"},children:[i,"x slower"]})]})},N=n.zl0.withParams({backgroundColor:"#000000",foregroundColor:"#cbd5e1",headerBackgroundColor:"#0a0510",headerTextColor:"#f0f4f8",oddRowBackgroundColor:"#050410",borderColor:"#1a1628",rowBorder:!0,wrapperBorder:!1,headerFontSize:12,headerFontWeight:600,fontFamily:"'Google Sans Code', monospace",fontSize:13,accentColor:"#00e5ff",chromeBackgroundColor:"#000000"}),F=()=>{const{cascadeId:e}=(0,c.g)(),t=(0,c.Zp)(),a=e?decodeURIComponent(e):null,[n,F]=(0,o.useState)(a),[T,R]=(0,o.useState)([]),[k,$]=(0,o.useState)([]),[z,I]=(0,o.useState)(!0),[A,W]=(0,o.useState)(null),[M,D]=(0,o.useState)(600),[H,L]=(0,o.useState)(null),B=(0,o.useRef)(null),O=(0,o.useRef)(null),V=(0,p.I)({pollInterval:6e4}),[E,G]=(0,o.useState)({search:"",runCount:new Set,costRange:new Set,status:new Set,hasTakes:null,hasSubCascades:null}),P=async()=>{if(n)try{const e=T.find(e=>e.cascade_id===n);if(e&&e.cascade_file){console.log("[CascadesView] Loading cascade into Studio:",e.cascade_id,"from",e.cascade_file);const{loadCascade:a,setMode:s}=d.A.getState();await a(e.cascade_file),s("timeline"),t(m.bw.STUDIO)}else console.warn("[CascadesView] Could not find cascade file for:",n),t(m.bw.studioWithCascade(n))}catch(e){console.error("[CascadesView] Error loading cascade:",e)}};(0,o.useEffect)(()=>{const t=e?decodeURIComponent(e):null;t!==n&&(F(t),t||$([]))},[e]),(0,o.useEffect)(()=>{(async()=>{try{I(!0);const e=await fetch("http://localhost:5050/api/cascade-definitions"),t=await e.json();if(t.error)return void W(t.error);R(t),W(null)}catch(e){W(e.message)}finally{I(!1)}})(),(async()=>{try{const e=await fetch("http://localhost:5050/api/console/kpis"),t=await e.json();if(t.error)return void console.error("[CascadesView] KPI fetch error:",t.error);L(t)}catch(e){console.error("[CascadesView] KPI fetch failed:",e.message)}})()},[]),(0,o.useEffect)(()=>{n&&(async e=>{try{I(!0);const t=await fetch("http://localhost:5050/api/sessions?cascade_id=".concat(e,"&limit=100")),a=await t.json();if(a.error)return void W(a.error);const s=(a.sessions||[]).map(e=>({session_id:e.session_id,cascade_id:e.cascade_id,status:e.status,total_cost:e.total_cost||0,total_duration_ms:e.total_duration_ms||0,duration_seconds:e.started_at&&e.completed_at?(new Date(e.completed_at)-new Date(e.started_at))/1e3:0,input_data:e.input_data,start_time:e.started_at,end_time:e.completed_at,message_count:e.message_count||0,cost_diff_pct:e.cost_diff_pct,messages_diff_pct:e.messages_diff_pct,duration_diff_pct:e.duration_diff_pct,input_category:e.input_category,input_char_count:e.input_char_count||0,cost_z_score:e.cost_z_score||0,duration_z_score:e.duration_z_score||0,is_cost_outlier:e.is_cost_outlier||!1,is_duration_outlier:e.is_duration_outlier||!1,cluster_avg_cost:e.cluster_avg_cost||0,cluster_avg_duration:e.cluster_avg_duration||0,cluster_run_count:e.cluster_run_count||0,context_cost_pct:e.context_cost_pct||0,total_context_cost_estimated:e.total_context_cost_estimated||0}));$(s),W(null)}catch(t){W(t.message)}finally{I(!1)}})(n)},[n]),(0,o.useEffect)(()=>{const e=()=>{if(!O.current)return;const e=window.innerHeight,t=e-O.current.getBoundingClientRect().top-20,a=Math.max(400,Math.min(t,.7*e));D(a)};e(),window.addEventListener("resize",e);const t=setTimeout(e,100);return()=>{window.removeEventListener("resize",e),clearTimeout(t)}},[n]);const J=(0,o.useMemo)(()=>[{field:"cascade_id",headerName:"Cascade ID",flex:2,minWidth:180,cellClass:"cascades-id"},{field:"description",headerName:"Description",flex:3,minWidth:200},{field:"metrics.run_count",headerName:"Runs",width:90,valueFormatter:e=>e.value||0,cellStyle:{fontFamily:"var(--font-mono)"}},{field:"metrics.total_cost",headerName:"Total Cost",width:120,valueFormatter:e=>{const t=e.value||0;return t>0?"$".concat(t.toFixed(6)):"-"},cellStyle:{color:"#34d399",fontFamily:"var(--font-mono)"}},{field:"metrics.avg_duration_seconds",headerName:"Avg Duration",width:120,valueFormatter:e=>{const t=e.value||0;if(0===t)return"-";if(t<60)return"".concat(Math.round(t),"s");const a=Math.floor(t/60),s=Math.round(t%60);return"".concat(a,"m ").concat(s,"s")},cellStyle:{fontFamily:"var(--font-mono)"}},{field:"analytics.success_rate",headerName:"Success",headerTooltip:"Percentage of runs that completed successfully",width:95,wrapText:!0,autoHeight:!0,cellRenderer:g,tooltipValueGetter:e=>{const t=e.value||0;return"Success rate: ".concat(t.toFixed(1),"% of runs completed successfully")},cellStyle:{lineHeight:"1.4",whiteSpace:"normal",paddingTop:"4px",paddingBottom:"4px"}},{field:"analytics.cost_trend_pct",headerName:"Cost Trend",headerTooltip:"7-day vs 30-day average cost trend",width:110,wrapText:!0,autoHeight:!0,cellRenderer:_,tooltipValueGetter:e=>{var t,a;const s=e.value||0,o=(null===(t=e.data.analytics)||void 0===t?void 0:t.cost_7d_avg)||0,c=(null===(a=e.data.analytics)||void 0===a?void 0:a.cost_30d_avg)||0;return 0===o&&0===c?"Insufficient data for trend":"7d avg: $".concat(o.toFixed(4)," | 30d avg: $").concat(c.toFixed(4)," | Trend: ").concat(s>0?"+":"").concat(s.toFixed(1),"%")},cellStyle:{lineHeight:"1.4",whiteSpace:"normal",paddingTop:"4px",paddingBottom:"4px"}},{field:"analytics.outlier_rate",headerName:"Outliers",headerTooltip:"Percentage of runs that are cost outliers",width:95,wrapText:!0,autoHeight:!0,cellRenderer:b,tooltipValueGetter:e=>{const t=e.value||0;return"Outlier rate: ".concat(t.toFixed(1),"% of runs are statistical outliers (>2\u03c3)")},cellStyle:{lineHeight:"1.4",whiteSpace:"normal",paddingTop:"4px",paddingBottom:"4px"}},{field:"analytics.avg_context_pct",headerName:"Avg Ctx%",headerTooltip:"Average percentage of cost from context injection",width:95,wrapText:!0,autoHeight:!0,cellRenderer:C,tooltipValueGetter:e=>{const t=e.value||0;return"Average context cost: ".concat(t.toFixed(1),"% of total cost typically from context injection")},cellStyle:{lineHeight:"1.4",whiteSpace:"normal",paddingTop:"4px",paddingBottom:"4px"}},{field:"latest_run",headerName:"Latest Run",flex:1.5,minWidth:160,valueFormatter:e=>e.value?new Date(e.value).toLocaleString():"-"}],[]),K=(0,o.useMemo)(()=>[{field:"session_id",headerName:"Session ID",flex:2,minWidth:180,cellClass:"cascades-session-id"},{field:"status",headerName:"Status",width:100,cellRenderer:e=>{var t;const a={running:"#00e5ff",completed:"#34d399",error:"#ff006e",cancelled:"#64748b"}[null===(t=e.value)||void 0===t?void 0:t.toLowerCase()]||"#64748b";return(0,x.jsx)("span",{style:{color:a,fontWeight:600,textTransform:"uppercase",fontSize:"11px"},children:e.value})}},{field:"input_category",headerName:"Input",headerTooltip:"Input size category for apples-to-apples comparison",width:80,cellRenderer:w,tooltipValueGetter:e=>{const t=e.value,a=e.data.input_char_count||0;return t?"Input size: ".concat(t," (").concat(a," chars)"):a>0?"Input size: ".concat(a," chars (no category)"):"No input data"}},{field:"total_cost",headerName:"Cost",headerTooltip:"Statistical anomaly score vs similar input size runs",width:130,wrapText:!0,autoHeight:!0,cellRenderer:j,tooltipValueGetter:e=>{const t=e.value||0,a=e.data.cluster_avg_cost||0,s=e.data.cluster_run_count||0,o=e.data.cost_z_score||0;return"Cost: $".concat(t.toFixed(4)," | Cluster avg: $").concat(a.toFixed(4)," (n=").concat(s," similar runs) | Z-score: ").concat(o.toFixed(1),"\u03c3")},cellStyle:{fontFamily:"var(--font-mono)",lineHeight:"1.4",whiteSpace:"normal",paddingTop:"4px",paddingBottom:"4px"}},{field:"context_cost_pct",headerName:"Context%",headerTooltip:"Percentage of cost from context injection vs new tokens",width:100,wrapText:!0,autoHeight:!0,cellRenderer:y,tooltipValueGetter:e=>{const t=e.value||0,a=e.data.total_context_cost_estimated||0,s=(e.data.total_cost||0)-a;return"Context cost: $".concat(a.toFixed(4)," (").concat(t.toFixed(0),"%) | New tokens: $").concat(s.toFixed(4))},cellStyle:{fontFamily:"var(--font-mono)",lineHeight:"1.4",whiteSpace:"normal",paddingTop:"4px",paddingBottom:"4px"}},{field:"total_duration_ms",headerName:"Duration",headerTooltip:"Execution time compared to similar input size runs",width:120,wrapText:!0,autoHeight:!0,cellRenderer:S,tooltipValueGetter:e=>{const t=e.value||0,a=e.data.cluster_avg_duration||0,s=e.data.cluster_run_count||0,o=a>0?(t/a).toFixed(1):0;return"Duration: ".concat((t/1e3).toFixed(1),"s | Cluster avg: ").concat((a/1e3).toFixed(1),"s (n=").concat(s," similar runs) | ").concat(o,"x ").concat(t>a?"slower":"faster")},cellStyle:{fontFamily:"var(--font-mono)",lineHeight:"1.4",whiteSpace:"normal",paddingTop:"4px",paddingBottom:"4px"}},{field:"cost_diff_pct",hide:!0},{field:"messages_diff_pct",hide:!0},{field:"duration_diff_pct",hide:!0},{field:"message_count",hide:!0},{field:"duration_seconds",hide:!0},{field:"input_data",headerName:"Inputs",flex:2,minWidth:150,wrapText:!0,autoHeight:!0,valueFormatter:e=>{if(!e.value)return"-";try{const t="string"===typeof e.value?JSON.parse(e.value):e.value;if("object"===typeof t&&null!==t){const e=JSON.stringify(t,null,2);return e.length>150?e.slice(0,150)+"...":e}const a=JSON.stringify(t);return a.length>150?a.slice(0,150)+"...":a}catch(t){const a=String(e.value);return a.length>150?a.slice(0,150)+"...":a}},tooltipValueGetter:e=>{if(!e.value)return null;try{const t="string"===typeof e.value?JSON.parse(e.value):e.value;return JSON.stringify(t,null,2)}catch(t){return String(e.value)}},cellStyle:{fontFamily:"var(--font-mono)",fontSize:"12px",lineHeight:"1.4",whiteSpace:"normal",paddingTop:"8px",paddingBottom:"8px"}},{field:"start_time",headerName:"Started",flex:1.5,minWidth:160,valueFormatter:e=>e.value?new Date(e.value).toLocaleString():"-"}],[]),U=(0,o.useMemo)(()=>({sortable:!0,filter:!0,resizable:!0}),[]),Z=(0,o.useMemo)(()=>T.filter(e=>{if(E.search){var t,a;const s=E.search.toLowerCase(),o=null===(t=e.cascade_id)||void 0===t?void 0:t.toLowerCase().includes(s),c=null===(a=e.description)||void 0===a?void 0:a.toLowerCase().includes(s);if(!o&&!c)return!1}if(E.runCount.size>0){var s;const t=(null===(s=e.metrics)||void 0===s?void 0:s.run_count)||0;let a=!1;if(E.runCount.has("0")&&0===t&&(a=!0),E.runCount.has("1-10")&&t>=1&&t<=10&&(a=!0),E.runCount.has("11-50")&&t>=11&&t<=50&&(a=!0),E.runCount.has("50+")&&t>50&&(a=!0),!a)return!1}if(E.costRange.size>0){var o;const t=(null===(o=e.metrics)||void 0===o?void 0:o.total_cost)||0;let a=!1;if(E.costRange.has("$0")&&0===t&&(a=!0),E.costRange.has("$0-$1")&&t>0&&t<=1&&(a=!0),E.costRange.has("$1-$10")&&t>1&&t<=10&&(a=!0),E.costRange.has("$10+")&&t>10&&(a=!0),!a)return!1}if(null!==E.hasTakes){var c;if(((null===(c=e.graph_complexity)||void 0===c?void 0:c.has_takes)||!1)!==E.hasTakes)return!1}if(null!==E.hasSubCascades){var i;if(((null===(i=e.graph_complexity)||void 0===i?void 0:i.has_sub_cascades)||!1)!==E.hasSubCascades)return!1}return!0}),[T,E]),q=(0,o.useMemo)(()=>k.filter(e=>{if(E.search){var t;const a=E.search.toLowerCase(),s=null===(t=e.session_id)||void 0===t?void 0:t.toLowerCase().includes(a),o=JSON.stringify(e.input_data||{}).toLowerCase().includes(a);if(!s&&!o)return!1}if(E.status.size>0){var a;const t=null===(a=e.status)||void 0===a?void 0:a.toLowerCase();if(!E.status.has(t))return!1}if(E.costRange.size>0){const t=e.total_cost||0;let a=!1;if(E.costRange.has("$0")&&0===t&&(a=!0),E.costRange.has("$0-$0.10")&&t>0&&t<=.1&&(a=!0),E.costRange.has("$0.10-$1")&&t>.1&&t<=1&&(a=!0),E.costRange.has("$1+")&&t>1&&(a=!0),!a)return!1}return!0}),[k,E]),Q=(0,o.useMemo)(()=>""!==E.search||E.runCount.size>0||E.costRange.size>0||E.status.size>0||null!==E.hasTakes||null!==E.hasSubCascades,[E]),X=(0,o.useMemo)(()=>{if(!n||0===k.length)return null;const e=k.length,t=k.reduce((e,t)=>e+(t.total_cost||0),0),a=k.filter(e=>e.is_cost_outlier).length,s=k.filter(e=>e.context_cost_pct>0),o=s.length>0?s.reduce((e,t)=>e+t.context_cost_pct,0)/s.length:0,c=k.filter(e=>"completed"===e.status).length,i=k.filter(e=>"error"===e.status).length;return{totalRuns:e,totalCost:t,outlierCount:a,avgContextPct:o,successRate:e>0?c/(c+i)*100:100,errorCount:i}},[n,k]),Y=(e,t)=>{G(a=>{const o=new Set(a[e]);return o.has(t)?o.delete(t):o.add(t),(0,s.A)((0,s.A)({},a),{},{[e]:o})})},ee=e=>{G(t=>(0,s.A)((0,s.A)({},t),{},{[e]:null===t[e]||!0!==t[e]&&null}))},te=n?q:Z,ae=n?k:T,se=n?K:J,oe=n?e=>{const{session_id:a}=e.data;a&&n&&t(m.bw.studioWithSession(n,a))}:e=>{const{cascade_id:a}=e.data;a&&(F(a),t(m.bw.cascadesWithCascade(a)))},ce=(0,o.useMemo)(()=>n?[n]:Q&&Z.length>0?Z.map(e=>e.cascade_id):[],[n,Z,Q]),ie=(0,o.useMemo)(()=>{if(!n)return null;const e=T.find(e=>e.cascade_id===n);return e?{cells:e.cells||[],inputsSchema:e.inputs_schema||{}}:null},[n,T]);return(0,x.jsxs)("div",{className:"cascades-view",children:[(0,x.jsxs)("div",{className:"cascades-header",children:[(0,x.jsxs)("div",{className:"cascades-title",children:[n&&(0,x.jsx)(r.$n,{variant:"ghost",size:"sm",icon:"mdi:arrow-left",onClick:()=>{F(null),$([]),t(m.bw.CASCADES)},className:"cascades-back-btn",children:"Back"}),(0,x.jsx)(l.In,{icon:"mdi:file-tree",width:"32"}),(0,x.jsx)("h1",{children:n||"Cascades"})]}),(0,x.jsx)("div",{className:"cascades-subtitle",children:n?"Execution history for ".concat(n):"All cascade definitions with aggregate metrics"})]}),!n&&(H||null!==V.balance)&&(0,x.jsx)("div",{className:"cascades-kpi-section",children:(0,x.jsxs)("div",{className:"cascades-kpi-grid",children:[H&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(f.A,{icon:"mdi:cash",title:"24h Cost",value:"$".concat(H.total_cost_24h.toFixed(2)),subtitle:H.cost_trend,color:"#34d399"}),(0,x.jsx)(f.A,{icon:"mdi:alert-circle",title:"Active Outliers",value:H.outlier_count,subtitle:"in last 24h",color:H.outlier_count>0?"#f87171":"#94a3b8"}),(0,x.jsx)(f.A,{icon:"mdi:percent",title:"Avg Context%",value:"".concat(H.avg_context_pct.toFixed(0),"%"),subtitle:H.context_trend,color:"#60a5fa"})]}),(0,x.jsx)(f.A,{icon:"mdi:wallet",title:"OR Balance",value:null!==V.balance?"$".concat(V.balance.toFixed(2)):"\u2014",subtitle:null!==V.runwayDays?"~".concat(V.runwayDays,"d runway"):null!==V.burnRate24h?"$".concat(V.burnRate24h.toFixed(2),"/hr"):null,color:null===V.balance?"#64748b":V.balance>20?"#34d399":V.balance>5?"#fbbf24":"#f87171"})]})}),n&&X&&(0,x.jsx)("div",{className:"cascades-kpi-section",children:(0,x.jsxs)("div",{className:"cascades-kpi-grid",children:[(0,x.jsx)(f.A,{title:"Total Runs",value:X.totalRuns,subtitle:X.errorCount>0?"".concat(X.errorCount," errors"):"no errors",icon:"mdi:play-circle",color:X.successRate>=95?"#34d399":X.successRate>=80?"#fbbf24":"#f87171"}),(0,x.jsx)(f.A,{title:"Total Cost",value:"$".concat(X.totalCost.toFixed(4)),subtitle:"$".concat((X.totalCost/X.totalRuns).toFixed(4)," avg/run"),icon:"mdi:cash",color:"#34d399"}),(0,x.jsx)(f.A,{title:"Outliers",value:X.outlierCount,subtitle:X.outlierCount>0?"".concat((X.outlierCount/X.totalRuns*100).toFixed(0),"% of runs"):"none detected",icon:"mdi:alert-circle",color:X.outlierCount>0?"#f87171":"#64748b"}),(0,x.jsx)(f.A,{title:"Avg Context%",value:"".concat(X.avgContextPct.toFixed(0),"%"),subtitle:"of cost is context",icon:"mdi:database-import",color:X.avgContextPct>60?"#fbbf24":X.avgContextPct>30?"#60a5fa":"#34d399"})]})}),(0,x.jsxs)("div",{className:"cascades-section",children:[(0,x.jsxs)("div",{className:"cascades-section-header",children:[(0,x.jsx)(l.In,{icon:"mdi:chart-line",width:"14"}),(0,x.jsx)("h2",{children:"Cost Timeline"}),(0,x.jsx)("span",{className:"cascades-filter-label ".concat(0===ce.length?"invisible":""),children:1===ce.length?"Filtered to: ".concat(ce[0]):ce.length>1?"Filtered to ".concat(ce.length," cascades"):"\xa0"})]}),(0,x.jsx)("div",{className:"cascades-chart-wrapper",children:(0,x.jsx)(u.A,{cascadeIds:ce})})]}),n&&ie&&ie.cells.length>0&&(0,x.jsx)("div",{className:"cascades-section",children:(0,x.jsx)(h.A,{cells:ie.cells,inputsSchema:ie.inputsSchema,cascadeId:n})}),(0,x.jsxs)("div",{className:"cascades-section",children:[(0,x.jsxs)("div",{className:"cascades-section-header",children:[(0,x.jsx)(l.In,{icon:"mdi:table",width:"14"}),(0,x.jsx)("h2",{children:n?"Execution History":"All Cascades"}),(0,x.jsxs)("span",{className:"cascades-count",children:[Q?"".concat(te.length," of ").concat(ae.length):te.length," ",n?"sessions":"cascades"]}),n&&(0,x.jsxs)("button",{className:"cascades-open-studio-btn",onClick:P,title:"Open cascade spec in Studio (no session)",children:[(0,x.jsx)(l.In,{icon:"mdi:pencil-ruler",width:"14"}),"Open in Studio"]})]}),(0,x.jsxs)("div",{className:"cascades-filter-bar",children:[(0,x.jsxs)("div",{className:"filter-search",children:[(0,x.jsx)(l.In,{icon:"mdi:magnify",width:"14"}),(0,x.jsx)("input",{type:"text",placeholder:n?"Search sessions...":"Search cascades...",value:E.search,onChange:e=>G(t=>(0,s.A)((0,s.A)({},t),{},{search:e.target.value}))}),E.search&&(0,x.jsx)(l.In,{icon:"mdi:close-circle",width:"14",className:"filter-search-clear",onClick:()=>G(e=>(0,s.A)((0,s.A)({},e),{},{search:""}))})]}),!n&&(0,x.jsxs)("div",{className:"filter-group",children:[(0,x.jsx)("span",{className:"filter-label",children:"Runs"}),(0,x.jsx)("div",{className:"filter-chips",children:["0","1-10","11-50","50+"].map(e=>(0,x.jsx)("button",{className:"filter-chip ".concat(E.runCount.has(e)?"active":""),onClick:()=>Y("runCount",e),children:e},e))})]}),n&&(0,x.jsxs)("div",{className:"filter-group",children:[(0,x.jsx)("span",{className:"filter-label",children:"Status"}),(0,x.jsx)("div",{className:"filter-chips",children:["completed","error","running","blocked"].map(e=>(0,x.jsx)("button",{className:"filter-chip status-".concat(e," ").concat(E.status.has(e)?"active":""),onClick:()=>Y("status",e),children:e},e))})]}),(0,x.jsxs)("div",{className:"filter-group",children:[(0,x.jsx)("span",{className:"filter-label",children:"Cost"}),(0,x.jsx)("div",{className:"filter-chips",children:n?["$0","$0-$0.10","$0.10-$1","$1+"].map(e=>(0,x.jsx)("button",{className:"filter-chip ".concat(E.costRange.has(e)?"active":""),onClick:()=>Y("costRange",e),children:e},e)):["$0","$0-$1","$1-$10","$10+"].map(e=>(0,x.jsx)("button",{className:"filter-chip ".concat(E.costRange.has(e)?"active":""),onClick:()=>Y("costRange",e),children:e},e))})]}),!n&&(0,x.jsxs)("div",{className:"filter-group",children:[(0,x.jsx)("span",{className:"filter-label",children:"Features"}),(0,x.jsxs)("div",{className:"filter-chips",children:[(0,x.jsxs)("button",{className:"filter-toggle ".concat(!0===E.hasTakes?"active":""," ").concat(!1===E.hasTakes?"inactive":""),onClick:()=>ee("hasTakes"),title:null===E.hasTakes?"Show all":E.hasTakes?"With takes":"Without takes",children:[(0,x.jsx)(l.In,{icon:"mdi:routes",width:"12"}),"Takes"]}),(0,x.jsxs)("button",{className:"filter-toggle ".concat(!0===E.hasSubCascades?"active":""," ").concat(!1===E.hasSubCascades?"inactive":""),onClick:()=>ee("hasSubCascades"),title:null===E.hasSubCascades?"Show all":E.hasSubCascades?"With sub-cascades":"Without sub-cascades",children:[(0,x.jsx)(l.In,{icon:"mdi:file-tree",width:"12"}),"Sub-Cascades"]})]})]}),Q&&(0,x.jsxs)("button",{className:"filter-clear",onClick:()=>{G({search:"",runCount:new Set,costRange:new Set,status:new Set,hasTakes:null,hasSubCascades:null})},children:[(0,x.jsx)(l.In,{icon:"mdi:close-circle",width:"14"}),"Clear"]})]}),A&&(0,x.jsxs)("div",{className:"cascades-error",children:[(0,x.jsx)(l.In,{icon:"mdi:alert-circle",width:"20"}),(0,x.jsx)("span",{children:A})]}),!A&&(0,x.jsx)(x.Fragment,{children:0===te.length&&!z&&n?(0,x.jsxs)("div",{className:"cascades-empty-state",children:[(0,x.jsx)(l.In,{icon:"mdi:play-circle-outline",width:"64"}),(0,x.jsx)("h3",{children:"No runs yet"}),(0,x.jsx)("p",{children:"This cascade hasn't been executed yet."}),(0,x.jsx)(r.$n,{variant:"primary",icon:"mdi:rocket-launch",onClick:P,children:"Load in Studio to Run"})]}):(0,x.jsx)("div",{ref:O,className:"cascades-grid-container",style:{height:"".concat(M,"px")},children:(0,x.jsx)(i.W6,{ref:B,theme:N,rowData:te,columnDefs:se,defaultColDef:U,getRowId:e=>e.data.session_id||e.data.cascade_id,domLayout:"normal",suppressCellFocus:!0,suppressMovableColumns:!1,enableCellTextSelection:!0,ensureDomOrder:!0,animateRows:!0,loading:z,loadingOverlayComponent:v,onRowClicked:oe,onFirstDataRendered:e=>{e.api.sizeColumnsToFit()},rowClass:"cascades-grid-row-clickable",tooltipShowDelay:500})})})]})]})}}}]);
//# sourceMappingURL=434.850dcdf3.chunk.js.map