(self.webpackChunklars_ui=self.webpackChunklars_ui||[]).push([[671],{13218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},41497:(e,s,i)=>{"use strict";var n=i(13218);function t(){}function c(){}c.resetWarningCache=t,e.exports=function(){function e(e,s,i,t,c,a){if(a!==n){var r=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw r.name="Invariant Violation",r}}function s(){return e}e.isRequired=e;var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:s,element:e,elementType:e,instanceOf:s,node:e,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:c,resetWarningCache:t};return i.PropTypes=i,i}},65173:(e,s,i)=>{e.exports=i(41497)()},65307:(e,s,i)=>{"use strict";i.r(s),i.d(s,{default:()=>m});var n=i(65043),t=i(45685),c=i(24768),a=i(5748),r=i(64065),l=i(97256),o=i(93436),d=i(60263),h=i(24227),p=i(70579);const m=()=>{const[e,s]=(0,n.useState)([]),[i,m]=(0,n.useState)(null),[u,x]=(0,n.useState)(!0),[j,v]=(0,n.useState)(null),[f,g]=(0,n.useState)([25,75]),[y,k]=(0,n.useState)(!1),{showToast:w}=(0,r.dj)(),N=(0,t.Zp)(),_=(0,n.useCallback)(async()=>{try{const e=await fetch("".concat(h.J,"/api/checkpoints")),i=await e.json();if(i.error)return void v(i.error);const n=(i.checkpoints||[]).filter(e=>"pending"===e.status);s(n),m(e=>{if(!e&&n.length>0)return n[0];if(e){const s=n.find(s=>s.id===e.id);return s?JSON.stringify(s)===JSON.stringify(e)?e:s:n.length>0?n[0]:null}return e}),v(null)}catch(e){v(e.message)}finally{x(!1)}},[]);(0,n.useEffect)(()=>{_();const e=setInterval(_,3e3);return()=>clearInterval(e)},[_]);const b=async(e,s)=>{try{const i=await fetch("".concat(h.J,"/api/checkpoints/").concat(e,"/respond"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({response:s})}),n=await i.json();if(n.error)return void w("error","Failed to respond: ".concat(n.error));w("success","Response submitted successfully"),_()}catch(i){w("error","Error: ".concat(i.message))}},S=async e=>{if(window.confirm("Are you sure you want to cancel this checkpoint?"))try{const s=await fetch("".concat(h.J,"/api/checkpoints/").concat(e,"/cancel"),{method:"POST"}),i=await s.json();if(i.error)return void w("error","Failed to cancel: ".concat(i.error));w("success","Checkpoint cancelled"),_()}catch(s){w("error","Error: ".concat(s.message))}},C=e=>{const s=Math.floor((Date.now()-new Date(e).getTime())/1e3);if(s<60)return"".concat(s,"s");if(s<3600)return"".concat(Math.floor(s/60),"m");const i=Math.floor(s/3600),n=Math.floor(s%3600/60);return"".concat(i,"h ").concat(n,"m")};return u&&0===e.length?(0,p.jsx)(r.lp,{size:"large",message:"Loading checkpoints..."}):0===e.length?(0,p.jsxs)("div",{className:"interrupts-view-empty",children:[(0,p.jsx)(a.In,{icon:"mdi:check-circle",width:"64",className:"empty-icon"}),(0,p.jsx)("h2",{children:"All clear!"}),(0,p.jsx)("p",{children:"No pending checkpoints. All cascades are running smoothly."})]}):(0,p.jsxs)("div",{className:"interrupts-view-split",children:[(0,p.jsxs)(c.A,{className:"interrupts-horizontal-split",sizes:f,onDragEnd:e=>g(e),minSize:[200,400],maxSize:[500,1/0],gutterSize:4,gutterAlign:"center",direction:"horizontal",children:[(0,p.jsxs)("div",{className:"interrupts-sidebar",children:[(0,p.jsxs)("div",{className:"interrupts-sidebar-header",children:[(0,p.jsxs)("div",{className:"sidebar-title",children:[(0,p.jsx)(a.In,{icon:"mdi:hand-back-right",width:"16"}),(0,p.jsx)("span",{children:"Interrupts"}),(0,p.jsx)(r.Ex,{variant:"count",color:"yellow",size:"sm",glow:!0,pulse:!0,children:e.length})]}),i&&(0,p.jsx)(r.$n,{variant:"ghost",size:"sm",icon:"mdi:window-restore",onClick:()=>k(!0),style:{marginTop:"8px"},children:"Test Modal"})]}),(0,p.jsx)("div",{className:"interrupts-list",children:e.map(e=>(0,p.jsxs)("div",{className:"checkpoint-list-item ".concat((null===i||void 0===i?void 0:i.id)===e.id?"selected":""),onClick:()=>m(e),children:[(0,p.jsxs)("div",{className:"checkpoint-list-header",children:[(0,p.jsx)(r.Ex,{variant:"label",color:"purple",size:"sm",children:e.checkpoint_type}),(0,p.jsx)("span",{className:"checkpoint-wait-time",children:C(e.created_at)})]}),(0,p.jsxs)("div",{className:"checkpoint-list-session",children:[e.session_id.substring(0,16),"..."]}),(0,p.jsxs)("div",{className:"checkpoint-list-meta",children:[(0,p.jsx)("span",{className:"checkpoint-list-cascade",children:e.cascade_id}),e.cell_name&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(a.In,{icon:"mdi:chevron-right",width:"10"}),(0,p.jsx)("span",{className:"checkpoint-list-cell",children:e.cell_name})]})]})]},e.id))})]}),(0,p.jsx)("div",{className:"interrupts-detail-panel",children:i?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"interrupts-detail-header",children:[(0,p.jsxs)("div",{className:"detail-header-main",children:[(0,p.jsx)("div",{className:"detail-header-type",children:(0,p.jsx)(r.Ex,{variant:"label",color:"purple",children:i.checkpoint_type})}),(0,p.jsxs)("div",{className:"detail-header-info",children:[(0,p.jsx)("span",{className:"detail-session",title:i.session_id,children:i.session_id}),(0,p.jsx)(a.In,{icon:"mdi:chevron-right",width:"12"}),(0,p.jsx)("span",{className:"detail-cascade",children:i.cascade_id}),i.cell_name&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(a.In,{icon:"mdi:chevron-right",width:"12"}),(0,p.jsx)("span",{className:"detail-cell",children:i.cell_name})]})]})]}),(0,p.jsxs)("div",{className:"detail-header-actions",children:[(0,p.jsx)(r.$n,{variant:"ghost",size:"sm",icon:"mdi:eye",onClick:()=>N(d.bw.studioWithSession(i.cascade_id,i.session_id)),children:"View in Studio"}),(0,p.jsx)(r.$n,{variant:"danger",size:"sm",icon:"mdi:close-circle",onClick:()=>S(i.id),children:"Cancel"})]})]}),(0,p.jsx)("div",{className:"interrupts-detail-content",children:(0,p.jsx)(l.A,{checkpoint:i,onSubmit:e=>b(i.id,e),variant:"page",showCellOutput:!0})})]}):(0,p.jsxs)("div",{className:"interrupts-detail-empty",children:[(0,p.jsx)(a.In,{icon:"mdi:cursor-default-click",width:"48"}),(0,p.jsx)("p",{children:"Select a checkpoint to view details"})]})})]}),j&&(0,p.jsxs)("div",{className:"interrupts-error-toast",children:[(0,p.jsx)(a.In,{icon:"mdi:alert-circle",width:"16"}),(0,p.jsx)("span",{children:j})]}),y&&i&&(0,p.jsx)(o.A,{checkpoint:i,onSubmit:async e=>{await b(i.id,e),k(!1)},onClose:()=>k(!1),onCancel:async()=>{await S(i.id),k(!1)}})]})}}}]);
//# sourceMappingURL=671.1d697dcf.chunk.js.map