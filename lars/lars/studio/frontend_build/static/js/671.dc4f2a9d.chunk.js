(self.webpackChunklars_ui=self.webpackChunklars_ui||[]).push([[671],{13218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},41497:(e,s,i)=>{"use strict";var t=i(13218);function n(){}function c(){}c.resetWarningCache=n,e.exports=function(){function e(e,s,i,n,c,a){if(a!==t){var r=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw r.name="Invariant Violation",r}}function s(){return e}e.isRequired=e;var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:s,element:e,elementType:e,instanceOf:s,node:e,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:c,resetWarningCache:n};return i.PropTypes=i,i}},65173:(e,s,i)=>{e.exports=i(41497)()},65307:(e,s,i)=>{"use strict";i.r(s),i.d(s,{default:()=>p});var t=i(65043),n=i(45685),c=i(24768),a=i(5748),r=i(64065),l=i(97256),o=i(93436),d=i(60263),h=i(70579);const p=()=>{const[e,s]=(0,t.useState)([]),[i,p]=(0,t.useState)(null),[m,u]=(0,t.useState)(!0),[x,j]=(0,t.useState)(null),[v,f]=(0,t.useState)([25,75]),[g,y]=(0,t.useState)(!1),{showToast:k}=(0,r.dj)(),w=(0,n.Zp)(),N=(0,t.useCallback)(async()=>{try{const e=await fetch("http://localhost:5050/api/checkpoints"),i=await e.json();if(i.error)return void j(i.error);const t=(i.checkpoints||[]).filter(e=>"pending"===e.status);s(t),p(e=>{if(!e&&t.length>0)return t[0];if(e){const s=t.find(s=>s.id===e.id);return s?JSON.stringify(s)===JSON.stringify(e)?e:s:t.length>0?t[0]:null}return e}),j(null)}catch(e){j(e.message)}finally{u(!1)}},[]);(0,t.useEffect)(()=>{N();const e=setInterval(N,3e3);return()=>clearInterval(e)},[N]);const _=async(e,s)=>{try{const i=await fetch("http://localhost:5050/api/checkpoints/".concat(e,"/respond"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({response:s})}),t=await i.json();if(t.error)return void k("error","Failed to respond: ".concat(t.error));k("success","Response submitted successfully"),N()}catch(i){k("error","Error: ".concat(i.message))}},b=async e=>{if(window.confirm("Are you sure you want to cancel this checkpoint?"))try{const s=await fetch("http://localhost:5050/api/checkpoints/".concat(e,"/cancel"),{method:"POST"}),i=await s.json();if(i.error)return void k("error","Failed to cancel: ".concat(i.error));k("success","Checkpoint cancelled"),N()}catch(s){k("error","Error: ".concat(s.message))}},S=e=>{const s=Math.floor((Date.now()-new Date(e).getTime())/1e3);if(s<60)return"".concat(s,"s");if(s<3600)return"".concat(Math.floor(s/60),"m");const i=Math.floor(s/3600),t=Math.floor(s%3600/60);return"".concat(i,"h ").concat(t,"m")};return m&&0===e.length?(0,h.jsx)(r.lp,{size:"large",message:"Loading checkpoints..."}):0===e.length?(0,h.jsxs)("div",{className:"interrupts-view-empty",children:[(0,h.jsx)(a.In,{icon:"mdi:check-circle",width:"64",className:"empty-icon"}),(0,h.jsx)("h2",{children:"All clear!"}),(0,h.jsx)("p",{children:"No pending checkpoints. All cascades are running smoothly."})]}):(0,h.jsxs)("div",{className:"interrupts-view-split",children:[(0,h.jsxs)(c.A,{className:"interrupts-horizontal-split",sizes:v,onDragEnd:e=>f(e),minSize:[200,400],maxSize:[500,1/0],gutterSize:4,gutterAlign:"center",direction:"horizontal",children:[(0,h.jsxs)("div",{className:"interrupts-sidebar",children:[(0,h.jsxs)("div",{className:"interrupts-sidebar-header",children:[(0,h.jsxs)("div",{className:"sidebar-title",children:[(0,h.jsx)(a.In,{icon:"mdi:hand-back-right",width:"16"}),(0,h.jsx)("span",{children:"Interrupts"}),(0,h.jsx)(r.Ex,{variant:"count",color:"yellow",size:"sm",glow:!0,pulse:!0,children:e.length})]}),i&&(0,h.jsx)(r.$n,{variant:"ghost",size:"sm",icon:"mdi:window-restore",onClick:()=>y(!0),style:{marginTop:"8px"},children:"Test Modal"})]}),(0,h.jsx)("div",{className:"interrupts-list",children:e.map(e=>(0,h.jsxs)("div",{className:"checkpoint-list-item ".concat((null===i||void 0===i?void 0:i.id)===e.id?"selected":""),onClick:()=>p(e),children:[(0,h.jsxs)("div",{className:"checkpoint-list-header",children:[(0,h.jsx)(r.Ex,{variant:"label",color:"purple",size:"sm",children:e.checkpoint_type}),(0,h.jsx)("span",{className:"checkpoint-wait-time",children:S(e.created_at)})]}),(0,h.jsxs)("div",{className:"checkpoint-list-session",children:[e.session_id.substring(0,16),"..."]}),(0,h.jsxs)("div",{className:"checkpoint-list-meta",children:[(0,h.jsx)("span",{className:"checkpoint-list-cascade",children:e.cascade_id}),e.cell_name&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(a.In,{icon:"mdi:chevron-right",width:"10"}),(0,h.jsx)("span",{className:"checkpoint-list-cell",children:e.cell_name})]})]})]},e.id))})]}),(0,h.jsx)("div",{className:"interrupts-detail-panel",children:i?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"interrupts-detail-header",children:[(0,h.jsxs)("div",{className:"detail-header-main",children:[(0,h.jsx)("div",{className:"detail-header-type",children:(0,h.jsx)(r.Ex,{variant:"label",color:"purple",children:i.checkpoint_type})}),(0,h.jsxs)("div",{className:"detail-header-info",children:[(0,h.jsx)("span",{className:"detail-session",title:i.session_id,children:i.session_id}),(0,h.jsx)(a.In,{icon:"mdi:chevron-right",width:"12"}),(0,h.jsx)("span",{className:"detail-cascade",children:i.cascade_id}),i.cell_name&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(a.In,{icon:"mdi:chevron-right",width:"12"}),(0,h.jsx)("span",{className:"detail-cell",children:i.cell_name})]})]})]}),(0,h.jsxs)("div",{className:"detail-header-actions",children:[(0,h.jsx)(r.$n,{variant:"ghost",size:"sm",icon:"mdi:eye",onClick:()=>w(d.bw.studioWithSession(i.cascade_id,i.session_id)),children:"View in Studio"}),(0,h.jsx)(r.$n,{variant:"danger",size:"sm",icon:"mdi:close-circle",onClick:()=>b(i.id),children:"Cancel"})]})]}),(0,h.jsx)("div",{className:"interrupts-detail-content",children:(0,h.jsx)(l.A,{checkpoint:i,onSubmit:e=>_(i.id,e),variant:"page",showCellOutput:!0})})]}):(0,h.jsxs)("div",{className:"interrupts-detail-empty",children:[(0,h.jsx)(a.In,{icon:"mdi:cursor-default-click",width:"48"}),(0,h.jsx)("p",{children:"Select a checkpoint to view details"})]})})]}),x&&(0,h.jsxs)("div",{className:"interrupts-error-toast",children:[(0,h.jsx)(a.In,{icon:"mdi:alert-circle",width:"16"}),(0,h.jsx)("span",{children:x})]}),g&&i&&(0,h.jsx)(o.A,{checkpoint:i,onSubmit:async e=>{await _(i.id,e),y(!1)},onClose:()=>y(!1),onCancel:async()=>{await b(i.id),y(!1)}})]})}}}]);
//# sourceMappingURL=671.dc4f2a9d.chunk.js.map