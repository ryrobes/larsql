[pytest]
# Test discovery paths - explicitly list where to find tests
testpaths =
    tests
    lars/lars/tests

# Python path for proper module imports
pythonpath = .

# Exclude patterns - don't collect from scripts/
norecursedirs =
    scripts
    .git
    __pycache__
    *.egg-info
    build
    dist
    node_modules
    studio
    alice
    doc_pages

# File patterns for test discovery
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Register custom markers
markers =
    requires_llm: marks tests that require an LLM API key (deselect with '-m "not requires_llm"')
    requires_clickhouse: marks tests that require a ClickHouse connection
    integration: marks integration tests that may be slow or require external services
    cloud: marks tests that require cloud service credentials
    gcp: marks tests that require Google Cloud Platform credentials
    docker: marks tests that require Docker to be running

# Filter known warnings from dependencies
filterwarnings =
    ignore::DeprecationWarning:litellm.*
    ignore:.*asyncio.iscoroutinefunction.*:DeprecationWarning
    ignore:.*Pydantic serializer.*:UserWarning
