# Validator: Check if a chart was successfully rendered
cascade_id: chart_rendered
description: Validates that a chart image was produced without rendering errors

inputs_schema:
  content: The agent's output to validate
  original_input: The original cascade input (optional)

phases:
  - name: validate
    model: google/gemini-2.5-flash-lite
    instructions: |
      Check if a chart was successfully rendered (not whether it's good, just that it exists).

      Output to check:
      {{ input.content }}

      A VALID output must have:
      1. Evidence of a chart being created (mentions of image, chart, visualization being generated)
      2. NO rendering errors, spec errors, or validation failures
      3. NO messages like "error", "failed to render", "invalid spec", "schema validation failed"

      Signs of SUCCESS:
      - "Chart created", "Image generated", "Here is the visualization"
      - References to analyzing the chart visually
      - Discussion of what the chart shows

      Signs of FAILURE:
      - "Error", "Failed", "Invalid", "Could not render"
      - Vega-Lite or Plotly spec validation errors
      - Empty or missing chart output

      Return JSON only:
      - If valid: {"valid": true, "reason": "Chart rendered successfully"}
      - If not valid: {"valid": false, "reason": "No chart or rendering error: [brief description]"}

    rules:
      max_turns: 1
