# Validator: Check if SQL query executed successfully with results
cascade_id: query_executed
description: Validates that a SQL query was executed and returned results

inputs_schema:
  content: The agent's output to validate
  original_input: The original cascade input (optional)

phases:
  - name: validate
    model: google/gemini-2.5-flash-lite
    instructions: |
      Check if this output shows a successfully executed SQL query with results.

      Output to check:
      {{ input.content }}

      A VALID output must have:
      1. A SQL query (SELECT statement)
      2. Query results (data rows, not just an error)
      3. No SQL syntax errors or execution failures

      Return JSON only:
      - If valid: {"valid": true, "reason": "Query executed with results"}
      - If not valid: {"valid": false, "reason": "No successful query or results found"}

    rules:
      max_turns: 1
